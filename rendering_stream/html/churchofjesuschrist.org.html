<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" class="webkit svg no-touch"><head class="at-element-marker">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>The Church of Jesus Christ of Latter-day Saints</title><meta name="KEYWORDS" content="" /><meta name="DESCRIPTION" content="Official website of The Church of Jesus Christ of Latter-day Saints. Find messages of Christ to uplift your soul and invite the Spirit." /><!-- <PageMap>
        <DataObject type='document'><Attribute name='title'>The Church of Jesus Christ of Latter-day Saints</Attribute><Attribute name='description'>Official website of The Church of Jesus Christ of Latter-day Saints. Find messages of Christ to uplift your soul and invite the Spirit.</Attribute><Attribute name='subject'></Attribute><Attribute name='collection'>web</Attribute></DataObject>
    </PageMap> --><meta property="og:title" content="The Church of Jesus Christ of Latter-day Saints" /><meta property="og:url" content="https://www.churchofjesuschrist.org/?lang=eng" /><meta property="og:description" content="Official website of The Church of Jesus Christ of Latter-day Saints. Find messages of Christ to uplift your soul and invite the Spirit." /><meta property="og:image" content="http://www.lds.org/bc/content/ldsorg/content/images/facebook/lds_Fb_defaultThm.jpg" /><meta property="fb:admins" content="683545112,100001195566656" /><meta property="og:type" content="non_profit" /><link rel="canonical" href="https://www.churchofjesuschrist.org/?lang=eng" />
		<meta charset="utf-8" />
		
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><!-- forces IE to play nice -->
		<link rel="shortcut icon" href="//edge.ldscdn.org/cdn2/common/images/logos/favicon-lds-1.ico" />
		
		<link rel="stylesheet" type="text/css" media="all" href="//edge.ldscdn.org/cdn2/csp/platform/styles/platform4.css" class="pf-fix-me" />
		<!-- Prototype only: The following should be included on pages that are responsive -->
		<!-- Mobile viewport optimization http://goo.gl/b9SaQ -->
		<meta name="HandheldFriendly" content="True" />
		<meta name="MobileOptimized" content="320" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="stylesheet" type="text/css" media="all" href="//edge.ldscdn.org/cdn2/csp/ldsorg/css/common/lds-old.css" />
		<iframe src="javascript:void(0)" title="" style="width: 0px; height: 0px; border: 0px; display: none;"></iframe><img src="//edge.ldscdn.org/cdn2/common/media-loader/5.0.1/index.min.js" type="text/javascript" height="0" width="0" /><script type="text/javascript" src="//edge.ldscdn.org/cdn2/common/media-loader/5.0.1/index.min.js"></script><script async="" src="https://edge.ldscdn.org/cdn2/itt/appd/adrum-ext.e2cb5463010d357205cea2144c54cf70.js"></script><script type="text/javascript" src="//zn6rk6tr2d4thcrsb-lds.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_6RK6tR2D4THcrSB&amp;Q_LOC=https%3A%2F%2Fwww.churchofjesuschrist.org%2F%3Flang%3Deng"></script><script type="text/javascript" async="" charset="utf-8" id="utag_61" src="https://edge.ldscdn.org/cdn2/itt/appd/adrum/adrum.js"></script><script src="https://connect.facebook.net/signals/config/788758124619655?v=2.9.29&amp;r=stable" async=""></script><script type="text/javascript" async="" charset="utf-8" id="utag_11" src="https://connect.facebook.net/en_US/fbevents.js"></script><script async="" src="//consent.truste.com/notice?domain=lds.org&amp;c=teconsent&amp;js=bb&amp;noticeType=bb&amp;text=true&amp;oc=1&amp;fade=30000 crossorigin=&quot;&quot;"></script><script src="//tags.tiqcdn.com/utag/lds/ldsorg/prod/utag.js" type="text/javascript" async=""></script><script async="" src="//consent.trustarc.com/notice?domain=lds.org&amp;c=teconsent&amp;js=nj&amp;noticeType=bb&amp;text=true&amp;gtm=1&amp;pn=1-0" id="truste_0.8511778099261615"></script><script src="https://edge.ldscdn.org/cdn2/csp/ldsorg/scripts/tracking.js" type="text/javascript" async=""></script><script src="//edge.ldscdn.org/cdn2/common/scripts/jquery/1.7.1/jquery.min.js"></script>
		<script src="//edge.ldscdn.org/cdn2/csp/ldsorg/script/common/lds.js"></script>
		<script type="text/javascript">
			window.platformConfig = {
				footerConfig: {
					removeLegacyScripts: true
				}
			}
		</script>
	<link rel="stylesheet" type="text/css" media="all" href="//edge.ldscdn.org/cdn2/csp/ldsorg/home/css/strata.css" />
<script type="text/javascript">
      window.PlatformVars = {
          lang: "eng",
          cdn2Path: "//edge.ldscdn.org/cdn2",
          host: "https://www.churchofjesuschrist.org"
      }
    </script><script type="text/javascript">

      window.digitalData = window.digitalData || [];
      window.digitalDataEvents = {
        ...window.digitalDataEvents,
        pageView: 'Page View'
      };
      window.digitalData.push({
        event: window.digitalDataEvents.pageView,
        data: {"page":{"info":{"name":"ChurchofJesusChrist.org:/", "language":"eng", "siteName":"ChurchofJesusChrist.org"}, "category":{"primary":"Home", "type":"Content"}}}
      });

    </script><script src="https://www.churchofjesuschrist.org/services/platform/v4/index.js" async="async"></script>
  <script>!function(a){var e="https://s.go-mpulse.net/boomerang/",t="addEventListener";if("False"=="True")a.BOOMR_config=a.BOOMR_config||{},a.BOOMR_config.PageParams=a.BOOMR_config.PageParams||{},a.BOOMR_config.PageParams.pci=!0,e="https://s2.go-mpulse.net/boomerang/";if(window.BOOMR_API_key="9UX54-L57TE-34QD8-DURP5-GFD2R",function(){function n(e){a.BOOMR_onload=e&amp;&amp;e.timeStamp||(new Date).getTime()}if(!a.BOOMR||!a.BOOMR.version&amp;&amp;!a.BOOMR.snippetExecuted){a.BOOMR=a.BOOMR||{},a.BOOMR.snippetExecuted=!0;var i,_,o,r=document.createElement("iframe");if(a[t])a[t]("load",n,!1);else if(a.attachEvent)a.attachEvent("onload",n);r.src="javascript:void(0)",r.title="",r.role="presentation",(r.frameElement||r).style.cssText="width:0;height:0;border:0;display:none;",o=document.getElementsByTagName("script")[0],o.parentNode.insertBefore(r,o);try{_=r.contentWindow.document}catch(O){i=document.domain,r.src="javascript:var d=document.open();d.domain='"+i+"';void(0);",_=r.contentWindow.document}_.open()._l=function(){var a=this.createElement("script");if(i)this.domain=i;a.id="boomr-if-as",a.src=e+"9UX54-L57TE-34QD8-DURP5-GFD2R",BOOMR_lstart=(new Date).getTime(),this.body.appendChild(a)},_.write("&lt;bo"+'dy onload="document._l();"&gt;'),_.close()}}(),"".length&gt;0)if(a&amp;&amp;"performance"in a&amp;&amp;a.performance&amp;&amp;"function"==typeof a.performance.setResourceTimingBufferSize)a.performance.setResourceTimingBufferSize();!function(){if(BOOMR=a.BOOMR||{},BOOMR.plugins=BOOMR.plugins||{},!BOOMR.plugins.AK){var e=""=="true"?1:0,t="",n="vhvruz3imj2kex6iyk3q-f-634d3b8b8-clientnsv4-s.akamaihd.net",i={"ak.v":"29","ak.cp":"826731","ak.ai":parseInt("523468",10),"ak.ol":"0","ak.cr":6,"ak.ipv":4,"ak.proto":"h2","ak.rid":"47620168","ak.r":35083,"ak.a2":e,"ak.m":"dsca","ak.n":"essl","ak.bpcip":"169.235.26.0","ak.cport":35634,"ak.gh":"104.98.116.158","ak.quicv":"","ak.tlsv":"tls1.2","ak.0rtt":"","ak.csrc":"-","ak.acc":"","ak.t":"1606992567","ak.ak":"hOBiQwZUYzCg5VSAfCLimQ==rEbz/dHctmDIXcUJ3z1v5oJ0FkBaCe6/dtsWs4py5lJiDOTkOhVgCvTIw4x0R5OJCgxEfokdBDFBlEaIg8c6tysbV8YEWxFpDG7m9ytT2pc+5YlBAOk4uV4tDGo/00SIM6JwMKeNFfUU7+f1g9y3HFelQb1iRb8gF/eZls7Rz+pqS7fwPTc502jwdzuFIt4To8M5eyHnqUwJnTNYfuSsi3/LZirwRHtdiXd2Nflp1lEgZxcf4PmlVxP6mJJygY7Lnrg2UtWuU1fXre10F7zYNnzd97aOO4q7Qoyd0x2lpMgOGF3175WalVU26kArd0u4Eo8EwVbI0DhzIkWJZ3CqJaqvbUV3Tp1cINPRYc0RSWEdmjKPK1E2J+eaOZj7vDxLDSAn45qEFxwuaCDD68zKKW5HcsncddAQKbDaEUjv0oQ=","ak.pv":"68","ak.dpoabenc":""};if(""!==t)i["ak.ruds"]=t;var _={i:!1,av:function(e){var t="http.initiator";if(e&amp;&amp;(!e[t]||"spa_hard"===e[t]))i["ak.feo"]=void 0!==a.aFeoApplied?1:0,BOOMR.addVar(i)},rv:function(){var a=["ak.bpcip","ak.cport","ak.cr","ak.csrc","ak.gh","ak.ipv","ak.m","ak.n","ak.ol","ak.proto","ak.quicv","ak.tlsv","ak.0rtt","ak.r","ak.acc","ak.t"];BOOMR.removeVar(a)}};BOOMR.plugins.AK={akVars:i,akDNSPreFetchDomain:n,init:function(){if(!_.i){var a=BOOMR.subscribe;a("before_beacon",_.av,null,null),a("onbeacon",_.rv,null,null),_.i=!0}return this},is_complete:function(){return!0}}}}()}(window);</script><script async="" type="text/javascript" charset="utf-8" src="https://www.churchofjesuschrist.org/services/platform/v4/HeaderSkeleton.36363b7f.js"></script><script async="" type="text/javascript" charset="utf-8" src="https://www.churchofjesuschrist.org/services/platform/v4/Footer.d28dacb3.js"></script><meta name="viewport" content="width=device-width, initial-scale=1" /><meta content="18523396549" /><meta content="120694114630885" /><meta name="Search.Language" content="eng" /><script type="application/javascript" src="//cdn.churchofjesuschrist.org/cdn2/csp/ldsorg/abn/abn-scripts.js"></script><script type="application/javascript">window.PlatformService = { langs: [] };</script><link rel="shortcut icon" href="https://www.churchofjesuschrist.org/services/platform/v3/resources/static/image/favicon.ico" /><link rel="preconnect" href="https://edge.ldscdn.org" /><style>@import "https://www.churchofjesuschrist.org/services/platform/v4/global-header-footer.css"</style><link rel="preconnect" href="https://fonts.googleapis.com" /><link rel="stylesheet" href="https://www.churchofjesuschrist.org/services/platform/v4/vars" /><script src="//assets.adobedtm.com/05064fe6cab0/b9d37f296ace/launch-fe44d8adbb98.min.js"></script><link rel="stylesheet" as="style" href="https://foundry.churchofjesuschrist.org/Foundry/v1/Ensign:Sans:400/css" onload="this.onload = null; this.rel = 'stylesheet'" /><link rel="stylesheet" as="style" href="https://foundry.churchofjesuschrist.org/Foundry/v1/Ensign:Sans:600/css" onload="this.onload = null; this.rel = 'stylesheet'" /><meta name="Search.Language" content="eng" /><script src="https://assets.adobedtm.com/05064fe6cab0/b9d37f296ace/ae74224fd428/EXd152154083574ec19a641169e254727c-libraryCode_source.min.js" async=""></script><script src="https://assets.adobedtm.com/05064fe6cab0/b9d37f296ace/ae74224fd428/RC3c638daa6de04757b6cd9f03d2d3d36a-source.min.js" async=""></script><script src="https://edge.ldscdn.org/cdn2/csp/ldsorg/abn/at.js"></script><script src="https://assets.adobedtm.com/05064fe6cab0/b9d37f296ace/ae74224fd428/RC82518affd6c144e4a503098b3fb04af4-source.min.js" async=""></script><script src="https://edge.ldscdn.org/cdn2/csp/ldsorg/abn/visitorAPI.js"></script><script type="text/javascript" async="" charset="utf-8" id="utag_lds.ldsorg_88" src="//tags.tiqcdn.com/utag/lds/ldsorg/prod/utag.88.js?utv=ut4.42.201910151737"></script><script type="text/javascript" async="" charset="utf-8" id="utag_lds.ldsorg_3" src="//tags.tiqcdn.com/utag/lds/ldsorg/prod/utag.3.js?utv=ut4.42.201804121833"></script><script type="text/javascript" async="" charset="utf-8" id="utag_lds.ldsorg_11" src="//tags.tiqcdn.com/utag/lds/ldsorg/prod/utag.11.js?utv=ut4.42.201911210014"></script><script type="text/javascript" async="" charset="utf-8" id="utag_lds.ldsorg_26" src="//tags.tiqcdn.com/utag/lds/ldsorg/prod/utag.26.js?utv=ut4.42.201907082256"></script><script type="text/javascript" async="" charset="utf-8" id="utag_lds.ldsorg_61" src="//tags.tiqcdn.com/utag/lds/ldsorg/prod/utag.61.js?utv=ut4.42.202009111838"></script><script type="text/javascript" async="" charset="utf-8" id="utag_lds.ldsorg_62" src="//tags.tiqcdn.com/utag/lds/ldsorg/prod/utag.62.js?utv=ut4.42.201910151737"></script><script type="text/javascript" async="" charset="utf-8" id="utag_lds.ldsorg_80" src="//tags.tiqcdn.com/utag/lds/ldsorg/prod/utag.80.js?utv=ut4.42.201907261440"></script><script type="text/javascript" async="" charset="utf-8" id="utag_lds.ldsorg_82" src="//tags.tiqcdn.com/utag/lds/ldsorg/prod/utag.82.js?utv=ut4.42.201909112243"></script><script type="text/javascript" async="" charset="utf-8" id="utag_lds.ldsorg_42" src="//tags.tiqcdn.com/utag/lds/ldsorg/prod/utag.42.js?utv=ut4.42.202010121711"></script><script>
  window.abVersion = "CONTROL-V02";
  
mainTTools.loadScript("https://abn.churchofjesuschrist.org/public/ce/ab-168/control.js");
</script><script src="https://abn.churchofjesuschrist.org/public/ce/ab-168/control.js"></script><script type="text/javascript" async="" charset="utf-8" src="//www.googleadservices.com/pagead/conversion_async.js"></script><script type="text/javascript" async="" charset="utf-8" id="tiqapp" src="//tags.tiqcdn.com/utag/tiqapp/utag.v.js?a=lds/ldsorg/202011022159&amp;cb=1606992567956"></script><script src="https://www.googleadservices.com/pagead/conversion/982473683/?random=1606992568005&amp;cv=9&amp;fst=1606992568005&amp;num=1&amp;label=7lqzCLT1zXUQ07e91AM&amp;bg=ffffff&amp;hl=en&amp;guid=ON&amp;resp=GooglemKTybQhCsO&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_his=2&amp;u_tz=-480&amp;u_java=false&amp;u_nplug=0&amp;u_nmime=0&amp;sendb=1&amp;ig=1&amp;frm=0&amp;url=https%3A%2F%2Fwww.churchofjesuschrist.org%2F%3Flang%3Deng&amp;tiba=The%20Church%20of%20Jesus%20Christ%20of%20Latter-day%20Saints&amp;hn=www.googleadservices.com&amp;async=1&amp;rfmt=3&amp;fmt=4"></script></head>
<body class="pf-responsive tmpl-raptr-home-strata lang-eng"><platform-header loaded="true"><div id="skipToMainContent" style="height: 0px; visibility: hidden;">main content</div></platform-header><script type="application/javascript" src="https://www.churchofjesuschrist.org/services/platform/v4/global-header-footer.js"></script>
	<div id="platform">
					<link rel="stylesheet" type="text/css" href="//edge.ldscdn.org/cdn2/csp/ldsorg/nextgen/css/layout.css" /><script type="text/javascript">var cdnPath = "//edge.ldscdn.org/cdn2";</script><script type="text/javascript" src="//edge.ldscdn.org/cdn2/csp/ldsorg/nextgen/scripts/layout.min.js"> </script>
		<div class="pf-canvas-wrapper"><div id="platform-canvas" class="site omniture-tracking">
			<div id="platform-canvas-content" class="platform-canvas-content lang-eng" role="main">
				
<section class="hero hero__md hero__md--video">
	<div class="teaser" id="">
		<a href="https://www.comeuntochrist.org/light-the-world-2020" class="always-clickable">
			<figure class="teaser__image">
				<img src="/bc/content/ldsorg/home-strata-live/2020/1016-light-the-world-live-player-latter-day-saints.jpg" alt="The Savior" class="lazy3 lazyLoadDone" style="opacity: 1;" />
			</figure>
			<div class="teaser__content extraClass bottomed-text makeFit-enabled">
				<div class="cell"><p class="teaser__title">Serve as Jesus Christ</p><p class="teaser__text">Light The World One by One</p><p class="teaser__text"></p><p class="teaser__title">Find Ideas to Let Hope Shine Bright This Season</p></div>
				<div class="hero-extras"><span class="playButton">▶</span></div>
			</div>
		</a>
	</div>
	
	
	

	
</section>

        <section class="hero">
            <div class="hero__column">
	<div class="teaser hero__box hero__box--large">
		<a href="https://newsroom.churchofjesuschrist.org/event/2020-first-presidency-christmas-devotional">
			<figure class="teaser__image">
				<img src="/bc/content/ldsorg/home-strata-live/2020/1017-fp-christmas-devotional-lvl1_1-latter-day-saints.jpg" alt="wise men painting" />
			</figure>
			<div class="teaser__content makeFit-enabled">
				<p class="teaser__label">The First Presidency</p>
				<p class="teaser__title">Focus on Christ with First Presidency’s Christmas Devotional</p>
				<div class="teaser__text">
</div>
			</div>
		</a>
	</div>
</div>
            <div class="hero__column hero__column--right">
	<div class="teaser hero__box hero__box--small">
		<a href="https://newsroom.churchofjesuschrist.org/article/president-nelson-expresses-appreciation-for-all-who-answered-call-to-give-thanks">
			<figure class="teaser__image">
				<img src="/bc/content/ldsorg/home-strata-live/2020/476x189/1018-prophets-message-thank-you-lvl1_2-5583e5873814e2f19793e4871ce37e95b8f9582b-latter-day-saints.jpg" alt="President Nelson" class="lazy2 lazyLoadDone" style="opacity: 1;" />
			</figure>
			<div class="teaser__content makeFit-enabled">
				<p class="teaser__label">#GiveThanks</p>
				<p class="teaser__title">Give Thanks in All Things and Serve as Christ Did</p>
			</div>
		</a>
	</div><div class="teaser hero__box hero__box--small">
		<a href="https://www.churchofjesuschrist.org/broadcasts?lang=eng&amp;video=Celebrating-the-Light-of-the-World%3A-A-Christmas-on-Temple-Square-Performance&amp;mode=watch">
			<figure class="teaser__image">
				<img src="/bc/content/ldsorg/home-strata-live/2020/476x189/1019-kick-off-concert-lvl1_3-b32bd9fa50d85af69d36341c366621b2e6177565-latter-day-saints.jpg" alt="Tabernacle" class="lazy2 lazyLoadDone" style="opacity: 1;" />
			</figure>
			<div class="teaser__content makeFit-enabled">
				<p class="teaser__label">Celebrating the Light of the World</p>
				<p class="teaser__title">Join Us for a Special Concert on December 1st</p>
			</div>
		</a>
	</div>
</div>
        </section>

				<div class="stratas">
				<section class="strata strata--4up ">
        <div class="teaser teaser--vert"><a href="https://assets.ldscdn.org/7e/8c/7e8c9fe274ab5e2e7b1972c1c9239cea69be71f6/prompt_calendar.pdf"><figure class="teaser__image"><img src="/bc/content/ldsorg/home-strata-live/2020/1020-download-the-calendars-for-light-the-world-activities-L2-1-99c283d802a94df85022f19defb98c6a74dbdc5e-latter-day-saints.jpg" alt="" class="lazy lazyLoadDone" style="opacity: 1;" /></figure><div class="teaser__content"><div class="teaser__title">Calendar of Ideas to Light the World Each Day</div></div></a></div><div class="teaser teaser--vert"><a href="https://www.churchofjesuschrist.org/study/ensign/2020/12/why-we-need-jesus-christ?lang=eng"><figure class="teaser__image"><img src="/bc/content/ldsorg/home-strata-live/2020/1021-why-we-need-jesus-christ-L2-2-4729fd0e2f686bb2cf73779231e05c66f4aed283-latter-day-saints.jpg" alt="" class="lazy lazyLoadDone" style="opacity: 1;" /></figure><div class="teaser__content"><div class="teaser__title">Why We Need Jesus Christ</div></div></a></div><div class="teaser teaser--vert"><a href="#"><figure class="teaser__image"><img src="/bc/content/ldsorg/home-strata-live/2020/1-1022-liahona-receive-the-gift-L2-3-2204901-latter-day-saints.jpg" alt="" class="lazy lazyLoadDone" style="opacity: 1;" /></figure><div class="teaser__content"><div class="teaser__title">Receive the Gift this Christmas</div></div></a></div><div class="teaser teaser--vert"><a href="https://www.churchofjesuschrist.org/inspiration/always-something-to-be-grateful-for?lang=eng"><figure class="teaser__image"><img src="/bc/content/ldsorg/home-strata-live/2020/147772a46e0e250c2843c13c936243d6a39050ad.jpg" alt="" class="lazy lazyLoadDone" style="opacity: 1;" /></figure><div class="teaser__content"><div class="teaser__title">Always Something to Be Grateful For</div></div></a></div>
    </section>
    
				<section class="strata strata--linklist links ">
					<h2>Quick Links</h2>
					<div class="links__wrapper">
								<ul class="links__list">
									<li><a href="https://www.churchofjesuschrist.org/study/general-conference?lang=eng">General Conference</a></li><li><a href="https://www.churchofjesuschrist.org/study/manual/the-restoration-of-the-fulness-of-the-gospel-of-jesus-christ/a-bicentennial-proclamation-to-the-world">A Bicentennial Proclamation to the World</a></li><li><a href="https://www.churchofjesuschrist.org/temples?lang=eng">About Temples</a></li><li><a href="https://www.familysearch.org/">FamilySearch.org</a></li>
								</ul>
    
								<ul class="links__list">
									<li><a href="https://newsroom.churchofjesuschrist.org/">Newsroom</a></li><li><a href="https://newsroom.churchofjesuschrist.org/events/">Worldwide Church Events</a></li><li><a href="https://www.churchofjesuschrist.org/maps/meetinghouses/?lang=eng">Find a Meetinghouse</a></li><li><a href="https://www.churchofjesuschrist.org/topics/restoration/?lang=eng">Restoration Resources</a></li>
								</ul>
    
								<ul class="links__list">
									<li><a href="https://donations.churchofjesuschrist.org/donations/#/donation/step1">Online Donations</a></li><li><a href="https://store.churchofjesuschrist.org">Online Store</a></li><li><a href="https://www.churchofjesuschrist.org/study/manual/teaching-in-the-saviors-way/teaching-in-the-saviors-way?lang=eng">Sabbath Day Resources</a></li><li><a href="https://www.churchofjesuschrist.org/directory/?lang=eng">Stake and Ward Directory</a></li>
								</ul>
    
								<ul class="links__list">
									<li><a href="https://www.churchofjesuschrist.org/manual/come-follow-me?lang=eng"><em>Come, Follow Me</em>  Resources</a></li><li><a href="https://www.churchofjesuschrist.org/magazine?lang=eng">Church Magazines</a></li><li><a href="https://www.churchofjesuschrist.org/youth/childrenandyouth/?lang=eng">Children and Youth</a></li><li><a href="https://www.churchofjesuschrist.org/media-library?lang=eng">Gospel Media</a></li>
								</ul>
    </div>
				</section>
    
					<section class="strata strata--4up--secondary ">
						<h2 class="strata__title">More Features</h2>
						<div class="teasers">
        <div class="teaser teaser--vert"><a href="https://www.churchofjesuschrist.org/inspiration/the-story-behind-my-global-prayer-of-gratitude?lang=eng"><figure class="teaser__image"><img src="data:image/gif;base64,R0lGODlhAQABAPAAAAAAAAAAACH/C1hNUCBEYXRhWE1QRT94cGFja2V0IDE2MDZCIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkZERDQ1MzVGMkZGMTExRTFBQTE4OTE5ODk4MQAh+QQFAAAAACwAAAAAAQABAEACAkQBADs=" width="" height="" alt="" class="lazy" style="opacity: 0.01;" /></figure><div class="teaser__content"><div class="teaser__title">The Story Behind My Global Prayer of Gratitude</div></div></a></div><div class="teaser teaser--vert"><a href="https://www.thetabernaclechoir.org/music-spoken-word/current-episode-.html"><figure class="teaser__image"><img src="data:image/gif;base64,R0lGODlhAQABAPAAAAAAAAAAACH/C1hNUCBEYXRhWE1QRT94cGFja2V0IDE2MDZCIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkZERDQ1MzVGMkZGMTExRTFBQTE4OTE5ODk4MQAh+QQFAAAAACwAAAAAAQABAEACAkQBADs=" width="" height="" alt="" class="lazy" style="opacity: 0.01;" /></figure><div class="teaser__content"><div class="teaser__title">The Music and The Spoken Word-The Gift of Gratitiude</div></div></a></div><div class="teaser teaser--vert"><a href="https://newsroom.churchofjesuschrist.org/article/church-leaders-raise-hunger-awareness-virtual-walks"><figure class="teaser__image"><img src="data:image/gif;base64,R0lGODlhAQABAPAAAAAAAAAAACH/C1hNUCBEYXRhWE1QRT94cGFja2V0IDE2MDZCIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkZERDQ1MzVGMkZGMTExRTFBQTE4OTE5ODk4MQAh+QQFAAAAACwAAAAAAQABAEACAkQBADs=" width="" height="" alt="" class="lazy" style="opacity: 0.01;" /></figure><div class="teaser__content"><div class="teaser__title">Church Leaders Raise Hunger Awareness in Virtual Walks</div></div></a></div><div class="teaser teaser--vert"><a href="https://newsroom.churchofjesuschrist.org/article/first-presidency-releases-2020-christmas-message"><figure class="teaser__image"><img src="data:image/gif;base64,R0lGODlhAQABAPAAAAAAAAAAACH/C1hNUCBEYXRhWE1QRT94cGFja2V0IDE2MDZCIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkZERDQ1MzVGMkZGMTExRTFBQTE4OTE5ODk4MQAh+QQFAAAAACwAAAAAAQABAEACAkQBADs=" width="" height="" alt="" class="lazy" style="opacity: 0.01;" /></figure><div class="teaser__content"><div class="teaser__title">First Presidency Releases Christmas Message</div></div></a></div><div class="teaser teaser--vert"><a href="https://newsroom.churchofjesuschrist.org/article/become-app"><figure class="teaser__image"><img src="data:image/gif;base64,R0lGODlhAQABAPAAAAAAAAAAACH/C1hNUCBEYXRhWE1QRT94cGFja2V0IDE2MDZCIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkZERDQ1MzVGMkZGMTExRTFBQTE4OTE5ODk4MQAh+QQFAAAAACwAAAAAAQABAEACAkQBADs=" width="" height="" alt="" class="lazy" style="opacity: 0.01;" /></figure><div class="teaser__content"><div class="teaser__title">New ‘Become’ App Helps People Everywhere Grow Closer to God</div></div></a></div><div class="teaser teaser--vert"><a href="https://www.churchofjesuschrist.org/broadcasts/face-to-face/young-women-celebration"><figure class="teaser__image"><img src="data:image/gif;base64,R0lGODlhAQABAPAAAAAAAAAAACH/C1hNUCBEYXRhWE1QRT94cGFja2V0IDE2MDZCIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkZERDQ1MzVGMkZGMTExRTFBQTE4OTE5ODk4MQAh+QQFAAAAACwAAAAAAQABAEACAkQBADs=" width="" height="" alt="" class="lazy" style="opacity: 0.01;" /></figure><div class="teaser__content"><div class="teaser__title">Celebrating 150 Years of Young Women's - Watch Special Broadcast</div></div></a></div><div class="teaser teaser--vert"><a href="https://www.youtube.com/playlist?list=PLXPFet_zDHio12ZKcd5e7U7IDDrqByUqX"><figure class="teaser__image"><img src="data:image/gif;base64,R0lGODlhAQABAPAAAAAAAAAAACH/C1hNUCBEYXRhWE1QRT94cGFja2V0IDE2MDZCIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkZERDQ1MzVGMkZGMTExRTFBQTE4OTE5ODk4MQAh+QQFAAAAACwAAAAAAQABAEACAkQBADs=" width="" height="" alt="" class="lazy" style="opacity: 0.01;" /></figure><div class="teaser__content"><div class="teaser__title">Listen Here to Music that Helps to Give Thanks</div></div></a></div><div class="teaser teaser--vert"><a href="https://newsroom.churchofjesuschrist.org/article/christmas-temple-square-celebrated-virtually-2020"><figure class="teaser__image"><img src="data:image/gif;base64,R0lGODlhAQABAPAAAAAAAAAAACH/C1hNUCBEYXRhWE1QRT94cGFja2V0IDE2MDZCIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkZERDQ1MzVGMkZGMTExRTFBQTE4OTE5ODk4MQAh+QQFAAAAACwAAAAAAQABAEACAkQBADs=" width="" height="" alt="" class="lazy" style="opacity: 0.01;" /></figure><div class="teaser__content"><div class="teaser__title">Christmas on Temple Square to be Celebrated Virtually in 2020</div></div></a></div>
    </div>
					    <!-- <div class="links" data-raptr-id="strataLinks"  data-raptr-components="home/linkslist">This is where the links go...
					    </div> -->
					</section>
    </div>
			</div>
		</div></div><!-- end #platform-canvas -->
		
		<script type="text/javascript">
        var channel = "churchofjesuschrist.org:/";
        var pageName = "churchofjesuschrist.org:/";
        var locale = "eng";
    </script><!-- SiteCatalyst code --><script type="text/javascript">&lt;!--
        /* Give each page an identifying name and channel on the next lines. */
            var LDS = LDS || { };
            LDS.track = LDS.track || { };
            LDS.track.pageName = pageName;
            LDS.track.channel = channel;
            LDS.track.prop35 = locale;
            if (typeof(searchType) !== "undefined" &amp;&amp; typeof(searchResults) !== "undefined") {
                LDS.track.eVar53=searchType;
                LDS.track.eVar56=searchResults;
                LDS.track.events="event36";
            }
            try {
                LDS.track.prop3 = searchText;
            } catch (e) { }
            //--&gt;
        </script>
	</div><!-- end #platform -->
<!-- scripts -->

<script>
	LDS.platformHost = '../../prototypes/fauxjax';
	LDS.langKey = 'eng';
	LDS.country = '';
	LDS.page = 'http://lds.org';
</script>

<script src="//edge.ldscdn.org/cdn2/csp/ldsorg/home/scripts/strata.min.js" type="text/javascript" charset="utf-8"></script>				


<platform-footer></platform-footer><script>_satellite["_runScript1"](function(event, target, Promise) {
//var sample = _satellite.getVar('functional_tag');
//_satellite.logger.log(sample,"falseerrere");
if(_satellite.getVar("functional_tag") == 'false'){
  _satellite.cookie.set('sat_track', false);
  //_satellite.logger.log('if equals false');
}
else{
  _satellite.cookie.set('sat_track', true);
  //_satellite.logger.log('else equals');
}
});</script><script>_satellite["_runScript2"](function(event, target, Promise) {
/**
 * MediaSDK for JavaScript version: 3.0.0 - 2020-04-23
 * Copyright 2020 Adobe, Inc. All Rights Reserved
 * 
 * NOTICE: All information contained herein is, and remains
 * the property of Adobe and its suppliers, if any. The intellectual
 * and technical concepts contained herein are proprietary to Adobe
 * and its suppliers and are protected by all applicable intellectual
 * property laws, including trade secret and copyright laws.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from Adobe.
 *
 * More info available at https://docs.adobe.com/content/help/en/media-analytics/using/media-overview.html
 */
!function(e,t){"object"==typeof exports&amp;&amp;"undefined"!=typeof module?module.exports=t():"function"==typeof define&amp;&amp;define.amd?define(t):(e=e||self).ADB=t()}(null,(function(){"use strict";function e(t){return(e="function"==typeof Symbol&amp;&amp;"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&amp;&amp;"function"==typeof Symbol&amp;&amp;e.constructor===Symbol&amp;&amp;e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var a=0;a&lt;t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&amp;&amp;(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e,t,i){return t&amp;&amp;a(e.prototype,t),i&amp;&amp;a(e,i),e}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&amp;&amp;(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function s(e){for(var t=1;t&lt;arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function u(e,t){return!t||"object"!=typeof t&amp;&amp;"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(){var e=0;return{getUniqueId:function(){return e+=1}}}var h=Object.freeze({AdBreakStart:"adBreakStart",AdBreakComplete:"adBreakComplete",AdStart:"adStart",AdComplete:"adComplete",AdSkip:"adSkip",ChapterStart:"chapterStart",ChapterComplete:"chapterComplete",ChapterSkip:"chapterSkip",SeekStart:"seekStart",SeekComplete:"seekComplete",BufferStart:"bufferStart",BufferComplete:"bufferComplete",BitrateChange:"bitrateChange",StateStart:"stateStart",StateEnd:"stateEnd"}),f=Object.freeze({MediaResumed:"media.resumed"}),p=Object.freeze({Video:"video",Audio:"audio"}),m=Object.freeze({FullScreen:"fullScreen",ClosedCaption:"closedCaptioning",Mute:"mute",PictureInPicture:"pictureInPicture",InFocus:"inFocus"}),_=Object.freeze({Show:"a.media.show",Season:"a.media.season",Episode:"a.media.episode",AssetId:"a.media.asset",Genre:"a.media.genre",FirstAirDate:"a.media.airDate",FirstDigitalDate:"a.media.digitalDate",Rating:"a.media.rating",Originator:"a.media.originator",Network:"a.media.network",ShowType:"a.media.type",AdLoad:"a.media.adLoad",MVPD:"a.media.pass.mvpd",Authorized:"a.media.pass.auth",DayPart:"a.media.dayPart",Feed:"a.media.feed",StreamFormat:"a.media.format"}),v=Object.freeze({Artist:"a.media.artist",Album:"a.media.album",Label:"a.media.label",Author:"a.media.author",Station:"a.media.station",Publisher:"a.media.publisher"}),k=Object.freeze({Advertiser:"a.media.ad.advertiser",CampaignId:"a.media.ad.campaign",CreativeId:"a.media.ad.creative",PlacementId:"a.media.ad.placement",SiteId:"a.media.ad.site",CreativeUrl:"a.media.ad.creativeURL"}),y=Object.freeze({VOD:"vod",Live:"live",Linear:"linear",Podcast:"podcast",Audiobook:"audiobook",AOD:"aod"}),g=Object.freeze({OptOut:"optout",OptIn:"optin",OptUnknown:"optunknown"}),S=function(e){return null==e},P=Object.freeze({Log:"log",Info:"info",Warn:"warn",Error:"error"}),I=function(e){return"boolean"==typeof e},A=function(e){return"string"==typeof e},b=function(e){return A(e)&amp;&amp;e.length&gt;0};function C(){return(new Date).getTime()}function E(e,t){return setInterval(e,t)}var M=!1;function w(e){var t=e.debugLogging;I(t)&amp;&amp;(M=t)}function T(e,t,a){(M||e===P.Error)&amp;&amp;function(e,t){if(window.console){var a;switch(e){case P.Log:a=window.console.log;break;case P.Info:a=window.console.info;break;case P.Warn:a=window.console.warn;break;case P.Error:a=window.console.error}a&amp;&amp;a(t)}}(e,"MediaSDK: ["+function(){var e=new Date,t=function(e){return e&lt;10?"00"+e:e&lt;100?"0"+e:""+e}(e.getMilliseconds());return e.toTimeString()+"."+t}()+"] "+t+" "+a)}function O(e){var t=b(e)?"["+e+"]":"";return{log:function(e){!function(e,t){T(P.Log,e,t)}(t,e)},info:function(e){!function(e,t){T(P.Info,e,t)}(t,e)},warn:function(e){!function(e,t){T(P.Warn,e,t)}(t,e)},error:function(e){!function(e,t){T(P.Error,e,t)}(t,e)}}}var R=Object.freeze({AnalyticsTrackingServer:"analyticstrackingserver",AnalyticsSsl:"analyticsssl",Rsid:"rsid",Vid:"vid",Aid:"aid",Mcid:"mid",McOrgId:"orgid",AamLocHint:"aamlochint",CustomerIds:"customerids",MediaTrackingServer:"mediatrackingserver",MediaChannel:"mediachannel",MediaPlayerName:"mediaplayername",MediaAppVersion:"mediaappversion",MediaSsl:"mediassl"}),B=Object.freeze({Get:"GET",Post:"POST"}),z=Object.freeze({SessionStart:"sessionStart",SessionComplete:"sessionComplete",SessionEnd:"sessionEnd",AdBreakStart:"adBreakStart",AdBreakComplete:"adBreakComplete",AdStart:"adStart",AdComplete:"adComplete",AdSkip:"adSkip",ChapterStart:"chapterStart",ChapterComplete:"chapterComplete",ChapterSkip:"chapterSkip",Play:"play",Ping:"ping",BufferStart:"bufferStart",PauseStart:"pauseStart",BitrateChange:"bitrateChange",Error:"error",StateStart:"stateStart",StateEnd:"stateEnd"}),j=Object.freeze({Show:"media.show",Season:"media.season",Episode:"media.episode",AssetId:"media.assetId",Genre:"media.genre",FirstAirDate:"media.firstAirDate",FirstDigitalDate:"media.firstDigitalDate",Rating:"media.rating",Originator:"media.originator",Network:"media.network",ShowType:"media.showType",AdLoad:"media.adLoad",MVPD:"media.pass.mvpd",Auth:"media.pass.auth",DayPart:"media.dayPart",Feed:"media.feed",StreamFormat:"media.streamFormat",Artist:"media.artist",Album:"media.album",Label:"media.label",Author:"media.author",Station:"media.station",Publisher:"media.publisher"}),D=Object.freeze({Advertiser:"media.ad.advertiser",CampaignId:"media.ad.campaignId",CreativeId:"media.ad.creativeId",SiteId:"media.ad.siteId",CreativeUrl:"media.ad.creativeURL",PlacementId:"media.ad.placementId"}),V=Object.freeze({Id:"media.id",Name:"media.name",Length:"media.length",ContentType:"media.contentType",StreamType:"media.streamType",PlayerName:"media.playerName",Resume:"media.resume",Channel:"media.channel",Publisher:"media.publisher",SdkVersion:"media.sdkVersion"}),q=Object.freeze({AppInstallationId:"appInstallationId",AnalyticsTrackingServer:"analytics.trackingServer",AnalyticsRsid:"analytics.reportSuite",AnalyticsSsl:"analytics.enableSSL",AnalyticsVisitorId:"analytics.visitorId",AnalyticsAid:"analytics.aid",VisitorMcOrgId:"visitor.marketingCloudOrgId",VisitorMcuserId:"visitor.marketingCloudUserId",VisitorAamLocHint:"visitor.aamLocationHint",VisitorCustomerIds:"visitor.customerIDs",VisitorCustomerKeyId:"id",VisitorCustomerKeyAuthState:"authState",MediaVersion:"media.libraryVersion"}),x=Object.freeze({Channel:"media.channel"}),N=Object.freeze({PodFriendlyName:"media.ad.podFriendlyName",PodIndex:"media.ad.podIndex",PodSecond:"media.ad.podSecond"}),F=Object.freeze({Name:"media.ad.name",Id:"media.ad.id",Length:"media.ad.length",PodPosition:"media.ad.podPosition",PlayerName:"media.ad.playerName"}),L=Object.freeze({FriendlyName:"media.chapter.friendlyName",Length:"media.chapter.length",Offset:"media.chapter.offset",Index:"media.chapter.index"}),H=Object.freeze({StateName:"media.state.name"}),G=Object.freeze({Bitrate:"media.qoe.bitrate",DroppedFrames:"media.qoe.droppedFrames",Fps:"media.qoe.framesPerSecond",StartupTime:"media.qoe.timeToStart",ErrorId:"media.qoe.errorID",ErrorSource:"media.qoe.errorSource",ErrorSourcePlayer:"player",ErrorSourceExternal:"external"}),Q=Object.freeze({EventType:"eventType",Params:"params",QoE:"qoeData",CustomMetadata:"customMetadata",PlayerTime:"playerTime"}),U=Object.freeze({Playhead:"playhead",Ts:"ts"}),K=function(e){return 0===Object.keys(e).length},W=function(e){return"number"==typeof e&amp;&amp;!isNaN(e)},Z=function(e){var t=parseInt(e,10);return W(t)&amp;&amp;e===t},$=function(t){return!S(t)&amp;&amp;!Array.isArray(t)&amp;&amp;"object"===e(t)},J=function(e){return"function"==typeof e},X=function(e,t){if(!J(e))return t;try{return e()}catch(e){return t}};function Y(e){var t={};return $(e)&amp;&amp;Object.keys(e).forEach((function(a){var i=e[a],r=i.id,n=i.authState,s=void 0===n?0:n;b(r)&amp;&amp;(t[a]={id:r,authState:s})})),t}function ee(e){var t,a=arguments.length&gt;1&amp;&amp;void 0!==arguments[1]?arguments[1]:{},i=r({},Q.EventType,e.eventType);i[Q.PlayerTime]=(r(t={},U.Playhead,e.playhead),r(t,U.Ts,e.ts),t),K(e.customMetadata)||(i[Q.CustomMetadata]=e.customMetadata),K(e.qoeData)||(i[Q.QoE]=e.qoeData);var n=s({},e.params);if(e.eventType===z.SessionStart){b(a[R.AnalyticsTrackingServer])&amp;&amp;(n[q.AnalyticsTrackingServer]=a[R.AnalyticsTrackingServer]),b(a[R.Rsid])&amp;&amp;(n[q.AnalyticsRsid]=a[R.Rsid]),I(a[R.AnalyticsSsl])&amp;&amp;(n[q.AnalyticsSsl]=a[R.AnalyticsSsl]),b(a[R.Vid])&amp;&amp;(n[q.AnalyticsVisitorId]=a[R.Vid]),b(a[R.Aid])&amp;&amp;(n[q.AnalyticsAid]=a[R.Aid]),b(a[R.McOrgId])&amp;&amp;(n[q.VisitorMcOrgId]=a[R.McOrgId]),b(a[R.Mcid])&amp;&amp;(n[q.VisitorMcuserId]=a[R.Mcid]),Z(a[R.AamLocHint])&amp;&amp;(n[q.VisitorAamLocHint]=a[R.AamLocHint]);var o=Y(a[R.CustomerIds]);if($(o)&amp;&amp;!K(o)&amp;&amp;(n[q.VisitorCustomerIds]=o),!b(n[V.Channel])){var d=a[R.MediaChannel];n[V.Channel]=b(d)?d:"unknown"}var c=a[R.MediaPlayerName];n[V.PlayerName]=b(c)?c:"unknown",b(a[R.MediaAppVersion])&amp;&amp;(n[V.SdkVersion]=a[R.MediaAppVersion]),n[q.MediaVersion]="js-3.0.0"}else if(e.eventType===z.AdStart){var u=a[R.MediaPlayerName];n[F.PlayerName]=b(u)?u:"unknown"}K(n)||(i[Q.Params]=n);var l=X((function(){return JSON.stringify(i)}),"");return l}function te(e){try{var t=e.split("/");return t[4]?t[4]:""}catch(e){return""}}var ae=[R.AnalyticsTrackingServer,R.AnalyticsSsl,R.Rsid,R.Vid,R.Aid,R.Mcid,R.McOrgId,R.AamLocHint,R.CustomerIds,R.MediaChannel,R.MediaAppVersion,R.MediaPlayerName,R.MediaTrackingServer,R.MediaSsl],ie=function(){function e(a){t(this,e),this._logger=O("MediaSession("+a+")"),this._hits=[],this._ecParams=null,this._sessionId=null,this._creatingMCSession=!1,this._createSessionFailureCount=0,this._internalError=!1,this._doneQueuing=!1}return i(e,[{key:"queue",value:function(e){this._internalError||this._doneQueuing||this._hits.push(e)}},{key:"process",value:function(e){this._internalError||0!==this._hits.length&amp;&amp;e.isReady()&amp;&amp;(this._ecParams||(this._ecParams=e.resolveKeys(ae)),S(this._sessionId)?this._startMCSession():this._flushPendingHits())}},{key:"end",value:function(){this._logger.log("end"),this._doneQueuing=!0}},{key:"abort",value:function(){this._logger.log("abort"),this._doneQueuing=!0,this._hits=[]}},{key:"doneProcessing",value:function(){return this._internalError||this._doneQueuing&amp;&amp;0===this._hits.length}},{key:"_startMCSession",value:function(){var e=this;if(!this._creatingMCSession){var t=this._hits[0];if(t.eventType!==z.SessionStart)return this._logger.log("Dropping hit("+t.eventType+") as we expected sessionStart"),void this._hits.shift();var a,i=((a=this._ecParams)[R.MediaSsl]?"https":"http")+"://"+a[R.MediaTrackingServer]+"/api/v1/sessions",r=ee(t,this._ecParams);this._creatingMCSession=!0,this._sendRequest(i,B.Post,r,(function(t,a){var i,r=!1;do{if(201!==t)break;var n=a.location;if(!b(n))break;if(!(i=te(n)))break;r=!0}while(0);r?(e._logger.log("Media collection session created with session id :  "+i),e._sessionId=i,e._hits.shift()):(e._logger.log("Creating Media collection session failed"),e._createSessionFailureCount+=1,e._createSessionFailureCount&gt;=3&amp;&amp;(e._logger.log("Internal error: Creating Media collection session failed 3 times"),e._internalError=!0)),e._creatingMCSession=!1}))}}},{key:"_flushPendingHits",value:function(){var e=this;this._hits.splice(0,3).forEach((function(t){var a,i,r=(a=e._ecParams,i=e._sessionId,(a[R.MediaSsl]?"https":"http")+"://"+a[R.MediaTrackingServer]+"/api/v1/sessions/"+i+"/events"),n=ee(t,e._ecParams);e._sendRequest(r,B.Post,n,(function(){}))}))}},{key:"_sendRequest",value:function(e,t,a,i){!function(e,t,a,i){if(void 0!==window.XMLHttpRequest){var r=new window.XMLHttpRequest;if("withCredentials"in r){var n=r;return n.open(t,e,!0),n.timeout=5e3,n.onload=function(){var e=n.status&amp;&amp;parseInt(n.status,10),t=n.responseText,a=function(e){var t={};try{e.trim().split(/[\r\n]+/).forEach((function(e){var a=e.split(":",1)[0],i=e.substring(a.length+2);a.length&gt;0&amp;&amp;(t[a.toLowerCase()]=i)}))}catch(e){}return t}(n.getAllResponseHeaders());i(e,a,t)},n.onerror=function(){i(0)},void n.send(a)}i(0)}}(e,t,a,i)}}]),e}(),re=function(){function e(){t(this,e),this._logger=O("MediaProcessor"),this._isConfigured=!1,this._privacyStatus=g.OptUnknown,this._sessionIdGenerator=l(),this._sessionMap={}}return i(e,[{key:"configure",value:function(e){var t=this;this._isConfigured||(this._ecResolver=e,this._privacyStatus=this._ecResolver.getPrivacyStatus(),this._ecResolver.notifyPrivacyChange(this._onPrivacyChange.bind(this)),this._isConfigured=!0,this._processSessionTimer=E((function(){t._tick()}),500),this._logger.log("Configured with resolver"))}},{key:"startSession",value:function(){if(this._privacyStatus===g.OptOut)return this._logger.log("Privacy is opted out. Not starting a session"),-1;var t=this._sessionIdGenerator.getUniqueId();return this._sessionMap[t]=e._createMediaSession(t),t}},{key:"processHit",value:function(e,t){if(-1!==e){var a=this._sessionMap[e];S(a)||(this._logger.log("Process hit for session("+e+") =&gt; "+t),a.queue(t))}}},{key:"endSession",value:function(e){if(-1!==e){var t=this._sessionMap[e];S(t)||t.end()}}},{key:"_tick",value:function(){var e=this;Object.keys(this._sessionMap).forEach((function(t){var a=e._sessionMap[t];a.process(e._ecResolver),a.doneProcessing()&amp;&amp;(e._logger.log("Removing session "+t+" from store as it has finished processing"),delete e._sessionMap[t])}))}},{key:"_onPrivacyChange",value:function(e){var t=this;this._logger.log("Privacy switched to "+e),this._privacyStatus=e,e===g.OptOut&amp;&amp;(this._logger.log("Aborting all active sessions"),Object.keys(this._sessionMap).forEach((function(e){t._sessionMap[e].abort()})))}}],[{key:"_createMediaSession",value:function(e){return new ie(e)}}]),e}(),ne=function(){function e(a){var i=a.id,r=a.name,n=a.position,s=a.length;if(t(this,e),!b(i))throw new TypeError("id is not a valid string");if(!b(r))throw new TypeError("name is not a valid string");if(!Z(n)||n&lt;1)throw new TypeError("position should be a valid integer greater than zero");if(!W(s)||s&lt;0)throw new TypeError("length cannot be less than zero");this.id=i,this.name=r,this.position=n,this.length=s}return i(e,[{key:"equal",value:function(t){return!S(t)&amp;&amp;t instanceof e&amp;&amp;(this.id===t.id&amp;&amp;this.name===t.name&amp;&amp;this.position===t.position&amp;&amp;this.length===t.length)}},{key:"serialize",value:function(){var e;return r(e={},"ad.id",this.id),r(e,"ad.name",this.name),r(e,"ad.position",this.position),r(e,"ad.length",this.length),e}}],[{key:"deserialize",value:function(t){return $(t)?X((function(){return new e({id:t["ad.id"],name:t["ad.name"],position:t["ad.position"],length:t["ad.length"]})}),null):null}}]),e}(),se=function(){function e(a){var i=a.name,r=a.position,n=a.startTime;if(t(this,e),!b(i))throw new TypeError("name is not a valid string");if(!Z(r)||r&lt;1)throw new TypeError("position should be a valid integer greater than zero");if(!W(n)||n&lt;0)throw new TypeError("startTime cannot be less than zero");this.name=i,this.position=r,this.startTime=n}return i(e,[{key:"equal",value:function(t){return!S(t)&amp;&amp;t instanceof e&amp;&amp;(this.name===t.name&amp;&amp;this.position===t.position&amp;&amp;this.startTime===t.startTime)}},{key:"serialize",value:function(){var e;return r(e={},"adbreak.name",this.name),r(e,"adbreak.position",this.position),r(e,"adbreak.starttime",this.startTime),e}}],[{key:"deserialize",value:function(t){return $(t)?X((function(){return new e({name:t["adbreak.name"],position:t["adbreak.position"],startTime:t["adbreak.starttime"]})}),null):null}}]),e}(),oe=function(){function e(a){var i=a.name,r=a.position,n=a.startTime,s=a.length;if(t(this,e),!b(i))throw new TypeError("name is not a valid string");if(!Z(r)||r&lt;1)throw new TypeError("position should be a valid integer greater than zero");if(!W(n)||n&lt;0)throw new TypeError("startTime cannot be less than zero");if(!W(s)||s&lt;0)throw new TypeError("length cannot be less than zero");this.name=i,this.position=r,this.startTime=n,this.length=s}return i(e,[{key:"equal",value:function(t){return!S(t)&amp;&amp;t instanceof e&amp;&amp;(this.name===t.name&amp;&amp;this.position===t.position&amp;&amp;this.startTime===t.startTime&amp;&amp;this.length===t.length)}},{key:"serialize",value:function(){var e;return r(e={},"chapter.name",this.name),r(e,"chapter.position",this.position),r(e,"chapter.starttime",this.startTime),r(e,"chapter.length",this.length),e}}],[{key:"deserialize",value:function(t){return $(t)?X((function(){return new e({name:t["chapter.name"],position:t["chapter.position"],startTime:t["chapter.starttime"],length:t["chapter.length"]})}),null):null}}]),e}(),de=new RegExp("^[a-zA-Z0-9_\\.]{1,64}$"),ce=function(){function e(a){var i=a.name;if(t(this,e),!b(i))throw new TypeError("name is not a valid string");if(!de.test(i))throw new TypeError("name should match '^[a-zA-Z0-9_\\.]{1,64}$' pattern");this.name=i}return i(e,[{key:"equal",value:function(t){return!S(t)&amp;&amp;t instanceof e&amp;&amp;this.name===t.name}},{key:"serialize",value:function(){return r({},"customstate.name",this.name)}}],[{key:"deserialize",value:function(t){return $(t)?X((function(){return new e({name:t["customstate.name"]})}),null):null}}]),e}(),ue=function(){function e(a){var i=a.id,r=a.name,n=a.streamType,s=a.mediaType,o=a.length,d=a.resumed,c=a.prerollWaitTime;if(t(this,e),!b(i))throw new TypeError("id is not a valid string");if(!b(r))throw new TypeError("name is not a valid string");if(!b(n))throw new TypeError("streamType is not a valid string");if(!W(o)||o&lt;0)throw new TypeError("length cannot be less than zero");this.id=i,this.name=r,this.streamType=n,this.mediaType=s!==p.Audio?p.Video:s,this.length=o,this.resumed=!!I(d)&amp;&amp;d,this.prerollWaitTime=!Z(c)||c&lt;0?250:c}return i(e,[{key:"equal",value:function(t){return!S(t)&amp;&amp;t instanceof e&amp;&amp;(this.id===t.id&amp;&amp;this.name===t.name&amp;&amp;this.streamType===t.streamType&amp;&amp;this.mediaType===t.mediaType&amp;&amp;this.length===t.length&amp;&amp;this.resumed===t.resumed&amp;&amp;this.prerollWaitTime===t.prerollWaitTime)}},{key:"serialize",value:function(){var e;return r(e={},"media.id",this.id),r(e,"media.name",this.name),r(e,"media.streamtype",this.streamType),r(e,"media.type",this.mediaType),r(e,"media.length",this.length),r(e,"media.resumed",this.resumed),r(e,"media.prerollwaittime",this.prerollWaitTime),e}}],[{key:"deserialize",value:function(t){return $(t)?X((function(){return new e({id:t["media.id"],name:t["media.name"],streamType:t["media.streamtype"],mediaType:t["media.type"],length:t["media.length"],resumed:t["media.resumed"],prerollWaitTime:t["media.prerollwaittime"]})}),null):null}}]),e}(),le=function(){function e(a){var i=a.bitrate,r=a.droppedFrames,n=a.fps,s=a.startupTime;if(t(this,e),!W(i)||i&lt;0)throw new TypeError("bitrate must not be less than zero");if(!W(r)||r&lt;0)throw new TypeError("dropped frames must not be less than zero");if(!W(n)||n&lt;0)throw new TypeError("fps must not be less than zero");if(!W(s)||s&lt;0)throw new TypeError("startupTime must not be less than zero");this.bitrate=i,this.droppedFrames=r,this.fps=n,this.startupTime=s}return i(e,[{key:"equal",value:function(t){return!S(t)&amp;&amp;t instanceof e&amp;&amp;(this.bitrate===t.bitrate&amp;&amp;this.droppedFrames===t.droppedFrames&amp;&amp;this.fps===t.fps&amp;&amp;this.startupTime===t.startupTime)}},{key:"serialize",value:function(){var e;return r(e={},"qoe.bitrate",this.bitrate),r(e,"qoe.droppedframes",this.droppedFrames),r(e,"qoe.fps",this.fps),r(e,"qoe.startuptime",this.startupTime),e}}],[{key:"deserialize",value:function(t){return $(t)?X((function(){return new e({bitrate:t["qoe.bitrate"],droppedFrames:t["qoe.droppedframes"],fps:t["qoe.fps"],startupTime:t["qoe.startuptime"]})}),null):null}}]),e}(),he=O("Media");var fe=function(e){try{return JSON.stringify(e,null,4)}catch(e){return"[Error formatting object]"}},pe=Object.freeze({Name:"event.name",Params:"event.params",Metadata:"event.metadata",TimeStamp:"event.ts",InternalEvent:"event.internal",Playhead:"event.playhead",ErrorId:"error.id"}),me=Object.freeze(s({SessionStart:"sessionStart",SessionEnd:"sessionEnd",SessionComplete:"sessionComplete",Play:"play",Pause:"pause",Error:"error",QoEUpdate:"qoeUpdate",PlayheadUpdate:"playheadUpdate"},h)),_e=function(){function e(a,i){if(t(this,e),S(a))throw new Error("id is not valid");this.id=a,this.description=i,this.predicates=[],this.actions=[]}return i(e,[{key:"addPredicate",value:function(e,t,a){if(!J(e))throw new Error("predicate is not a function");return this.predicates.push({predicate:e,val:t,message:a}),this}},{key:"addAction",value:function(e){if(!J(e))throw new Error("action is not a function");return this.actions.push(e),this}},{key:"runPredicates",value:function(e){for(var t=0;t&lt;this.predicates.length;++t){var a=this.predicates[t];if(a.predicate(e)!==a.val)return{success:!1,message:a.message}}return{success:!0,message:""}}},{key:"runActions",value:function(e){for(var t=0;t&lt;this.actions.length;++t){if(!(0,this.actions[t])(e))return!1}return!0}}]),e}(),ve=function(){function e(a){if(t(this,e),!a)throw new Error("RuleEngine needs a logger");this.logger=a,this.rules={}}return i(e,[{key:"setEnterAction",value:function(e){if(!J(e))throw new Error("enterAction is not a function");this.enterAction=e}},{key:"setExitAction",value:function(e){if(!J(e))throw new Error("exitAction is not a function");this.exitAction=e}},{key:"addRule",value:function(e){if(!(e instanceof _e))throw new Error("rule is not valid");this.rules[e.id]=e}},{key:"processRule",value:function(e,t){var a=this.rules[e];if(!a)return{success:!1,message:"Matching rule is not found"};var i=a.runPredicates(t);do{if(!i.success){this.logger.log("RuleEngine: Predicates failed for rule "+a.description+" : "+i.message);break}if(this.enterAction&amp;&amp;!this.enterAction(a,t)){this.logger.log("RuleEngine: Enter action prevents further processing for rule "+a.description);break}if(!a.runActions(t)){this.logger.log("RuleEngine: Rule action prevents further processing for rule "+a.description);break}this.exitAction&amp;&amp;this.exitAction(a,t)}while(0);return i}}]),e}(),ke=Object.freeze({Init:0,Play:1,Pause:2,Buffer:3,Seek:4,Stall:5}),ye=function(){function e(a,i){t(this,e),this._mediaInfo=a,this._mediaMetadata=i,this._adBreakInfo=null,this._adInfo=null,this._adMetadata=null,this._chapterInfo=null,this._chapterMetadata=null,this._qoeInfo=null,this._playhead=0,this._playstate=ke.Init,this._buffering=!1,this._seeking=!1,this._customStates=new Map}return i(e,[{key:"setAdBreakInfo",value:function(e){this._adBreakInfo=e}},{key:"clearAdBreakInfo",value:function(){this._adBreakInfo=null}},{key:"setAdInfo",value:function(e,t){this._adInfo=e,this._adMetadata=t}},{key:"clearAdInfo",value:function(){this._adInfo=null,this._adMetadata=null}},{key:"setChapterInfo",value:function(e,t){this._chapterInfo=e,this._chapterMetadata=t}},{key:"clearChapterInfo",value:function(){this._chapterInfo=null,this._chapterMetadata=null}},{key:"enterPlaybackState",value:function(e){switch(e){case ke.Play:case ke.Pause:case ke.Stall:this._playstate=e;break;case ke.Buffer:this._buffering=!0;break;case ke.Seek:this._seeking=!0}}},{key:"exitPlaybackState",value:function(e){switch(e){case ke.Buffer:this._buffering=!1;break;case ke.Seek:this._seeking=!1}}},{key:"isInPlaybackState",value:function(e){var t=!1;switch(e){case ke.Init:case ke.Play:case ke.Pause:case ke.Stall:t=this._playstate===e;break;case ke.Buffer:t=this._buffering;break;case ke.Seek:t=this._seeking}return t}},{key:"isIdle",value:function(){return!this.isInPlaybackState(ke.Play)||this.isInPlaybackState(ke.Seek)||this.isInPlaybackState(ke.Buffer)}},{key:"startCustomState",value:function(e){this._customStates.set(e.name,e)}},{key:"endCustomState",value:function(e){this._customStates.set(e.name,null)}},{key:"isCustomStateActive",value:function(e){return!!this._customStates.get(e.name)}},{key:"getActiveCustomStates",value:function(){var e=[];return this._customStates.forEach((function(t){t&amp;&amp;e.push(t)})),e}},{key:"hasTrackedCustomState",value:function(e){return this._customStates.has(e.name)}},{key:"numTrackedCustomStates",value:function(){return this._customStates.size}},{key:"mediaInfo",get:function(){return this._mediaInfo}},{key:"mediaMetadata",get:function(){return this._mediaMetadata}},{key:"isInAdBreak",get:function(){return!!this._adBreakInfo}},{key:"adBreakInfo",get:function(){return this._adBreakInfo}},{key:"isInAd",get:function(){return!!this._adInfo}},{key:"adInfo",get:function(){return this._adInfo}},{key:"adMetadata",get:function(){return this._adMetadata}},{key:"isInChapter",get:function(){return!!this._chapterInfo}},{key:"chapterInfo",get:function(){return this._chapterInfo}},{key:"chapterMetadata",get:function(){return this._chapterMetadata}},{key:"qoeInfo",get:function(){return this._qoeInfo},set:function(e){this._qoeInfo=e}},{key:"playhead",get:function(){return this._playhead},set:function(e){this._playhead=e}}]),e}(),ge=function(){function e(a){var i=a.eventType,r=a.params,n=a.customMetadata,s=a.qoeData,o=a.playhead,d=a.ts;if(t(this,e),!A(i))throw new Error("eventType should be a valid string");if(!W(o))throw new Error("playhead should be a valid number");if(!Z(d)||d&lt;0)throw new Error("ts should be a valid positive integer");this.eventType=i,this.params=$(r)?r:{},this.customMetadata=$(n)?n:{},this.qoeData=$(s)?s:{},this.playhead=o,this.ts=d}return i(e,[{key:"toString",value:function(){return fe(this)}}]),e}(),Se=function(){function e(a,i,r,n,s){t(this,e),this._logger=a,this._hitProcessor=i,this._config=r,this._media=n,this._refTs=s,this._previousState=ke.Init,this._previousStateTs=s,this._interval=1e4,this._lastQoeInfo=null,this._startSession()}return i(e,[{key:"setRefTS",value:function(e){this._refTs=e}},{key:"processMediaStart",value:function(){this._processMediaStart(!1)}},{key:"processMediaComplete",value:function(){this._generateHit(z.SessionComplete),this._endSession()}},{key:"processMediaSkip",value:function(){this._generateHit(z.SessionEnd),this._endSession()}},{key:"processAdBreakStart",value:function(){var t=e._extractAdBreakParams(this._media);this._generateHit(z.AdBreakStart,t,{})}},{key:"processAdBreakComplete",value:function(){this._generateHit(z.AdBreakComplete)}},{key:"processAdBreakSkip",value:function(){this._generateHit(z.AdBreakComplete)}},{key:"processAdStart",value:function(){this._interval=1e3;var t=e._extractAdParams(this._media),a=e._extractAdMetadata(this._media);this._generateHit(z.AdStart,t,a)}},{key:"processAdComplete",value:function(){this._interval=1e4,this._generateHit(z.AdComplete)}},{key:"processAdSkip",value:function(){this._interval=1e4,this._generateHit(z.AdSkip)}},{key:"processChapterStart",value:function(){var t=e._extractChapterParams(this._media),a=e._extractChapterMetadata(this._media);this._generateHit(z.ChapterStart,t,a)}},{key:"processChapterComplete",value:function(){this._generateHit(z.ChapterComplete)}},{key:"processChapterSkip",value:function(){this._generateHit(z.ChapterSkip)}},{key:"processCustomStateStart",value:function(e){var t={};t[H.StateName]=e.name,this._generateHit(z.StateStart,t,{},{})}},{key:"processCustomStateEnd",value:function(e){var t={};t[H.StateName]=e.name,this._generateHit(z.StateEnd,t,{},{})}},{key:"processIdleStart",value:function(){this.processMediaSkip()}},{key:"processIdleComplete",value:function(){this._previousState=ke.Init,this._previousStateTs=this._refTs,this._lastQoeInfo=null,this._startSession(),this.processMediaStart(!0),this._media.isInChapter&amp;&amp;this.processChapterStart(),this._media.isInAdBreak&amp;&amp;this.processAdBreakStart(),this._media.isInAd&amp;&amp;this.processAdStart();var e,t=this._media.getActiveCustomStates();for(e=0;e&lt;t.length;e++)this.processCustomStateStart(t[e]);this.processPlayback(!0)}},{key:"processBitrateChange",value:function(){var t=e._extractQoeData(this._media);this._generateHit(z.BitrateChange,{},{},t)}},{key:"processError",value:function(t){var a=e._extractQoeData(this._media);a[G.ErrorId]=t,a[G.ErrorSource]=G.ErrorSourcePlayer,this._generateHit(z.Error,{},{},a)}},{key:"processPlayback",value:function(t){if(this._isTracking){var a=this._getPlaybackState();if(this._previousState!==a||t){var i=e._playbackStateToMediaCollectionEvent(a);this._generateHit(i),this._previousState=a,this._previousStateTs=this._refTs}else a===this._previousState&amp;&amp;this._refTs-this._previousStateTs&gt;=this._interval&amp;&amp;(this._generateHit(z.Ping),this._previousStateTs=this._refTs)}}},{key:"_processMediaStart",value:function(t){var a={};a=e._extractMediaParams(this._media),t&amp;&amp;(a[V.Resume]=!0);var i=this._config[x.Channel];b(i)&amp;&amp;(a[x.Channel]=i);var r=e._extractMediaMetadata(this._media);this._generateHit(z.SessionStart,a,r)}},{key:"_generateHit",value:function(t){var a=arguments.length&gt;1&amp;&amp;void 0!==arguments[1]?arguments[1]:{},i=arguments.length&gt;2&amp;&amp;void 0!==arguments[2]?arguments[2]:{},r=arguments.length&gt;3&amp;&amp;void 0!==arguments[3]?arguments[3]:null,n=r;if(S(n)){var s=this._media.qoeInfo,o=!(S(s)||!S(this._lastQoeInfo)&amp;&amp;this._lastQoeInfo.equal(s));o&amp;&amp;(n=e._extractQoeData(this._media),this._lastQoeInfo=s)}if(this._isTracking){var d=this._media.playhead,c=this._refTs,u=new ge({eventType:t,params:a,customMetadata:i,qoeData:n,playhead:d,ts:c});this._hitProcessor.processHit(this._sessionId,u)}else this._logger.log("#_generateHit - Dropping hit as we have internally stopped tracking the session")}},{key:"_getPlaybackState",value:function(){return this._media.isInPlaybackState(ke.Buffer)?ke.Buffer:this._media.isInPlaybackState(ke.Seek)?ke.Seek:this._media.isInPlaybackState(ke.Play)?ke.Play:this._media.isInPlaybackState(ke.Pause)?ke.Pause:this._media.isInPlaybackState(ke.Stall)?ke.Stall:ke.Init}},{key:"_startSession",value:function(){this._sessionId=this._hitProcessor.startSession(),this._isTracking=!0,this._logger.log("Start internal session("+this._sessionId+")")}},{key:"_endSession",value:function(){this._hitProcessor.endSession(this._sessionId),this._isTracking=!1,this._logger.log("End internal session("+this._sessionId+")")}}],[{key:"_extractMediaParams",value:function(t){var a={},i=t.mediaInfo;S(i)||(a[V.Id]=i.id,a[V.Name]=i.name,a[V.Length]=i.length,a[V.ContentType]=i.streamType,a[V.StreamType]=i.mediaType,a[V.Resume]=i.resumed);var r=t.mediaMetadata;return $(r)&amp;&amp;Object.keys(r).forEach((function(t){if(e._standardMediaMetadataMap.has(t)){var i=e._standardMediaMetadataMap.get(t);a[i]=r[t]}})),a}},{key:"_extractMediaMetadata",value:function(t){var a={},i=t.mediaMetadata;return $(i)&amp;&amp;Object.keys(i).forEach((function(t){e._standardMediaMetadataMap.has(t)||(a[t]=i[t])})),a}},{key:"_extractAdBreakParams",value:function(e){var t={},a=e.adBreakInfo;return S(a)||(t[N.PodFriendlyName]=a.name,t[N.PodIndex]=a.position,t[N.PodSecond]=a.startTime),t}},{key:"_extractAdParams",value:function(t){var a={},i=t.adInfo;S(i)||(a[F.Name]=i.name,a[F.Id]=i.id,a[F.Length]=i.length,a[F.PodPosition]=i.position);var r=t.adMetadata;return $(r)&amp;&amp;Object.keys(r).forEach((function(t){if(e._standardAdMetadataMap.has(t)){var i=e._standardAdMetadataMap.get(t);a[i]=r[t]}})),a}},{key:"_extractAdMetadata",value:function(t){var a={},i=t.adMetadata;return $(i)&amp;&amp;Object.keys(i).forEach((function(t){e._standardAdMetadataMap.has(t)||(a[t]=i[t])})),a}},{key:"_extractChapterParams",value:function(e){var t={},a=e.chapterInfo;return S(a)||(t[L.FriendlyName]=a.name,t[L.Index]=a.position,t[L.Length]=a.length,t[L.Offset]=a.startTime),t}},{key:"_extractChapterMetadata",value:function(e){var t={},a=e.chapterMetadata;return $(a)&amp;&amp;Object.keys(a).forEach((function(e){t[e]=a[e]})),t}},{key:"_extractQoeData",value:function(e){var t={},a=e.qoeInfo;return $(a)&amp;&amp;(t[G.Bitrate]=parseInt(a.bitrate,10),t[G.Fps]=parseInt(a.fps,10),t[G.DroppedFrames]=parseInt(a.droppedFrames,10),t[G.StartupTime]=parseInt(a.startupTime,10)),t}},{key:"_playbackStateToMediaCollectionEvent",value:function(e){switch(e){case ke.Buffer:return z.BufferStart;case ke.Seek:return z.PauseStart;case ke.Play:return z.Play;case ke.Pause:return z.PauseStart;case ke.Stall:return z.Play;case ke.Init:return z.Ping;default:return""}}}]),e}(),Pe=new Map;Pe.set(_.Show,j.Show),Pe.set(_.Season,j.Season),Pe.set(_.Episode,j.Episode),Pe.set(_.AssetId,j.AssetId),Pe.set(_.Genre,j.Genre),Pe.set(_.FirstAirDate,j.FirstAirDate),Pe.set(_.FirstDigitalDate,j.FirstDigitalDate),Pe.set(_.Rating,j.Rating),Pe.set(_.Originator,j.Originator),Pe.set(_.Network,j.Network),Pe.set(_.ShowType,j.ShowType),Pe.set(_.AdLoad,j.AdLoad),Pe.set(_.MVPD,j.MVPD),Pe.set(_.Authorized,j.Auth),Pe.set(_.DayPart,j.DayPart),Pe.set(_.Feed,j.Feed),Pe.set(_.StreamFormat,j.StreamFormat),Pe.set(v.Artist,j.Artist),Pe.set(v.Album,j.Album),Pe.set(v.Label,j.Label),Pe.set(v.Author,j.Author),Pe.set(v.Station,j.Station),Pe.set(v.Publisher,j.Publisher),Se._standardMediaMetadataMap=Pe;var Ie=new Map;Ie.set(k.Advertiser,D.Advertiser),Ie.set(k.CampaignId,D.CampaignId),Ie.set(k.CreativeId,D.CreativeId),Ie.set(k.PlacementId,D.PlacementId),Ie.set(k.SiteId,D.SiteId),Ie.set(k.CreativeUrl,D.CreativeUrl),Se._standardAdMetadataMap=Ie;var Ae="Media tracker is not in active tracking session, call 'API:trackSessionStart' to begin a new tracking session.",be="Media tracker is in active tracking session, call 'API:trackSessionEnd' or 'API:trackComplete' to end current tracking session.",Ce="Media tracker is tracking buffer events, call 'API:trackEvent(BufferComplete)' first to stop tracking buffer events.",Ee="Media tracker is not tracking buffer events, call 'API:trackEvent(BufferStart)' before 'API:trackEvent(BufferComplete)'.",Me="Media tracker is tracking seek events, call 'API:trackEvent(SeekComplete)' first to stop tracking seek events.",we="Media tracker is not tracking seek events, call 'API:trackEvent(SeekStart)' before 'API:trackEvent(SeekComplete)'.",Te="Media tracker is not tracking any AdBreak, call 'API:trackEvent(AdBreakStart)' to begin tracking AdBreak",Oe="Media tracker is not tracking any Ad, call 'API:trackEvent(AdStart)' to begin tracking Ad",Re="Media tracker is not tracking any Chapter, call 'API:trackEvent(ChapterStart)' to begin tracking Chapter",Be="MediaInfo passed into 'API:trackSessionStart' is invalid.",ze="AdBreakInfo passed into 'API:trackEvent(AdBreakStart)' is invalid.",je="Media tracker is currently tracking the AdBreak passed into 'API:trackEvent(AdBreakStart)'.",De="AdInfo passed into 'API:trackEvent(AdStart)' is invalid.",Ve="StateInfo passed into 'API:trackEvent(StateStart|StateEnd)' is invalid.",qe="ErrorId passed into 'API:trackError()' is invalid.",xe="Media tracker is currently tracking the Ad passed into 'API:trackEvent(AdStart)'.",Ne="ChapterInfo passed into 'API:trackEvent(ChapterStart)' is invalid.",Fe="Media tracker is currently tracking the Chapter passed into 'API:trackEvent(ChapterStart)'.",Le="QoEInfo passed into 'API:updateQoEInfo' is invalid.",He="Media tracker is tracking an AdBreak but not tracking any Ad and will drop any calls to track player state (Play, Pause, Buffer or Seek) in this state.",Ge="Media tracker is already tracking a state with the same state name.",Qe="Media tracker is not already tracking a state with the same state name.",Ue="Media tracker has reached maximum number of states per session (10).",Ke=new RegExp("^[a-zA-Z0-9_\\.]+$"),We=function(){function e(a,i,r){if(t(this,e),!a)throw new Error("hitProcessor should be valid");if(!i)throw new Error("logger should be valid");this._hitProcessor=a,this._logger=i,this._config=$(r)?r:{},this._resetStates(),this._setupRules()}return i(e,[{key:"track",value:function(t){var a=t[pe.Name];return b(a)?Z(t[pe.TimeStamp])?($(t[pe.Params])||(t[pe.Params]={}),t[pe.Metadata]=e._cleanMetadata(t[pe.Metadata]),!!this._prerollDeferRule(a,t)||this._processRule(a,t)):(this._logger.log("#track - Event timestamp is missing in track event data. - "+a),!1):(this._logger.log("#track - Event name is missing in track event data"),!1)}},{key:"_resetStates",value:function(){this._media=null,this._hitGenerator=null,this._inPrerollInterval=!1,this._prerollRefTs=null,this._prerollQueuedRules=[],this._contentStarted=!1,this._contentStartRefTs=-1,this._mediaIdle=!1,this._trackerIdle=!1,this._mediaIdleStartTs=0}},{key:"_createHitGenerator",value:function(e){return new Se(this._logger,this._hitProcessor,this._config,this._media,e)}},{key:"_processRule",value:function(e,t){return this._ruleEngine.processRule(e,t).success}},{key:"_setupRules",value:function(){this._ruleEngine=new ve(this._logger),this._ruleEngine.setEnterAction(this._cmdEnterAction.bind(this)),this._ruleEngine.setExitAction(this._cmdExitAction.bind(this));var e=this._isInMedia.bind(this),t=this._isInAdBreak.bind(this),a=this._isInAd.bind(this),i=this._isInChapter.bind(this),r=this._isInTrackedState.bind(this),n=this._isValidMediaInfo.bind(this),s=this._isValidAdBreakInfo.bind(this),o=this._isValidAdInfo.bind(this),d=this._isValidChapterInfo.bind(this),c=this._isValidQoEInfo.bind(this),u=this._isValidStateInfo.bind(this),l=this._isValidErrorInfo.bind(this),h=this._isDifferentAdBreakInfo.bind(this),f=this._isDifferentAdInfo.bind(this),p=this._isDifferentChapterInfo.bind(this),m=this._allowPlayerStateChange.bind(this),_=this._allowStateTrack.bind(this),v=this._isInBuffering.bind(this),k=this._isInSeeking.bind(this),y=this._cmdMediaStart.bind(this),g=this._cmdMediaSkip.bind(this),S=this._cmdMediaComplete.bind(this),P=this._cmdError.bind(this),I=this._cmdPlay.bind(this),A=this._cmdPause.bind(this),b=this._cmdBufferStart.bind(this),C=this._cmdBufferComplete.bind(this),E=this._cmdSeekStart.bind(this),M=this._cmdSeekComplete.bind(this),w=this._cmdAdStart.bind(this),T=this._cmdAdComplete.bind(this),O=this._cmdAdSkip.bind(this),R=this._cmdAdBreakStart.bind(this),B=this._cmdAdBreakComplete.bind(this),z=this._cmdAdBreakSkip.bind(this),j=this._cmdChapterStart.bind(this),D=this._cmdChapterComplete.bind(this),V=this._cmdChapterSkip.bind(this),q=this._cmdStateStart.bind(this),x=this._cmdStateEnd.bind(this),N=this._cmdBitrateChange.bind(this),F=this._cmdQoEUpdate.bind(this),L=this._cmdPlayheadUpdate.bind(this),H=new _e(me.SessionStart,"API:trackSessionStart");H.addPredicate(e,!1,be).addPredicate(n,!0,Be).addAction(y),this._ruleEngine.addRule(H);var G=new _e(me.SessionComplete,"API:trackComplete");G.addPredicate(e,!0,Ae).addAction(O).addAction(z).addAction(V).addAction(S),this._ruleEngine.addRule(G);var Q=new _e(me.SessionEnd,"API:trackSessionEnd");Q.addPredicate(e,!0,Ae).addAction(O).addAction(z).addAction(V).addAction(g),this._ruleEngine.addRule(Q);var U=new _e(me.Error,"API:trackError");U.addPredicate(e,!0,Ae).addPredicate(l,!0,qe).addAction(P),this._ruleEngine.addRule(U);var K=new _e(me.Play,"API:trackPlay");K.addPredicate(e,!0,Ae).addPredicate(m,!0,He).addAction(M).addAction(C).addAction(I),this._ruleEngine.addRule(K);var W=new _e(me.Pause,"API:trackPause");W.addPredicate(e,!0,Ae).addPredicate(m,!0,He).addPredicate(v,!1,Ce).addPredicate(k,!1,Me).addAction(A),this._ruleEngine.addRule(W);var Z=new _e(me.BufferStart,"API:trackEvent(BufferStart)");Z.addPredicate(e,!0,Ae).addPredicate(m,!0,He).addPredicate(v,!1,Ce).addPredicate(k,!1,Me).addAction(b),this._ruleEngine.addRule(Z);var $=new _e(me.BufferComplete,"API:trackEvent(BufferComplete)");$.addPredicate(e,!0,Ae).addPredicate(m,!0,He).addPredicate(v,!0,Ee).addAction(C),this._ruleEngine.addRule($);var J=new _e(me.SeekStart,"API:trackEvent(SeekStart)");J.addPredicate(e,!0,Ae).addPredicate(m,!0,He).addPredicate(k,!1,Me).addPredicate(v,!1,Ce).addAction(E),this._ruleEngine.addRule(J);var X=new _e(me.SeekComplete,"API:trackEvent(SeekComplete)");X.addPredicate(e,!0,Ae).addPredicate(m,!0,He).addPredicate(k,!0,we).addAction(M),this._ruleEngine.addRule(X);var Y=new _e(me.AdBreakStart,"API:trackEvent(AdBreakStart)");Y.addPredicate(e,!0,Ae).addPredicate(s,!0,ze).addPredicate(h,!0,je).addAction(O).addAction(z).addAction(R),this._ruleEngine.addRule(Y);var ee=new _e(me.AdBreakComplete,"API:trackEvent(AdBreakComplete)");ee.addPredicate(e,!0,Ae).addPredicate(t,!0,Te).addAction(O).addAction(B),this._ruleEngine.addRule(ee);var te=new _e(me.AdStart,"API:trackEvent(AdStart)");te.addPredicate(e,!0,Ae).addPredicate(t,!0,Te).addPredicate(o,!0,De).addPredicate(f,!0,xe).addAction(O).addAction(w),this._ruleEngine.addRule(te);var ae=new _e(me.AdComplete,"API:trackEvent(AdComplete)");ae.addPredicate(e,!0,Ae).addPredicate(t,!0,Te).addPredicate(a,!0,Oe).addAction(T),this._ruleEngine.addRule(ae);var ie=new _e(me.AdSkip,"API:trackEvent(AdSkip)");ie.addPredicate(e,!0,Ae).addPredicate(t,!0,Te).addPredicate(a,!0,Oe).addAction(O),this._ruleEngine.addRule(ie);var re=new _e(me.ChapterStart,"API::trackEvent(chapterStart)");re.addPredicate(e,!0,Ae).addPredicate(d,!0,Ne).addPredicate(p,!0,Fe).addAction(V).addAction(j),this._ruleEngine.addRule(re);var ne=new _e(me.ChapterComplete,"API::trackEvent(chapterComplete)");ne.addPredicate(e,!0,Ae).addPredicate(i,!0,Re).addAction(D),this._ruleEngine.addRule(ne);var se=new _e(me.ChapterSkip,"API:trackEvent(chapterSkip)");se.addPredicate(e,!0,Ae).addPredicate(i,!0,Re).addAction(V),this._ruleEngine.addRule(se);var oe=new _e(me.BitrateChange,"API:trackEvent(BitrateChange)");oe.addPredicate(e,!0,Ae).addAction(N),this._ruleEngine.addRule(oe);var de=new _e(me.QoEUpdate,"API:trackEvent(QoEUpdate)");de.addPredicate(e,!0,Ae).addPredicate(c,!0,Le).addAction(F),this._ruleEngine.addRule(de);var ce=new _e(me.PlayheadUpdate,"API:trackEvent(PlayheadUpdate)");ce.addPredicate(e,!0,Ae).addAction(L),this._ruleEngine.addRule(ce);var ue=new _e(me.StateStart,"API:trackEvent(StateStart)");ue.addPredicate(e,!0,Ae).addPredicate(u,!0,Ve).addPredicate(r,!1,Ge).addPredicate(_,!0,Ue).addAction(q),this._ruleEngine.addRule(ue);var le=new _e(me.StateEnd,"API:trackEvent(StateEnd)");le.addPredicate(e,!0,Ae).addPredicate(u,!0,Ve).addPredicate(r,!0,Qe).addAction(x),this._ruleEngine.addRule(le)}},{key:"_isInMedia",value:function(){return!S(this._media)}},{key:"_isInAdBreak",value:function(){return this._media.isInAdBreak}},{key:"_isInAd",value:function(){return this._media.isInAd}},{key:"_isInChapter",value:function(){return this._media.isInChapter}},{key:"_isInBuffering",value:function(){return this._media.isInPlaybackState(ke.Buffer)}},{key:"_isInSeeking",value:function(){return this._media.isInPlaybackState(ke.Seek)}},{key:"_isInTrackedState",value:function(e){var t=ce.deserialize(e[pe.Params]);return this._media.isCustomStateActive(t)}},{key:"_isValidMediaInfo",value:function(e){return null!=ue.deserialize(e[pe.Params])}},{key:"_isValidAdBreakInfo",value:function(e){return null!=se.deserialize(e[pe.Params])}},{key:"_isValidAdInfo",value:function(e){return null!=ne.deserialize(e[pe.Params])}},{key:"_isValidStateInfo",value:function(e){return null!=ce.deserialize(e[pe.Params])}},{key:"_isValidChapterInfo",value:function(e){return null!=oe.deserialize(e[pe.Params])}},{key:"_isValidQoEInfo",value:function(e){return null!=le.deserialize(e[pe.Params])}},{key:"_isValidErrorInfo",value:function(e){var t=e[pe.Params];if(!$(t))return!1;var a=t[pe.ErrorId];return b(a)}},{key:"_isDifferentAdBreakInfo",value:function(e){return!se.deserialize(e[pe.Params]).equal(this._media.adBreakInfo)}},{key:"_isDifferentAdInfo",value:function(e){return!ne.deserialize(e[pe.Params]).equal(this._media.adInfo)}},{key:"_isDifferentChapterInfo",value:function(e){return!oe.deserialize(e[pe.Params]).equal(this._media.chapterInfo)}},{key:"_allowPlayerStateChange",value:function(){return!this._media.isInAdBreak||this._media.isInAd}},{key:"_allowStateTrack",value:function(e){var t=ce.deserialize(e[pe.Params]);return this._media.hasTrackedCustomState(t)||this._media.numTrackedCustomStates()&lt;10}},{key:"_cmdEnterAction",value:function(e,t){var a=this._getRefTs(t);return S(this._hitGenerator)||this._hitGenerator.setRefTS(a),!0}},{key:"_cmdExitAction",value:function(e,t){if(S(this._media))return!1;e.id===me.AdStart&amp;&amp;(!this._media.isInPlaybackState(ke.Init)||this._media.isInPlaybackState(ke.Buffer)||this._media.isInPlaybackState(ke.Seek)||this._media.enterPlaybackState(ke.Play)),e.id!==me.BufferComplete&amp;&amp;e.id!==me.SeekComplete||this._media.isInPlaybackState(ke.Init)&amp;&amp;this._media.enterPlaybackState(ke.Pause),this._cmdIdleDetection(t),this._cmdContentStartDetection(t);var a=e.id===me.AdStart||e.id===me.AdBreakComplete;return this._hitGenerator.processPlayback(a),!0}},{key:"_cmdMediaStart",value:function(e){var t=ue.deserialize(e[pe.Params]),a=e[pe.Metadata],i=this._getRefTs(e);return this._media=new ye(t,a),this._hitGenerator=this._createHitGenerator(i),this._hitGenerator.processMediaStart(),this._inPrerollInterval=0!==t.prerollWaitTime,this._prerollRefTs=i,!0}},{key:"_cmdMediaComplete",value:function(){return this._hitGenerator.processMediaComplete(),this._resetStates(),!0}},{key:"_cmdMediaSkip",value:function(){return this._hitGenerator.processMediaSkip(),this._resetStates(),!0}},{key:"_cmdAdBreakStart",value:function(e){var t=se.deserialize(e[pe.Params]);return this._media.setAdBreakInfo(t),this._hitGenerator.processAdBreakStart(),!0}},{key:"_cmdAdBreakComplete",value:function(){return this._hitGenerator.processAdBreakComplete(),this._media.clearAdBreakInfo(),!0}},{key:"_cmdAdBreakSkip",value:function(){return this._media.isInAdBreak&amp;&amp;(this._hitGenerator.processAdBreakSkip(),this._media.clearAdBreakInfo()),!0}},{key:"_cmdAdStart",value:function(e){var t=ne.deserialize(e[pe.Params]),a=e[pe.Metadata];return this._media.setAdInfo(t,a),this._hitGenerator.processAdStart(),!0}},{key:"_cmdAdComplete",value:function(){return this._hitGenerator.processAdComplete(),this._media.clearAdInfo(),!0}},{key:"_cmdAdSkip",value:function(){return this._media.isInAd&amp;&amp;(this._hitGenerator.processAdSkip(),this._media.clearAdInfo()),!0}},{key:"_cmdChapterStart",value:function(e){var t=oe.deserialize(e[pe.Params]),a=e[pe.Metadata];return this._media.setChapterInfo(t,a),this._hitGenerator.processChapterStart(),!0}},{key:"_cmdChapterComplete",value:function(){return this._hitGenerator.processChapterComplete(),this._media.clearChapterInfo(),!0}},{key:"_cmdChapterSkip",value:function(){return this._media.isInChapter&amp;&amp;(this._hitGenerator.processChapterSkip(),this._media.clearChapterInfo()),!0}},{key:"_cmdError",value:function(e){var t=e[pe.Params][pe.ErrorId];return this._hitGenerator.processError(t),!0}},{key:"_cmdBitrateChange",value:function(){return this._hitGenerator.processBitrateChange(),!0}},{key:"_cmdPlay",value:function(){return this._media.enterPlaybackState(ke.Play),!0}},{key:"_cmdPause",value:function(){return this._media.enterPlaybackState(ke.Pause),!0}},{key:"_cmdBufferStart",value:function(){return this._media.enterPlaybackState(ke.Buffer),!0}},{key:"_cmdBufferComplete",value:function(){return this._media.isInPlaybackState(ke.Buffer)&amp;&amp;this._media.exitPlaybackState(ke.Buffer),!0}},{key:"_cmdSeekStart",value:function(){return this._media.enterPlaybackState(ke.Seek),!0}},{key:"_cmdSeekComplete",value:function(){return this._media.isInPlaybackState(ke.Seek)&amp;&amp;this._media.exitPlaybackState(ke.Seek),!0}},{key:"_cmdQoEUpdate",value:function(e){var t=le.deserialize(e[pe.Params]);return this._media.qoeInfo=t,!0}},{key:"_cmdPlayheadUpdate",value:function(e){var t=e[pe.Params];if($(t)){var a=t[pe.Playhead];W(a)&amp;&amp;a&gt;=0&amp;&amp;(this._media.playhead=a)}return!0}},{key:"_cmdIdleDetection",value:function(e){if(this._media.isIdle()){var t=this._getRefTs(e);this._mediaIdle?!this._trackerIdle&amp;&amp;t-this._mediaIdleStartTs&gt;18e5&amp;&amp;(this._hitGenerator.processIdleStart(),this._trackerIdle=!0):(this._mediaIdle=!0,this._mediaIdleStartTs=t)}else this._trackerIdle&amp;&amp;(this._hitGenerator.processIdleComplete(),this._trackerIdle=!1,this._contentStarted=!1,this._contentStartRefTs=-1),this._mediaIdle=!1}},{key:"_cmdContentStartDetection",value:function(e){return!(!this._media.isIdle()&amp;&amp;!this._contentStarted)||(this._media.isInAdBreak?(this._contentStartRefTs=-1,!0):(-1===this._contentStartRefTs&amp;&amp;(this._contentStartRefTs=this._getRefTs(e)),this._getRefTs(e)-this._contentStartRefTs&gt;=1e3&amp;&amp;(this._hitGenerator.processPlayback(!0),this._contentStarted=!0),!0))}},{key:"_cmdStateStart",value:function(e){var t=ce.deserialize(e[pe.Params]);return this._media.startCustomState(t),this._hitGenerator.processCustomStateStart(t),!0}},{key:"_cmdStateEnd",value:function(e){var t=ce.deserialize(e[pe.Params]);return this._media.endCustomState(t),this._hitGenerator.processCustomStateEnd(t),!0}},{key:"_getRefTs",value:function(e){var t=e[pe.TimeStamp];return Z(t)?t:null}},{key:"_prerollDeferRule",value:function(e,t){if(this._inPrerollInterval&amp;&amp;null!=this._media){var a=this._media.mediaInfo.prerollWaitTime;if(this._prerollQueuedRules.push({eventName:e,context:t}),this._getRefTs(t)-this._prerollRefTs&gt;=a||e===me.AdBreakStart||e===me.MediaComplete||e===me.MediaSkip){for(var i=this._prerollReorderRules(this._prerollQueuedRules),r=0;r&lt;i.length;r++){var n=i[r];this._processRule(n.eventName,n.context)}this._prerollQueuedRules=[],this._inPrerollInterval=!1}return!0}return!1}},{key:"_prerollReorderRules",value:function(e){for(var t=[],a=!1,i=0;i&lt;e.length;++i)if(e[i].eventName===me.AdBreakStart){a=!0;break}for(var r=a,n=0;n&lt;e.length;n++){var s=e[n];s.eventName===me.Play&amp;&amp;r||(s.eventName===me.AdBreakStart&amp;&amp;(r=!1),t.push(s))}return t}}],[{key:"_cleanMetadata",value:function(e){var t={};return $(e)&amp;&amp;Object.keys(e).forEach((function(a){var i=e[a];Ke.test(a)&amp;&amp;!S(i)&amp;&amp;(t[a]=String(i))})),t}}]),e}(),Ze=function(){function e(a,i,r){t(this,e),this._logger=O(i),this._tracker=new We(a,this._logger,r),this._timer=null,this._lastEventTS=null,this._lastPlayheadParams=null}return i(e,[{key:"trackSessionStart",value:function(e,t){this._logger.log("trackSessionStart(info:"+fe(e)+" metadata:"+fe(t)+")"),this._trackInternal(me.SessionStart,e,t)}},{key:"trackSessionEnd",value:function(){this._logger.log("trackSessionEnd"),this._trackInternal(me.SessionEnd)}},{key:"trackComplete",value:function(){this._logger.log("trackComplete"),this._trackInternal(me.SessionComplete)}},{key:"trackPlay",value:function(){this._logger.log("trackPlay"),this._trackInternal(me.Play)}},{key:"trackPause",value:function(){this._logger.log("trackPause"),this._trackInternal(me.Pause)}},{key:"trackEvent",value:function(e,t,a){this._logger.log("trackEvent("+e+" info:"+fe(t)+" metadata:"+fe(a)+")"),this._trackInternal(e,t,a)}},{key:"trackError",value:function(e){this._logger.log("trackError("+e+")");var t=r({},pe.ErrorId,e);this._trackInternal(me.Error,t)}},{key:"updatePlayhead",value:function(e){var t=r({},pe.Playhead,e);this._trackInternal(me.PlayheadUpdate,t)}},{key:"updateQoEObject",value:function(e){this._logger.log("updateQoEObject("+fe(e)+")"),this._trackInternal(me.QoEUpdate,e)}},{key:"destroy",value:function(){this._logger.log("destroy()"),this._stopTimer(),this._tracker=null}},{key:"_trackInternal",value:function(e,t,a){var i,n=arguments.length&gt;3&amp;&amp;void 0!==arguments[3]&amp;&amp;arguments[3];if(this._tracker){var s=C(),o=(r(i={},pe.Name,e),r(i,pe.Params,t),r(i,pe.Metadata,a),r(i,pe.TimeStamp,s),r(i,pe.InternalEvent,n),i),d=this._tracker.track(o);this._lastEventTS=s,e===me.PlayheadUpdate&amp;&amp;(this._lastPlayheadParams=t),e===me.SessionStart&amp;&amp;d?this._startTimer():e!==me.SessionComplete&amp;&amp;e!==me.SessionEnd||this._stopTimer()}else this._logger.warn("Dropping the call as the tracker instance is already destroyed")}},{key:"_startTimer",value:function(){var e=this;this._timer||(this._timer=E((function(){e._onTick()}),500))}},{key:"_stopTimer",value:function(){var e;this._timer&amp;&amp;(e=this._timer,clearInterval(e),this._timer=null)}},{key:"_onTick",value:function(){C()-this._lastEventTS&gt;750&amp;&amp;this._trackInternal(me.PlayheadUpdate,this._lastPlayheadParams,null,!0)}}]),e}(),$e=new re,Je=l();var Xe={configure:function(e){$e.configure(e)},getInstance:function(e){var t="tracker"+Je.getUniqueId();return new Ze($e,t,e)},createMediaObject:function(e,t,a,i,r){var n=null;try{n=new ue({id:t,name:e,streamType:i,mediaType:r,length:a}).serialize()}catch(e){he.error("Error creating MediaObject ("+e.message+")")}return n},createAdBreakObject:function(e,t,a){var i=null;try{i=new se({name:e,position:t,startTime:a}).serialize()}catch(e){he.error("Error creating AdBreakObject ("+e.message+")")}return i},createAdObject:function(e,t,a,i){var r=null;try{r=new ne({id:t,name:e,position:a,length:i}).serialize()}catch(e){he.error("Error creating AdObject ("+e.message+")")}return r},createChapterObject:function(e,t,a,i){var r=null;try{r=new oe({name:e,position:t,length:a,startTime:i}).serialize()}catch(e){he.error("Error creating ChapterObject ("+e.message+")")}return r},createQoEObject:function(e,t,a,i){var r=null;try{r=new le({bitrate:e,droppedFrames:i,fps:a,startupTime:t}).serialize()}catch(e){he.error("Error creating QoEObject ("+e.message+")")}return r},createStateObject:function(e){var t=null;try{t=new ce({name:e}).serialize()}catch(e){he.error("Error creating StateObject ("+e.message+")")}return t},version:"js-3.0.0",Event:h,MediaType:p,PlayerState:m,StreamType:y,MediaObjectKey:f,VideoMetadataKeys:_,AudioMetadataKeys:v,AdMetadataKeys:k};var Ye="ecid",et="analytics",tt="mediaanalytics",at=function(e){!function(e,t){if("function"!=typeof t&amp;&amp;null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&amp;&amp;t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&amp;&amp;d(e,t)}(s,e);var a,n=(a=s,function(){var e,t=o(a);if(c()){var i=o(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return u(this,e)});function s(e,a){var i;if(t(this,s),i=n.call(this),!e)throw new Error("Valid appmeasurement instance is required");if(!e.visitor)throw new Error("Valid visitor instance is required");return i._mediaConfig=a,i._appMeasurement=e,i._appMeasurementReady=!1,i._privacyResolved=!1,i._logger=O("WebECResolver"),i._fetchECParams(),i._fetchPrivacyStatus(),i._setupResolver(),i}return i(s,[{key:"resolveKeys",value:function(e){if(!e||0===e.length)return{};for(var t={},a=0;a&lt;e.length;a++){var i=e[a],r=Object.prototype.hasOwnProperty.call(this._fnMap,i)?this._fnMap[i].call(this):null;S(r)||(t[i]=r)}return t}},{key:"getPrivacyStatus",value:function(){return this._privacyStatus[tt]}},{key:"notifyPrivacyChange",value:function(e){this._mediaPrivacyClb.push(e)}},{key:"isReady",value:function(){return!!this._privacyResolved&amp;&amp;(this._privacyStatus[tt]===g.OptIn&amp;&amp;(this._privacyStatus[et]!==g.OptIn||this._appMeasurementReady))}},{key:"_setupResolver",value:function(){var e=this,t={};t[R.Rsid]=function(){return e._appMeasurement.account},t[R.AnalyticsTrackingServer]=function(){return e._appMeasurement.ssl&amp;&amp;e._appMeasurement.trackingServerSecure?e._appMeasurement.trackingServerSecure:e._appMeasurement.trackingServer},t[R.AnalyticsSsl]=function(){return e._appMeasurement.ssl},t[R.Vid]=function(){return e._appMeasurement.visitorID},t[R.Aid]=function(){var t=e._appMeasurement.analyticsVisitorID;if(""!==t)return t},t[R.Mcid]=function(){return e._appMeasurement.marketingCloudVisitorID},t[R.McOrgId]=function(){return e._appMeasurement.visitor.marketingCloudOrgID},t[R.AamLocHint]=function(){var t=parseInt(e._appMeasurement.audienceManagerLocationHint,10);return isNaN(t)?void 0:t},t[R.CustomerIds]=function(){return e._appMeasurement.visitor.getCustomerIDs()},t[R.MediaTrackingServer]=function(){return e._mediaConfig.trackingServer},t[R.MediaChannel]=function(){return e._mediaConfig.channel},t[R.MediaAppVersion]=function(){return e._mediaConfig.appVersion},t[R.MediaPlayerName]=function(){return e._mediaConfig.playerName},t[R.MediaSsl]=function(){return e._mediaConfig.ssl},this._fnMap=t}},{key:"_fetchECParams",value:function(){this._appMeasurement.isReadyToTrack()?this._onAppMeasurementReady():this._appMeasurement.callbackWhenReadyToTrack(this,this._onAppMeasurementReady,[])}},{key:"_onAppMeasurementReady",value:function(){this._logger.log("AppMeasurement ready"),this._appMeasurementReady=!0}},{key:"_fetchPrivacyStatus",value:function(){var e,t=this;this._mediaPrivacyClb=[],this._optIn=window.adobe&amp;&amp;window.adobe.optIn?window.adobe.optIn:void 0;var a=this._optIn&amp;&amp;this._optIn.doesOptInApply,i=a?g.OptUnknown:g.OptIn;this._privacyStatus=(r(e={},Ye,i),r(e,et,i),r(e,tt,i),e),a?this._optIn.fetchPermissions((function(){t._privacyResolved=!0,t._privacyStatus[Ye]=t._optIn.isApproved(t._optIn.Categories.ECID)?g.OptIn:g.OptOut,t._privacyStatus[et]=t._optIn.isApproved(t._optIn.Categories.ANALYTICS)?g.OptIn:g.OptOut,t._privacyStatus[tt]=t._optIn.isApproved(t._optIn.Categories.MEDIA_ANALYTICS)?g.OptIn:g.OptOut,t._mediaPrivacyClb.forEach((function(e){e(t._privacyStatus[tt])})),t._logger.log("Privacy Status "+fe(t._privacyStatus))}),!0):(this._privacyResolved=!0,this._logger.log("OptIn service not used, defaulting privacy status to "+fe(this._privacyStatus)))}}]),s}(function(){function e(){t(this,e)}return i(e,[{key:"resolveKeys",value:function(){throw new Error("Implementation error: Method must be overridden.")}},{key:"isReady",value:function(){}},{key:"getPrivacyStatus",value:function(){}},{key:"notifyPrivacyChange",value:function(){}}]),e}()),it=O("Media"),rt=!1;return{Media:s({},Xe,{configure:function(e,t){if(w(e||{}),rt)it.error("MediaSDK is already configured");else{it.log("configure("+fe(e)+")");try{!function(e){if(!$(e))throw new Error("mediaConfig is not a valid object");var t=e.trackingServer;if(!b(t))throw new Error("trackingServer is empty");if(-1!==t.indexOf("hb.omtrdc.net"))throw new Error("trackingServer should be set to Media collection endpoint and not heartbeat endpoint. Contact your Adobe representative for more information.")}(e);var a=new at(t,e);Xe.configure(a),rt=!0}catch(e){it.error("Error configuring MediaSDK : "+e.message),w({debugLogging:!1})}}},getInstance:function(e){return rt?Xe.getInstance(e):(it.error("MediaSDK should be configured before calling getInstance"),null)}}),MediaConfig:function e(){t(this,e),this.trackingServer=void 0,this.channel=void 0,this.appVersion=void 0,this.playerName=void 0,this.ssl=!0,this.debugLogging=!1}}}));

});</script><script>_satellite["_runScript3"](function(event, target, Promise) {
var complete = function (tracker) {
        var player = this;
        player.isInit = false;
        tracker.trackComplete();
    },
    init = function () {
        _satellite.logger.log('Initializing tracker');
        var player = this;
        // Create media object
        var id = player.mediainfo.id,
            name = player.mediainfo.name,
            length = player.mediainfo.duration,
            // p.duration() return "Infinity" for live stream
            streamType = Number.isFinite(player.duration())
                ? ADB.Media.StreamType.VOD
                : ADB.Media.StreamType.Live,
            mediaType = ADB.Media.MediaType.Video;

        mediaObject = ADB.Media.createMediaObject(
            name,
            id,
            length,
            streamType,
            mediaType
        );
        player.mediaObject = mediaObject;
    },
    pause = function (tracker) {
        tracker.trackPause();
    },
    sessionStart = function (tracker) {
        _satellite.logger.log('Session start');
        var player = this;
        if (!player.isInit) {
            // Initialize session
            player.isInit = true;
            // var mediaObject = init.call(this);
            tracker.trackSessionStart(this.mediaObject);
        }
    },
    play = function (tracker) {
        tracker.trackPlay();
    },
    updatePlayhead = function (tracker) {
        var player = this;
        tracker.updatePlayhead(player.currentTime());
    };

// A map of video player events to analytics methods to be triggered
var handlers = {
    ended: complete,
    loadedmetadata: init,
    pause: pause,
    playing: play,
    play: sessionStart,
    timeupdate: updatePlayhead,
};

var scriptLoadHandler = function () {
    var videojs = window.videojs;
    _satellite.logger.log('Configuring Media Object');
    var mediaConfig = new ADB.MediaConfig();
    mediaConfig.trackingServer = _satellite.getVar(
        'media_collection_api_server'
    );
    mediaConfig.playerName = 'brightcove';
    mediaConfig.channel = 'channel';
    mediaConfig.appVersion = videojs.VERSION;
    mediaConfig.debugLogging =
        _satellite.buildInfo.environment !== 'production';
    mediaConfig.ssl = true;

    _satellite.logger.log(mediaConfig);
    ADB.Media.configure(mediaConfig, ctr);

    // Register event handlers for all players
    videojs.hook('setup', function (player) {
        var tracker = ADB.Media.getInstance();

        // End session if user navigates away before video completion
        window.addEventListener('beforeunload', function () {
            if (player.isInit) {
                tracker.trackSessionEnd();
            }
        });
        player.ready(function () {
            // Register all event handlers
            Object.keys(handlers).forEach(function (handler) {
                var eventHandler = handlers[handler].bind(player, tracker);
                this.on(handler, eventHandler);
            }, this);
        });
    });
};

var regex = /brightcove/;
var MutationObserver = window.MutationObserver;
var observer = new MutationObserver(function (mutations, observer) {
    mutations.forEach(function (mutation) {
        mutation.addedNodes.forEach(function (node) {
            if (node.src &amp;&amp; regex.test(node.src)) {
                observer.disconnect();
                node.addEventListener('load', scriptLoadHandler);
            }
        });
    });
});

observer.observe(document.head, {
    childList: true,
});

});</script><script type="application/javascript" defer="">
        if (typeof utag_data === "undefined") {
          utag_data = {};
        }
        (function(a, b, c, d) {
          a = "https://edge.ldscdn.org/cdn2/csp/ldsorg/scripts/tracking.js";
          b = document;
          c = "script";
          d = b.createElement(c);
          d.src = a;
          d.type = "text/java" + c;
          d.async = true;
          a = b.getElementsByTagName(c)[0];
          a.parentNode.insertBefore(d, a);
        })();</script><script>_satellite["_runScript4"](function(event, target, Promise) {
var te_status=document.getElementById('teconsent');
_satellite.logger.log('trustarc test outside if');

if (te_status!=null) {
	//console.log('te_status not null');
	if (te_status.innerText=="") {
		var d = document,
		t = "script",
		g = d.createElement(t),
		s = d.getElementsByTagName(t)[0];
		g.async = true;
		g.src = '//consent.trustarc.com/notice?domain=lds.org&amp;c=teconsent&amp;js=nj&amp;noticeType=bb&amp;text=true&amp;gtm=1&amp;pn=1-0';
		s.parentNode.insertBefore(g, s);
		_satellite.logger.log('trustarc test in if');
	}
 
} else {
		if (document.getElementById('teconsent')===null) {
			_satellite.logger.log('trustarc test in else and if');
			var _STATE = {}; function runOnce(){
			if(!_STATE.hasRunOnce &amp;&amp; window.truste &amp;&amp; truste.eu &amp;&amp; truste.eu.prefclose){ 
			_STATE.oldValue = parseInt(truste.eu.bindMap.prefCookie); _STATE.oldMethod = truste.eu.prefclose;
			truste.eu.prefclose = function(){ _STATE.oldMethod();
			if(_STATE.oldValue != parseInt(truste.eu.bindMap.prefCookie)) setTimeout(function(){ window.location.reload(); },20);
			};
			_STATE.hasRunOnce = true;
			_STATE.i &amp;&amp; clearInterval(_STATE.i);
			} }
			_STATE.i = setInterval(runOnce,10);

			//create overlay
			var temp = document.createElement('div');
			temp.innerHTML = '&lt;div id="consent_blackbar" style="margin: 0px; position: fixed !important; border: 0px solid rgb(0, 0, 0) !important; bottom: 0px !important; left: 0% !important; width: 100% !important; z-index: 5000 !important; color: rgb(255, 255, 255) !important; opacity: 1; background: rgb(164, 165, 170) !important;"&gt;&lt;/div&gt;'; 
			document.body.appendChild(temp);

			//insert teconsent tag into footer

			if (document.getElementsByClassName("pf-footer__legal").length&gt;=1){
					_satellite.logger.log('trustarc test #1');
					var t_Footer=document.getElementsByClassName('pf-footer__legal');
					
					t_FooterP=t_Footer[0].innerHTML.trim();

					if (t_FooterP.indexOf('Cookie')==-1) {
                        _satellite.logger.log('trustarc test cookie #2');
						if (t_FooterP.substring(0,2)=='&lt;d') {
                          _satellite.logger.log('trustarc test cookie #3');
							t_FooterP=t_FooterP.replace('&lt;/div&gt;', '&lt;span id="teconsent"&gt;&lt;/span&gt;&lt;/div&gt;');
						} else if (t_FooterP.substring(0,2)=='&lt;p') {
                          _satellite.logger.log('trustarc test #4');
							t_FooterP=t_FooterP.replace('&lt;br&gt;', '&lt;span id="teconsent"&gt;&lt;/span&gt;&lt;br&gt;');
						}
						document.getElementsByClassName('pf-footer__legal')[0].innerHTML=t_FooterP;
					} 
					_satellite.logger.log('trustarc test #4');

			} else if (document.getElementsByClassName('legal').length&gt;=1) {
					var legalFooter= document.getElementsByClassName("legal")[0];
					var legalFooterString=legalFooter.innerHTML;
					legalFooterString = legalFooterString+'&lt;span id="teconsent"&gt;&lt;/span&gt;';
					legalFooter.innerHTML=legalFooterString;
					_satellite.setCookie('trust','loaded');
					_satellite.logger.log('trustarc test #5');

			} else if (document.getElementsByClassName('text-center tmp-footer').length&gt;=1) {
					var legalFooter= document.getElementsByClassName("text-center tmp-footer")[0];
					
					legalFooterString = '&lt;div ng-hide="footer" class="text-center tmp-footer"&gt;&lt;p&gt;&lt;a href="//www.lds.org/legal/terms" data-omniture="Rights" style="cursor: pointer;"&gt;Rights and Use Information (Updated 2016-09-01)&lt;/a&gt;&lt;a href="//www.lds.org/legal/privacy?lang=eng" data-omniture="Privacy" style="cursor: pointer;"&gt;Privacy Policy (Updated 3/18/2014)&lt;/a&gt;&lt;span id="teconsent"&gt;&lt;/span&gt;&lt;br&gt;&lt;span&gt;© 2018 by Intellectual Reserve, Inc. All rights reserved.&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;';
					legalFooter.innerHTML=legalFooterString;
					//console.log('text-center tmp-footer exists');
					_satellite.logger.log('trustarc test #6');
			} else if (document.getElementsByClassName('footer-widget').length&gt;=1) {
					console.log('footer-widget');
					var legalFooter= document.getElementsByClassName("footer-widget")[0];
					var legalFooterString=legalFooter.innerHTML;
					legalFooterString = legalFooterString+'&lt;span id="teconsent"&gt;&lt;/span&gt;';
					legalFooter.innerHTML=legalFooterString;
					_satellite.logger.log('trustarc test #7');
			} 
			var d = document,
			t = "script",
			g = d.createElement(t),
			s = d.getElementsByTagName(t)[0];
			g.async = true;
			g.src = '//consent.trustarc.com/notice?domain=lds.org&amp;c=teconsent&amp;js=nj&amp;noticeType=bb&amp;text=true&amp;gtm=1&amp;pn=1-0';
			s.parentNode.insertBefore(g, s);
          _satellite.logger.log('trustarc test #8');
		}
	}

});</script><script>
document.body.addEventListener("click", function(event) {
	if(event &amp;&amp; event.target &amp;&amp; event.target.id === 'truste-consent-button') {
		setTimeout(() =&gt; { window.location.reload(); }, 1000);
	}
});
</script><script>_satellite["_runScript5"](function(event, target, Promise) {
var updatePlayhead=function(e){return _satellite.logger.debug("Registering timer to update playhead"),setInterval(function(){_satellite.logger.debug("Updating playhead"),e.tracker.updatePlayhead(e.getCurrentTime())},250)},onPlayerReady=function(e){_satellite.logger.log("YouTube Player ready");var a=e.target,t=a.playerInfo.videoData.video_id,r=a.playerInfo.videoData.title,n=a.playerInfo.duration,l=ADB.Media.StreamType.Live,i=ADB.Media.MediaType.Video;a.mediaObject=ADB.Media.createMediaObject(r,t,n,l,i)},beforeUnloadHandler=function(e){e.isSessionEnded||(e.tracker.trackSessionEnd(),clearInterval(e.intervalId),e.isSessionEnded=!0)},onPlayerStateChange=function(e){_satellite.logger.log("YouTube Player state: "+e.data);var a=e.data,t=e.target;switch(a){case YT.PlayerState.UNSTARTED:t.tracker=ADB.Media.getInstance(),t.tracker.trackSessionStart(t.mediaObject),window.addEventListener("beforeunload",beforeUnloadHandler.bind(null,t));break;case YT.PlayerState.ENDED:clearInterval(t.intervalId),t.tracker.trackComplete(),t.isSessionEnded=!0;break;case YT.PlayerState.PLAYING:t.isSessionEnded&amp;&amp;(t.tracker.trackSessionStart(t.mediaObject),t.isSessionEnded=!1),t.tracker.trackPlay(),t.intervalId=updatePlayhead(t);break;case YT.PlayerState.PAUSED:clearInterval(t.intervalId),t.tracker.trackPause();break;case YT.PlayerState.BUFFERING:case YT.PlayerState.CUED:}};window.onYouTubeIframeAPIReady=function(){_satellite.logger.log("YouTube api ready");var e=new ADB.MediaConfig;e.trackingServer=_satellite.getVar("media_collection_api_server"),e.playerName="youtube",e.channel="channel",e.appVersion="",e.debugLogging="production"!==_satellite.buildInfo.environment,e.ssl=!0,ADB.Media.configure(e,ctr);var l=YT.Player;YT.Player=function(){var e=[].slice.apply(arguments);_satellite.logger.log(e);var a=e[1].events.onReady,t=e[1].events.onStateChange,r=function(e){a(e),onPlayerReady(e)},n=function(e){t(e),onPlayerStateChange(e)};e[1].events.onReady=r,e[1].events.onStateChange=n,l.apply(this,e)},YT.Player.prototype=Object.create(l.prototype)};
});</script><iframe sandbox="allow-scripts allow-same-origin" title="Adobe ID Syncing iFrame" id="destination_publishing_iframe_boncom_0" name="destination_publishing_iframe_boncom_0_name" src="https://boncom.demdex.net/dest5.html?d_nsid=0#https%3A%2F%2Fwww.churchofjesuschrist.org" style="display: none; width: 0px; height: 0px;" class="aamIframeLoaded"></iframe><div id="ZN_6RK6tR2D4THcrSB"></div></body></html>