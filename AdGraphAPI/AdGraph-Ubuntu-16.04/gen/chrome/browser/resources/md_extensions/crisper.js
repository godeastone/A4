// Copyright 2016 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
Polymer({is:"cr-drawer",properties:{heading:String,open:{type:Boolean,notify:true},align:{type:String,value:"ltr",reflectToAttribute:true}},listeners:{transitionend:"onDialogTransitionEnd_"},toggle:function(){if(this.$.dialog.open)this.closeDrawer();else this.openDrawer()},openDrawer:function(){if(!this.$.dialog.open){this.$.dialog.showModal();this.open=true;this.classList.add("opening")}},closeDrawer:function(){if(this.$.dialog.open){this.classList.remove("opening");this.classList.add("closing")}},onContainerTap_:function(event){event.stopPropagation()},onDialogTap_:function(){this.closeDrawer()},onDialogCancel_:function(event){event.preventDefault();this.closeDrawer()},onDialogTransitionEnd_:function(){if(this.classList.contains("closing")){this.classList.remove("closing");this.$.dialog.close();this.open=false}else if(this.classList.contains("opening")){this.fire("cr-drawer-opened")}}});
// Copyright 2016 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
Polymer({is:"cr-lazy-render",behaviors:[Polymer.Templatizer],child_:null,get:function(){if(!this.child_)this.render_();return this.child_},getIfExists:function(){return this.child_},render_:function(){var template=this.getContentChildren()[0];if(!template.ctor)this.templatize(template);var parentNode=this.parentNode;if(parentNode&&!this.child_){var instance=this.stamp({});this.child_=instance.root.firstElementChild;parentNode.insertBefore(instance.root,this)}},_forwardParentProp:function(prop,value){if(this.child_)this.child_._templateInstance[prop]=value},_forwardParentPath:function(path,value){if(this.child_)this.child_._templateInstance.notifyPath(path,value,true)}});
// Copyright 2016 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
var CrSearchFieldBehavior={properties:{label:{type:String,value:""},clearLabel:{type:String,value:""},hasSearchText:{type:Boolean,reflectToAttribute:true,value:false},lastValue_:{type:String,value:""}},getSearchInput:function(){},getValue:function(){return this.getSearchInput().value},setValue:function(value,opt_noEvent){var searchInput=this.getSearchInput();searchInput.value=value;this.onSearchTermInput();this.onValueChanged_(value,!!opt_noEvent)},onSearchTermSearch:function(){this.onValueChanged_(this.getValue(),false)},onSearchTermInput:function(){this.hasSearchText=this.$.searchInput.value!=""},onValueChanged_:function(newValue,noEvent){if(newValue==this.lastValue_)return;this.lastValue_=newValue;if(!noEvent)this.fire("search-changed",newValue)}};(function(){Polymer.IronMeta=function(options){Polymer.IronMeta[" "](options);this.type=options&&options.type||"default";this.key=options&&options.key;if(options&&"value"in options){this.value=options.value}};Polymer.IronMeta[" "]=function(){};Polymer.IronMeta.types={};Polymer.IronMeta.prototype={get value(){var type=this.type;var key=this.key;if(type&&key){return Polymer.IronMeta.types[type]&&Polymer.IronMeta.types[type][key]}},set value(value){var type=this.type;var key=this.key;if(type&&key){type=Polymer.IronMeta.types[type]=Polymer.IronMeta.types[type]||{};if(value==null){delete type[key]}else{type[key]=value}}},get list(){var type=this.type;if(type){var items=Polymer.IronMeta.types[this.type];if(!items){return[]}return Object.keys(items).map(function(key){return metaDatas[this.type][key]},this)}},byKey:function(key){this.key=key;return this.value}};var metaDatas=Polymer.IronMeta.types;Polymer({is:"iron-meta",properties:{type:{type:String,value:"default"},key:{type:String},value:{type:String,notify:true},self:{type:Boolean,observer:"_selfChanged"},__meta:{type:Boolean,computed:"__computeMeta(type, key, value)"}},hostAttributes:{hidden:true},__computeMeta:function(type,key,value){var meta=new Polymer.IronMeta({type:type,key:key});if(value!==undefined&&value!==meta.value){meta.value=value}else if(this.value!==meta.value){this.value=meta.value}return meta},get list(){return this.__meta&&this.__meta.list},_selfChanged:function(self){if(self){this.value=this}},byKey:function(key){return new Polymer.IronMeta({type:this.type,key:key}).value}})})();Polymer({is:"iron-iconset-svg",properties:{name:{type:String,observer:"_nameChanged"},size:{type:Number,value:24},rtlMirroring:{type:Boolean,value:false},useGlobalRtlAttribute:{type:Boolean,value:false}},created:function(){this._meta=new Polymer.IronMeta({type:"iconset",key:null,value:null})},attached:function(){this.style.display="none"},getIconNames:function(){this._icons=this._createIconMap();return Object.keys(this._icons).map(function(n){return this.name+":"+n},this)},applyIcon:function(element,iconName){this.removeIcon(element);var svg=this._cloneIcon(iconName,this.rtlMirroring&&this._targetIsRTL(element));if(svg){var pde=Polymer.dom(element.root||element);pde.insertBefore(svg,pde.childNodes[0]);return element._svgIcon=svg}return null},removeIcon:function(element){if(element._svgIcon){Polymer.dom(element.root||element).removeChild(element._svgIcon);element._svgIcon=null}},_targetIsRTL:function(target){if(this.__targetIsRTL==null){if(this.useGlobalRtlAttribute){var globalElement=document.body&&document.body.hasAttribute("dir")?document.body:document.documentElement;this.__targetIsRTL=globalElement.getAttribute("dir")==="rtl"}else{if(target&&target.nodeType!==Node.ELEMENT_NODE){target=target.host}this.__targetIsRTL=target&&window.getComputedStyle(target)["direction"]==="rtl"}}return this.__targetIsRTL},_nameChanged:function(){this._meta.value=null;this._meta.key=this.name;this._meta.value=this;this.async(function(){this.fire("iron-iconset-added",this,{node:window})})},_createIconMap:function(){var icons=Object.create(null);Polymer.dom(this).querySelectorAll("[id]").forEach(function(icon){icons[icon.id]=icon});return icons},_cloneIcon:function(id,mirrorAllowed){this._icons=this._icons||this._createIconMap();return this._prepareSvgClone(this._icons[id],this.size,mirrorAllowed)},_prepareSvgClone:function(sourceSvg,size,mirrorAllowed){if(sourceSvg){var content=sourceSvg.cloneNode(true),svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),viewBox=content.getAttribute("viewBox")||"0 0 "+size+" "+size,cssText="pointer-events: none; display: block; width: 100%; height: 100%;";if(mirrorAllowed&&content.hasAttribute("mirror-in-rtl")){cssText+="-webkit-transform:scale(-1,1);transform:scale(-1,1);transform-origin:center;"}svg.setAttribute("viewBox",viewBox);svg.setAttribute("preserveAspectRatio","xMidYMid meet");svg.setAttribute("focusable","false");svg.style.cssText=cssText;svg.appendChild(content).removeAttribute("id");return svg}return null}});(function(){"use strict";var KEY_IDENTIFIER={"U+0008":"backspace","U+0009":"tab","U+001B":"esc","U+0020":"space","U+007F":"del"};var KEY_CODE={8:"backspace",9:"tab",13:"enter",27:"esc",33:"pageup",34:"pagedown",35:"end",36:"home",32:"space",37:"left",38:"up",39:"right",40:"down",46:"del",106:"*"};var MODIFIER_KEYS={shift:"shiftKey",ctrl:"ctrlKey",alt:"altKey",meta:"metaKey"};var KEY_CHAR=/[a-z0-9*]/;var IDENT_CHAR=/U\+/;var ARROW_KEY=/^arrow/;var SPACE_KEY=/^space(bar)?/;var ESC_KEY=/^escape$/;function transformKey(key,noSpecialChars){var validKey="";if(key){var lKey=key.toLowerCase();if(lKey===" "||SPACE_KEY.test(lKey)){validKey="space"}else if(ESC_KEY.test(lKey)){validKey="esc"}else if(lKey.length==1){if(!noSpecialChars||KEY_CHAR.test(lKey)){validKey=lKey}}else if(ARROW_KEY.test(lKey)){validKey=lKey.replace("arrow","")}else if(lKey=="multiply"){validKey="*"}else{validKey=lKey}}return validKey}function transformKeyIdentifier(keyIdent){var validKey="";if(keyIdent){if(keyIdent in KEY_IDENTIFIER){validKey=KEY_IDENTIFIER[keyIdent]}else if(IDENT_CHAR.test(keyIdent)){keyIdent=parseInt(keyIdent.replace("U+","0x"),16);validKey=String.fromCharCode(keyIdent).toLowerCase()}else{validKey=keyIdent.toLowerCase()}}return validKey}function transformKeyCode(keyCode){var validKey="";if(Number(keyCode)){if(keyCode>=65&&keyCode<=90){validKey=String.fromCharCode(32+keyCode)}else if(keyCode>=112&&keyCode<=123){validKey="f"+(keyCode-112+1)}else if(keyCode>=48&&keyCode<=57){validKey=String(keyCode-48)}else if(keyCode>=96&&keyCode<=105){validKey=String(keyCode-96)}else{validKey=KEY_CODE[keyCode]}}return validKey}function normalizedKeyForEvent(keyEvent,noSpecialChars){if(keyEvent.key){return transformKey(keyEvent.key,noSpecialChars)}if(keyEvent.detail&&keyEvent.detail.key){return transformKey(keyEvent.detail.key,noSpecialChars)}return transformKeyIdentifier(keyEvent.keyIdentifier)||transformKeyCode(keyEvent.keyCode)||""}function keyComboMatchesEvent(keyCombo,event){var keyEvent=normalizedKeyForEvent(event,keyCombo.hasModifiers);return keyEvent===keyCombo.key&&(!keyCombo.hasModifiers||!!event.shiftKey===!!keyCombo.shiftKey&&!!event.ctrlKey===!!keyCombo.ctrlKey&&!!event.altKey===!!keyCombo.altKey&&!!event.metaKey===!!keyCombo.metaKey)}function parseKeyComboString(keyComboString){if(keyComboString.length===1){return{combo:keyComboString,key:keyComboString,event:"keydown"}}return keyComboString.split("+").reduce(function(parsedKeyCombo,keyComboPart){var eventParts=keyComboPart.split(":");var keyName=eventParts[0];var event=eventParts[1];if(keyName in MODIFIER_KEYS){parsedKeyCombo[MODIFIER_KEYS[keyName]]=true;parsedKeyCombo.hasModifiers=true}else{parsedKeyCombo.key=keyName;parsedKeyCombo.event=event||"keydown"}return parsedKeyCombo},{combo:keyComboString.split(":").shift()})}function parseEventString(eventString){return eventString.trim().split(" ").map(function(keyComboString){return parseKeyComboString(keyComboString)})}Polymer.IronA11yKeysBehavior={properties:{keyEventTarget:{type:Object,value:function(){return this}},stopKeyboardEventPropagation:{type:Boolean,value:false},_boundKeyHandlers:{type:Array,value:function(){return[]}},_imperativeKeyBindings:{type:Object,value:function(){return{}}}},observers:["_resetKeyEventListeners(keyEventTarget, _boundKeyHandlers)"],keyBindings:{},registered:function(){this._prepKeyBindings()},attached:function(){this._listenKeyEventListeners()},detached:function(){this._unlistenKeyEventListeners()},addOwnKeyBinding:function(eventString,handlerName){this._imperativeKeyBindings[eventString]=handlerName;this._prepKeyBindings();this._resetKeyEventListeners()},removeOwnKeyBindings:function(){this._imperativeKeyBindings={};this._prepKeyBindings();this._resetKeyEventListeners()},keyboardEventMatchesKeys:function(event,eventString){var keyCombos=parseEventString(eventString);for(var i=0;i<keyCombos.length;++i){if(keyComboMatchesEvent(keyCombos[i],event)){return true}}return false},_collectKeyBindings:function(){var keyBindings=this.behaviors.map(function(behavior){return behavior.keyBindings});if(keyBindings.indexOf(this.keyBindings)===-1){keyBindings.push(this.keyBindings)}return keyBindings},_prepKeyBindings:function(){this._keyBindings={};this._collectKeyBindings().forEach(function(keyBindings){for(var eventString in keyBindings){this._addKeyBinding(eventString,keyBindings[eventString])}},this);for(var eventString in this._imperativeKeyBindings){this._addKeyBinding(eventString,this._imperativeKeyBindings[eventString])}for(var eventName in this._keyBindings){this._keyBindings[eventName].sort(function(kb1,kb2){var b1=kb1[0].hasModifiers;var b2=kb2[0].hasModifiers;return b1===b2?0:b1?-1:1})}},_addKeyBinding:function(eventString,handlerName){parseEventString(eventString).forEach(function(keyCombo){this._keyBindings[keyCombo.event]=this._keyBindings[keyCombo.event]||[];this._keyBindings[keyCombo.event].push([keyCombo,handlerName])},this)},_resetKeyEventListeners:function(){this._unlistenKeyEventListeners();if(this.isAttached){this._listenKeyEventListeners()}},_listenKeyEventListeners:function(){if(!this.keyEventTarget){return}Object.keys(this._keyBindings).forEach(function(eventName){var keyBindings=this._keyBindings[eventName];var boundKeyHandler=this._onKeyBindingEvent.bind(this,keyBindings);this._boundKeyHandlers.push([this.keyEventTarget,eventName,boundKeyHandler]);this.keyEventTarget.addEventListener(eventName,boundKeyHandler)},this)},_unlistenKeyEventListeners:function(){var keyHandlerTuple;var keyEventTarget;var eventName;var boundKeyHandler;while(this._boundKeyHandlers.length){keyHandlerTuple=this._boundKeyHandlers.pop();keyEventTarget=keyHandlerTuple[0];eventName=keyHandlerTuple[1];boundKeyHandler=keyHandlerTuple[2];keyEventTarget.removeEventListener(eventName,boundKeyHandler)}},_onKeyBindingEvent:function(keyBindings,event){if(this.stopKeyboardEventPropagation){event.stopPropagation()}if(event.defaultPrevented){return}for(var i=0;i<keyBindings.length;i++){var keyCombo=keyBindings[i][0];var handlerName=keyBindings[i][1];if(keyComboMatchesEvent(keyCombo,event)){this._triggerKeyHandler(keyCombo,handlerName,event);if(event.defaultPrevented){return}}}},_triggerKeyHandler:function(keyCombo,handlerName,keyboardEvent){var detail=Object.create(keyCombo);detail.keyboardEvent=keyboardEvent;var event=new CustomEvent(keyCombo.event,{detail:detail,cancelable:true});this[handlerName].call(this,event);if(event.defaultPrevented){keyboardEvent.preventDefault()}}}})();Polymer.IronControlState={properties:{focused:{type:Boolean,value:false,notify:true,readOnly:true,reflectToAttribute:true},disabled:{type:Boolean,value:false,notify:true,observer:"_disabledChanged",reflectToAttribute:true},_oldTabIndex:{type:String},_boundFocusBlurHandler:{type:Function,value:function(){return this._focusBlurHandler.bind(this)}},__handleEventRetargeting:{type:Boolean,value:function(){return!this.shadowRoot&&!Polymer.Element}}},observers:["_changedControlState(focused, disabled)"],ready:function(){this.addEventListener("focus",this._boundFocusBlurHandler,true);this.addEventListener("blur",this._boundFocusBlurHandler,true)},_focusBlurHandler:function(event){if(Polymer.Element){this._setFocused(event.type==="focus");return}if(event.target===this){this._setFocused(event.type==="focus")}else if(this.__handleEventRetargeting){var target=Polymer.dom(event).localTarget;if(!this.isLightDescendant(target)){this.fire(event.type,{sourceEvent:event},{node:this,bubbles:event.bubbles,cancelable:event.cancelable})}}},_disabledChanged:function(disabled,old){this.setAttribute("aria-disabled",disabled?"true":"false");this.style.pointerEvents=disabled?"none":"";if(disabled){this._oldTabIndex=this.getAttribute("tabindex");this._setFocused(false);this.tabIndex=-1;this.blur()}else if(this._oldTabIndex!==undefined){if(this._oldTabIndex===null){this.removeAttribute("tabindex")}else{this.setAttribute("tabindex",this._oldTabIndex)}}},_changedControlState:function(){if(this._controlStateChanged){this._controlStateChanged()}}};Polymer.IronButtonStateImpl={properties:{pressed:{type:Boolean,readOnly:true,value:false,reflectToAttribute:true,observer:"_pressedChanged"},toggles:{type:Boolean,value:false,reflectToAttribute:true},active:{type:Boolean,value:false,notify:true,reflectToAttribute:true},pointerDown:{type:Boolean,readOnly:true,value:false},receivedFocusFromKeyboard:{type:Boolean,readOnly:true},ariaActiveAttribute:{type:String,value:"aria-pressed",observer:"_ariaActiveAttributeChanged"}},listeners:{down:"_downHandler",up:"_upHandler",tap:"_tapHandler"},observers:["_focusChanged(focused)","_activeChanged(active, ariaActiveAttribute)"],keyBindings:{"enter:keydown":"_asyncClick","space:keydown":"_spaceKeyDownHandler","space:keyup":"_spaceKeyUpHandler"},_mouseEventRe:/^mouse/,_tapHandler:function(){if(this.toggles){this._userActivate(!this.active)}else{this.active=false}},_focusChanged:function(focused){this._detectKeyboardFocus(focused);if(!focused){this._setPressed(false)}},_detectKeyboardFocus:function(focused){this._setReceivedFocusFromKeyboard(!this.pointerDown&&focused)},_userActivate:function(active){if(this.active!==active){this.active=active;this.fire("change")}},_downHandler:function(event){this._setPointerDown(true);this._setPressed(true);this._setReceivedFocusFromKeyboard(false)},_upHandler:function(){this._setPointerDown(false);this._setPressed(false)},_spaceKeyDownHandler:function(event){var keyboardEvent=event.detail.keyboardEvent;var target=Polymer.dom(keyboardEvent).localTarget;if(this.isLightDescendant(target))return;keyboardEvent.preventDefault();keyboardEvent.stopImmediatePropagation();this._setPressed(true)},_spaceKeyUpHandler:function(event){var keyboardEvent=event.detail.keyboardEvent;var target=Polymer.dom(keyboardEvent).localTarget;if(this.isLightDescendant(target))return;if(this.pressed){this._asyncClick()}this._setPressed(false)},_asyncClick:function(){this.async(function(){this.click()},1)},_pressedChanged:function(pressed){this._changedButtonState()},_ariaActiveAttributeChanged:function(value,oldValue){if(oldValue&&oldValue!=value&&this.hasAttribute(oldValue)){this.removeAttribute(oldValue)}},_activeChanged:function(active,ariaActiveAttribute){if(this.toggles){this.setAttribute(this.ariaActiveAttribute,active?"true":"false")}else{this.removeAttribute(this.ariaActiveAttribute)}this._changedButtonState()},_controlStateChanged:function(){if(this.disabled){this._setPressed(false)}else{this._changedButtonState()}},_changedButtonState:function(){if(this._buttonStateChanged){this._buttonStateChanged()}}};Polymer.IronButtonState=[Polymer.IronA11yKeysBehavior,Polymer.IronButtonStateImpl];(function(){var MAX_RADIUS_PX=300;var MIN_DURATION_MS=800;var distance=function(x1,y1,x2,y2){var xDelta=x1-x2;var yDelta=y1-y2;return Math.sqrt(xDelta*xDelta+yDelta*yDelta)};Polymer({is:"paper-ripple",behaviors:[Polymer.IronA11yKeysBehavior],properties:{center:{type:Boolean,value:false},holdDown:{type:Boolean,value:false,observer:"_holdDownChanged"},recenters:{type:Boolean,value:false},noink:{type:Boolean,value:false}},keyBindings:{"enter:keydown":"_onEnterKeydown","space:keydown":"_onSpaceKeydown","space:keyup":"_onSpaceKeyup"},created:function(){this.ripples=[]},attached:function(){this.keyEventTarget=this.parentNode.nodeType==11?Polymer.dom(this).getOwnerRoot().host:this.parentNode;this.keyEventTarget=this.keyEventTarget;this.listen(this.keyEventTarget,"up","uiUpAction");this.listen(this.keyEventTarget,"down","uiDownAction")},detached:function(){this.unlisten(this.keyEventTarget,"up","uiUpAction");this.unlisten(this.keyEventTarget,"down","uiDownAction");this.keyEventTarget=null},simulatedRipple:function(){this.downAction();this.async(function(){this.upAction()}.bind(this),1)},uiDownAction:function(e){if(!this.noink)this.downAction(e)},downAction:function(e){if(this.ripples.length&&this.holdDown)return;this.debounce("show ripple",function(){this.__showRipple(e)},1)},__showRipple:function(e){var rect=this.getBoundingClientRect();var roundedCenterX=function(){return Math.round(rect.width/2)};var roundedCenterY=function(){return Math.round(rect.height/2)};var centered=!e||this.center;if(centered){var x=roundedCenterX();var y=roundedCenterY()}else{var sourceEvent=e.detail.sourceEvent;var x=Math.round(sourceEvent.clientX-rect.left);var y=Math.round(sourceEvent.clientY-rect.top)}var corners=[{x:0,y:0},{x:rect.width,y:0},{x:0,y:rect.height},{x:rect.width,y:rect.height}];var cornerDistances=corners.map(function(corner){return Math.round(distance(x,y,corner.x,corner.y))});var radius=Math.min(MAX_RADIUS_PX,Math.max.apply(Math,cornerDistances));var startTranslate=x-radius+"px, "+(y-radius)+"px";if(this.recenters&&!centered){var endTranslate=roundedCenterX()-radius+"px, "+(roundedCenterY()-radius)+"px"}else{var endTranslate=startTranslate}var ripple=document.createElement("div");ripple.classList.add("ripple");ripple.style.height=ripple.style.width=2*radius+"px";this.ripples.push(ripple);this.shadowRoot.appendChild(ripple);ripple.animate({transform:["translate("+startTranslate+") scale(0)","translate("+endTranslate+") scale(1)"]},{duration:Math.max(MIN_DURATION_MS,Math.log(radius)*radius)||0,easing:"cubic-bezier(.2, .9, .1, .9)",fill:"forwards"})},uiUpAction:function(e){if(!this.noink)this.upAction()},upAction:function(e){if(!this.holdDown)this.debounce("hide ripple",function(){this.__hideRipple()},1)},__hideRipple:function(){Promise.all(this.ripples.map(function(ripple){return new Promise(function(resolve){var removeRipple=function(){ripple.remove();resolve()};var opacity=getComputedStyle(ripple).opacity;if(!opacity.length){removeRipple()}else{var animation=ripple.animate({opacity:[opacity,0]},{duration:150,fill:"forwards"});animation.addEventListener("finish",removeRipple);animation.addEventListener("cancel",removeRipple)}})})).then(function(){this.fire("transitionend")}.bind(this));this.ripples=[]},_onEnterKeydown:function(){this.uiDownAction();this.async(this.uiUpAction,1)},_onSpaceKeydown:function(){this.uiDownAction()},_onSpaceKeyup:function(){this.uiUpAction()},_holdDownChanged:function(newHoldDown,oldHoldDown){if(oldHoldDown===undefined)return;if(newHoldDown)this.downAction();else this.upAction()}})})();Polymer.PaperRippleBehavior={properties:{noink:{type:Boolean,observer:"_noinkChanged"},_rippleContainer:{type:Object}},_buttonStateChanged:function(){if(this.focused){this.ensureRipple()}},_downHandler:function(event){Polymer.IronButtonStateImpl._downHandler.call(this,event);if(this.pressed){this.ensureRipple(event)}},ensureRipple:function(optTriggeringEvent){if(!this.hasRipple()){this._ripple=this._createRipple();this._ripple.noink=this.noink;var rippleContainer=this._rippleContainer||this.root;if(rippleContainer){Polymer.dom(rippleContainer).appendChild(this._ripple)}if(optTriggeringEvent){var domContainer=Polymer.dom(this._rippleContainer||this);var target=Polymer.dom(optTriggeringEvent).rootTarget;if(domContainer.deepContains(target)){this._ripple.uiDownAction(optTriggeringEvent)}}}},getRipple:function(){this.ensureRipple();return this._ripple},hasRipple:function(){return Boolean(this._ripple)},_createRipple:function(){var element=document.createElement("paper-ripple");return element},_noinkChanged:function(noink){if(this.hasRipple()){this._ripple.noink=noink}}};Polymer({is:"paper-icon-button-light",behaviors:[Polymer.PaperRippleBehavior],ready:function(){Polymer.RenderStatus.afterNextRender(this,()=>{this.addEventListener("down",this._rippleDown.bind(this));this.addEventListener("up",this._rippleUp.bind(this));var button=this.getEffectiveChildren()[0];this._rippleContainer=button;button.addEventListener("focus",this._rippleDown.bind(this));button.addEventListener("blur",this._rippleUp.bind(this))})},_rippleDown:function(){this.getRipple().uiDownAction()},_rippleUp:function(){this.getRipple().uiUpAction()},ensureRipple:function(var_args){var lastRipple=this._ripple;Polymer.PaperRippleBehavior.ensureRipple.apply(this,arguments);if(this._ripple&&this._ripple!==lastRipple){this._ripple.center=true;this._ripple.classList.add("circle")}}});Polymer({is:"iron-icon",properties:{icon:{type:String},theme:{type:String},src:{type:String},_meta:{value:Polymer.Base.create("iron-meta",{type:"iconset"})}},observers:["_updateIcon(_meta, isAttached)","_updateIcon(theme, isAttached)","_srcChanged(src, isAttached)","_iconChanged(icon, isAttached)"],_DEFAULT_ICONSET:"icons",_iconChanged:function(icon){var parts=(icon||"").split(":");this._iconName=parts.pop();this._iconsetName=parts.pop()||this._DEFAULT_ICONSET;this._updateIcon()},_srcChanged:function(src){this._updateIcon()},_usesIconset:function(){return this.icon||!this.src},_updateIcon:function(){if(this._usesIconset()){if(this._img&&this._img.parentNode){Polymer.dom(this.root).removeChild(this._img)}if(this._iconName===""){if(this._iconset){this._iconset.removeIcon(this)}}else if(this._iconsetName&&this._meta){this._iconset=this._meta.byKey(this._iconsetName);if(this._iconset){this._iconset.applyIcon(this,this._iconName,this.theme);this.unlisten(window,"iron-iconset-added","_updateIcon")}else{this.listen(window,"iron-iconset-added","_updateIcon")}}}else{if(this._iconset){this._iconset.removeIcon(this)}if(!this._img){this._img=document.createElement("img");this._img.style.width="100%";this._img.style.height="100%";this._img.draggable=false}this._img.src=this.src;Polymer.dom(this.root).appendChild(this._img)}}});Polymer.PaperInkyFocusBehaviorImpl={observers:["_focusedChanged(receivedFocusFromKeyboard)"],_focusedChanged:function(receivedFocusFromKeyboard){if(receivedFocusFromKeyboard){this.ensureRipple()}if(this.hasRipple()){this._ripple.holdDown=receivedFocusFromKeyboard}},_createRipple:function(){var ripple=Polymer.PaperRippleBehavior._createRipple();ripple.id="ink";ripple.setAttribute("center","");ripple.classList.add("circle");return ripple}};Polymer.PaperInkyFocusBehavior=[Polymer.IronButtonState,Polymer.IronControlState,Polymer.PaperRippleBehavior,Polymer.PaperInkyFocusBehaviorImpl];Polymer({is:"paper-icon-button",hostAttributes:{role:"button",tabindex:"0"},behaviors:[Polymer.PaperInkyFocusBehavior],properties:{src:{type:String},icon:{type:String},alt:{type:String,observer:"_altChanged"}},_altChanged:function(newValue,oldValue){var label=this.getAttribute("aria-label");if(!label||oldValue==label){this.setAttribute("aria-label",newValue)}}});Polymer.PaperSpinnerBehavior={properties:{active:{type:Boolean,value:false,reflectToAttribute:true,observer:"__activeChanged"},alt:{type:String,value:"loading",observer:"__altChanged"},__coolingDown:{type:Boolean,value:false}},__computeContainerClasses:function(active,coolingDown){return[active||coolingDown?"active":"",coolingDown?"cooldown":""].join(" ")},__activeChanged:function(active,old){this.__setAriaHidden(!active);this.__coolingDown=!active&&old},__altChanged:function(alt){if(alt==="loading"){this.alt=this.getAttribute("aria-label")||alt}else{this.__setAriaHidden(alt==="");this.setAttribute("aria-label",alt)}},__setAriaHidden:function(hidden){var attr="aria-hidden";if(hidden){this.setAttribute(attr,"true")}else{this.removeAttribute(attr)}},__reset:function(){this.active=false;this.__coolingDown=false}};Polymer({is:"paper-spinner-lite",behaviors:[Polymer.PaperSpinnerBehavior]});
// Copyright 2016 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
Polymer({is:"cr-toolbar-search-field",behaviors:[CrSearchFieldBehavior],properties:{narrow:{type:Boolean,reflectToAttribute:true},showingSearch:{type:Boolean,value:false,notify:true,observer:"showingSearchChanged_",reflectToAttribute:true},label:String,clearLabel:String,spinnerActive:{type:Boolean,reflectToAttribute:true},isSpinnerShown_:{type:Boolean,computed:"computeIsSpinnerShown_(spinnerActive, showingSearch)"},searchFocused_:{type:Boolean,value:false}},listeners:{click:"showSearch_"},getSearchInput:function(){return this.$.searchInput},isSearchFocused:function(){return this.searchFocused_},showAndFocus:function(){this.showingSearch=true;this.focus_()},onSearchTermInput:function(){CrSearchFieldBehavior.onSearchTermInput.call(this);this.showingSearch=this.hasSearchText||this.isSearchFocused()},focus_:function(){this.getSearchInput().focus()},computeIconTabIndex_:function(narrow){return narrow?0:-1},computeIconAriaHidden_:function(narrow){return Boolean(!narrow).toString()},computeIsSpinnerShown_:function(){var showSpinner=this.spinnerActive&&this.showingSearch;if(showSpinner)this.$.spinnerTemplate.if=true;return showSpinner},onInputFocus_:function(){this.searchFocused_=true},onInputBlur_:function(){this.searchFocused_=false;if(!this.hasSearchText)this.showingSearch=false},onSearchTermKeydown_:function(e){if(e.key=="Escape")this.showingSearch=false},showSearch_:function(e){if(e.target!=this.$.clearSearch)this.showingSearch=true},clearSearch_:function(e){this.setValue("");this.focus_()},showingSearchChanged_:function(current,previous){if(previous==undefined)return;if(this.showingSearch){this.focus_();return}this.setValue("");this.getSearchInput().blur()}});Polymer({is:"iron-media-query",properties:{queryMatches:{type:Boolean,value:false,readOnly:true,notify:true},query:{type:String,observer:"queryChanged"},full:{type:Boolean,value:false},_boundMQHandler:{value:function(){return this.queryHandler.bind(this)}},_mq:{value:null}},attached:function(){this.style.display="none";this.queryChanged()},detached:function(){this._remove()},_add:function(){if(this._mq){this._mq.addListener(this._boundMQHandler)}},_remove:function(){if(this._mq){this._mq.removeListener(this._boundMQHandler)}this._mq=null},queryChanged:function(){this._remove();var query=this.query;if(!query){return}if(!this.full&&query[0]!=="("){query="("+query+")"}this._mq=window.matchMedia(query);this._add();this.queryHandler(this._mq)},queryHandler:function(mq){this._setQueryMatches(mq.matches)}});
// Copyright 2016 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
Polymer({is:"cr-toolbar",properties:{pageName:String,searchPrompt:String,clearLabel:String,menuLabel:String,menuPromo:String,spinnerActive:Boolean,showMenu:{type:Boolean,value:false},showMenuPromo:{type:Boolean,value:false},showSearch:{type:Boolean,value:true},narrow:{type:Boolean,reflectToAttribute:true,readonly:true,notify:true},narrowThreshold:{type:Number,value:900},closeMenuPromo:String,showingSearch_:{type:Boolean,reflectToAttribute:true}},observers:["possiblyShowMenuPromo_(showMenu, showMenuPromo, showingSearch_)"],getSearchField:function(){return this.$.search},onClosePromoTap_:function(){this.fire("cr-toolbar-menu-promo-close")},onMenuTap_:function(){this.fire("cr-toolbar-menu-tap")},possiblyShowMenuPromo_:function(){Polymer.RenderStatus.afterNextRender(this,function(){if(this.showMenu&&this.showMenuPromo&&!this.showingSearch_){this.$$("#menuPromo").animate({opacity:[0,.9]},{duration:500,fill:"forwards"});this.fire("cr-toolbar-menu-promo-shown")}}.bind(this))},titleIfNotShowMenuPromo_:function(title,showMenuPromo){return showMenuPromo?"":title}});
// Copyright (c) 2013 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
function assert(condition,opt_message){if(!condition){var message="Assertion failed";if(opt_message)message=message+": "+opt_message;var error=new Error(message);var global=function(){return this}();if(global.traceAssertionsForTesting)console.warn(error.stack);throw error}return condition}function assertNotReached(opt_message){assert(false,opt_message||"Unreachable code hit")}function assertInstanceof(value,type,opt_message){if(!(value instanceof type)){assertNotReached(opt_message||"Value "+value+" is not a[n] "+(type.name||typeof type))}return value}
// Copyright 2016 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
function PromiseResolver(){this.resolve_;this.reject_;this.promise_=new Promise(function(resolve,reject){this.resolve_=resolve;this.reject_=reject}.bind(this))}PromiseResolver.prototype={get promise(){return this.promise_},set promise(p){assertNotReached()},get resolve(){return this.resolve_},set resolve(r){assertNotReached()},get reject(){return this.reject_},set reject(s){assertNotReached()}};
// Copyright (c) 2012 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
var global=this;var WebUIListener;var cr=cr||function(){"use strict";function exportPath(name,opt_object,opt_objectToExportTo){var parts=name.split(".");var cur=opt_objectToExportTo||global;for(var part;parts.length&&(part=parts.shift());){if(!parts.length&&opt_object!==undefined){cur[part]=opt_object}else if(part in cur){cur=cur[part]}else{cur=cur[part]={}}}return cur}function dispatchPropertyChange(target,propertyName,newValue,oldValue){var e=new Event(propertyName+"Change");e.propertyName=propertyName;e.newValue=newValue;e.oldValue=oldValue;target.dispatchEvent(e)}function getAttributeName(jsName){return jsName.replace(/([A-Z])/g,"-$1").toLowerCase()}var PropertyKind={JS:"js",ATTR:"attr",BOOL_ATTR:"boolAttr"};function getGetter(name,kind){switch(kind){case PropertyKind.JS:var privateName=name+"_";return function(){return this[privateName]};case PropertyKind.ATTR:var attributeName=getAttributeName(name);return function(){return this.getAttribute(attributeName)};case PropertyKind.BOOL_ATTR:var attributeName=getAttributeName(name);return function(){return this.hasAttribute(attributeName)}}throw"not reached"}function getSetter(name,kind,opt_setHook){switch(kind){case PropertyKind.JS:var privateName=name+"_";return function(value){var oldValue=this[name];if(value!==oldValue){this[privateName]=value;if(opt_setHook)opt_setHook.call(this,value,oldValue);dispatchPropertyChange(this,name,value,oldValue)}};case PropertyKind.ATTR:var attributeName=getAttributeName(name);return function(value){var oldValue=this[name];if(value!==oldValue){if(value==undefined)this.removeAttribute(attributeName);else this.setAttribute(attributeName,value);if(opt_setHook)opt_setHook.call(this,value,oldValue);dispatchPropertyChange(this,name,value,oldValue)}};case PropertyKind.BOOL_ATTR:var attributeName=getAttributeName(name);return function(value){var oldValue=this[name];if(value!==oldValue){if(value)this.setAttribute(attributeName,name);else this.removeAttribute(attributeName);if(opt_setHook)opt_setHook.call(this,value,oldValue);dispatchPropertyChange(this,name,value,oldValue)}}}throw"not reached"}function defineProperty(obj,name,opt_kind,opt_setHook){if(typeof obj=="function")obj=obj.prototype;var kind=opt_kind||PropertyKind.JS;if(!obj.__lookupGetter__(name))obj.__defineGetter__(name,getGetter(name,kind));if(!obj.__lookupSetter__(name))obj.__defineSetter__(name,getSetter(name,kind,opt_setHook))}var uidCounter=1;function createUid(){return uidCounter++}function getUid(item){if(item.hasOwnProperty("uid"))return item.uid;return item.uid=createUid()}function dispatchSimpleEvent(target,type,opt_bubbles,opt_cancelable){var e=new Event(type,{bubbles:opt_bubbles,cancelable:opt_cancelable===undefined||opt_cancelable});return target.dispatchEvent(e)}function define(name,fun){var obj=exportPath(name);var exports=fun();for(var propertyName in exports){var propertyDescriptor=Object.getOwnPropertyDescriptor(exports,propertyName);if(propertyDescriptor)Object.defineProperty(obj,propertyName,propertyDescriptor)}}function addSingletonGetter(ctor){ctor.getInstance=function(){return ctor.instance_||(ctor.instance_=new ctor)}}function makePublic(ctor,methods,opt_target){methods.forEach(function(method){ctor[method]=function(){var target=opt_target?document.getElementById(opt_target):ctor.getInstance();return target[method+"_"].apply(target,arguments)}})}var chromeSendResolverMap={};function webUIResponse(id,isSuccess,response){var resolver=chromeSendResolverMap[id];delete chromeSendResolverMap[id];if(isSuccess)resolver.resolve(response);else resolver.reject(response)}function sendWithPromise(methodName,var_args){var args=Array.prototype.slice.call(arguments,1);var promiseResolver=new PromiseResolver;var id=methodName+"_"+createUid();chromeSendResolverMap[id]=promiseResolver;chrome.send(methodName,[id].concat(args));return promiseResolver.promise}var webUIListenerMap={};function webUIListenerCallback(event,var_args){var eventListenersMap=webUIListenerMap[event];if(!eventListenersMap){return}var args=Array.prototype.slice.call(arguments,1);for(var listenerId in eventListenersMap){eventListenersMap[listenerId].apply(null,args)}}function addWebUIListener(eventName,callback){webUIListenerMap[eventName]=webUIListenerMap[eventName]||{};var uid=createUid();webUIListenerMap[eventName][uid]=callback;return{eventName:eventName,uid:uid}}function removeWebUIListener(listener){var listenerExists=webUIListenerMap[listener.eventName]&&webUIListenerMap[listener.eventName][listener.uid];if(listenerExists){delete webUIListenerMap[listener.eventName][listener.uid];return true}return false}return{addSingletonGetter:addSingletonGetter,createUid:createUid,define:define,defineProperty:defineProperty,dispatchPropertyChange:dispatchPropertyChange,dispatchSimpleEvent:dispatchSimpleEvent,exportPath:exportPath,getUid:getUid,makePublic:makePublic,PropertyKind:PropertyKind,addWebUIListener:addWebUIListener,removeWebUIListener:removeWebUIListener,sendWithPromise:sendWithPromise,webUIListenerCallback:webUIListenerCallback,webUIResponse:webUIResponse,get doc(){return document},get isMac(){return/Mac/.test(navigator.platform)},get isWindows(){return/Win/.test(navigator.platform)},get isChromeOS(){return/CrOS/.test(navigator.userAgent)},get isLinux(){return/Linux/.test(navigator.userAgent)},get isAndroid(){return/Android/.test(navigator.userAgent)},get isIOS(){return/iPad|iPhone|iPod/.test(navigator.platform)}}}();
// Copyright 2017 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
var CrContainerShadowBehavior={intersectionObserver_:null,attached:function(){var dropShadow=document.createElement("div");dropShadow.id="cr-container-shadow";this.shadowRoot.insertBefore(dropShadow,this.$.container);var intersectionProbe=document.createElement("div");this.$.container.prepend(intersectionProbe);var callback=entries=>{dropShadow.classList.toggle("has-shadow",entries[entries.length-1].intersectionRatio==0)};this.intersectionObserver_=new IntersectionObserver(callback,{root:this.$.container,threshold:0});window.setTimeout(()=>{if(this.intersectionObserver_)this.intersectionObserver_.observe(intersectionProbe)})},detached:function(){this.intersectionObserver_.disconnect();this.intersectionObserver_=null}};
// Copyright 2017 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
Polymer({is:"cr-link-row",behaviors:[Polymer.PaperRippleBehavior],properties:{iconClass:String,label:String,subLabel:{type:String,value:""},disabled:{type:Boolean,reflectToAttribute:true}},listeners:{down:"_rippleDown",up:"_rippleUp",focus:"_rippleDown",blur:"_rippleUp"},_rippleDown:function(){this.getRipple().uiDownAction()},_rippleUp:function(){this.getRipple().uiUpAction()},_createRipple:function(){this._rippleContainer=this.$.icon;var ripple=Polymer.PaperRippleBehavior._createRipple();ripple.id="ink";ripple.setAttribute("recenters","");ripple.classList.add("circle");return ripple}});
// Copyright 2017 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
Polymer({is:"cr-toggle",behaviors:[Polymer.PaperRippleBehavior],properties:{checked:{type:Boolean,value:false,reflectToAttribute:true,observer:"checkedChanged_",notify:true},disabled:{type:Boolean,value:false,reflectToAttribute:true,observer:"disabledChanged_"}},hostAttributes:{"aria-disabled":"false","aria-pressed":"false",role:"button",tabindex:0},listeners:{pointerdown:"onPointerDown_",pointerup:"onPointerUp_",click:"onTap_",keypress:"onKeyPress_",focus:"onFocus_",blur:"onBlur_"},boundPointerMove_:null,MOVE_THRESHOLD_PX:5,handledInPointerMove_:false,attached:function(){let direction=this.matches(":host-context([dir=rtl]) cr-toggle")?-1:1;this.boundPointerMove_=(e=>{e.preventDefault();let diff=e.clientX-this.pointerDownX_;if(Math.abs(diff)<this.MOVE_THRESHOLD_PX)return;this.handledInPointerMove_=true;let shouldToggle=diff*direction<0&&this.checked||diff*direction>0&&!this.checked;if(shouldToggle)this.toggleState_(false)})},checkedChanged_:function(){this.setAttribute("aria-pressed",this.checked?"true":"false")},disabledChanged_:function(){this.setAttribute("tabindex",this.disabled?-1:0);this.setAttribute("aria-disabled",this.disabled?"true":"false")},onFocus_:function(){this.ensureRipple();this.$$("paper-ripple").holdDown=true},onBlur_:function(){this.ensureRipple();this.$$("paper-ripple").holdDown=false},onPointerUp_:function(e){this.removeEventListener("pointermove",this.boundPointerMove_)},onPointerDown_:function(e){if(e.button!=0)return;this.setPointerCapture(e.pointerId);this.pointerDownX_=e.clientX;this.handledInPointerMove_=false;this.addEventListener("pointermove",this.boundPointerMove_)},onTap_:function(e){e.stopPropagation();e.preventDefault();if(this.handledInPointerMove_)return;this.toggleState_(false)},toggleState_:function(fromKeyboard){this.checked=!this.checked;if(!fromKeyboard){this.ensureRipple();this.$$("paper-ripple").holdDown=false}this.fire("change",this.checked)},onKeyPress_:function(e){if(e.key==" "||e.key=="Enter"){e.preventDefault();this.toggleState_(true)}},onButtonFocus_:function(){this.focus()},_createRipple:function(){this._rippleContainer=this.$.knob;let ripple=Polymer.PaperRippleBehavior._createRipple();ripple.id="ink";ripple.setAttribute("recenters","");ripple.classList.add("circle","toggle-ink");return ripple}});Polymer.NeonAnimatableBehavior={properties:{animationConfig:{type:Object},entryAnimation:{observer:"_entryAnimationChanged",type:String},exitAnimation:{observer:"_exitAnimationChanged",type:String}},_entryAnimationChanged:function(){this.animationConfig=this.animationConfig||{};this.animationConfig["entry"]=[{name:this.entryAnimation,node:this}]},_exitAnimationChanged:function(){this.animationConfig=this.animationConfig||{};this.animationConfig["exit"]=[{name:this.exitAnimation,node:this}]},_copyProperties:function(config1,config2){for(var property in config2){config1[property]=config2[property]}},_cloneConfig:function(config){var clone={isClone:true};this._copyProperties(clone,config);return clone},_getAnimationConfigRecursive:function(type,map,allConfigs){if(!this.animationConfig){return}if(this.animationConfig.value&&typeof this.animationConfig.value==="function"){this._warn(this._logf("playAnimation","Please put 'animationConfig' inside of your components 'properties' object instead of outside of it."));return}var thisConfig;if(type){thisConfig=this.animationConfig[type]}else{thisConfig=this.animationConfig}if(!Array.isArray(thisConfig)){thisConfig=[thisConfig]}if(thisConfig){for(var config,index=0;config=thisConfig[index];index++){if(config.animatable){config.animatable._getAnimationConfigRecursive(config.type||type,map,allConfigs)}else{if(config.id){var cachedConfig=map[config.id];if(cachedConfig){if(!cachedConfig.isClone){map[config.id]=this._cloneConfig(cachedConfig);cachedConfig=map[config.id]}this._copyProperties(cachedConfig,config)}else{map[config.id]=config}}else{allConfigs.push(config)}}}}},getAnimationConfig:function(type){var map={};var allConfigs=[];this._getAnimationConfigRecursive(type,map,allConfigs);for(var key in map){allConfigs.push(map[key])}return allConfigs}};Polymer.NeonAnimationRunnerBehaviorImpl={_configureAnimations:function(configs){var results=[];var resultsToPlay=[];if(configs.length>0){for(var config,index=0;config=configs[index];index++){var neonAnimation=document.createElement(config.name);if(neonAnimation.isNeonAnimation){var result=null;if(!neonAnimation.configure){neonAnimation.configure=function(config){return null}}result=neonAnimation.configure(config);resultsToPlay.push({result:result,config:config})}else{console.warn(this.is+":",config.name,"not found!")}}}for(var i=0;i<resultsToPlay.length;i++){var result=resultsToPlay[i].result;var config=resultsToPlay[i].config;try{if(typeof result.cancel!="function"){result=document.timeline.play(result)}}catch(e){result=null;console.warn("Couldnt play","(",config.name,").",e)}if(result){results.push({neonAnimation:neonAnimation,config:config,animation:result})}}return results},_shouldComplete:function(activeEntries){var finished=true;for(var i=0;i<activeEntries.length;i++){if(activeEntries[i].animation.playState!="finished"){finished=false;break}}return finished},_complete:function(activeEntries){for(var i=0;i<activeEntries.length;i++){activeEntries[i].neonAnimation.complete(activeEntries[i].config)}for(var i=0;i<activeEntries.length;i++){activeEntries[i].animation.cancel()}},playAnimation:function(type,cookie){var configs=this.getAnimationConfig(type);if(!configs){return}this._active=this._active||{};if(this._active[type]){this._complete(this._active[type]);delete this._active[type]}var activeEntries=this._configureAnimations(configs);if(activeEntries.length==0){this.fire("neon-animation-finish",cookie,{bubbles:false});return}this._active[type]=activeEntries;for(var i=0;i<activeEntries.length;i++){activeEntries[i].animation.onfinish=function(){if(this._shouldComplete(activeEntries)){this._complete(activeEntries);delete this._active[type];this.fire("neon-animation-finish",cookie,{bubbles:false})}}.bind(this)}},cancelAnimation:function(){for(var k in this._active){var entries=this._active[k];for(var j in entries){entries[j].animation.cancel()}}this._active={}}};Polymer.NeonAnimationRunnerBehavior=[Polymer.NeonAnimatableBehavior,Polymer.NeonAnimationRunnerBehaviorImpl];Polymer.NeonAnimationBehavior={properties:{animationTiming:{type:Object,value:function(){return{duration:500,easing:"cubic-bezier(0.4, 0, 0.2, 1)",fill:"both"}}}},isNeonAnimation:true,created:function(){if(!document.body.animate){console.warn("No web animations detected. This element will not"+" function without a web animations polyfill.")}},timingFromConfig:function(config){if(config.timing){for(var property in config.timing){this.animationTiming[property]=config.timing[property]}}return this.animationTiming},setPrefixedProperty:function(node,property,value){var map={transform:["webkitTransform"],transformOrigin:["mozTransformOrigin","webkitTransformOrigin"]};var prefixes=map[property];for(var prefix,index=0;prefix=prefixes[index];index++){node.style[prefix]=value}node.style[property]=value},complete:function(){}};Polymer({is:"fade-in-animation",behaviors:[Polymer.NeonAnimationBehavior],configure:function(config){var node=config.node;this._effect=new KeyframeEffect(node,[{opacity:"0"},{opacity:"1"}],this.timingFromConfig(config));return this._effect}});Polymer({is:"fade-out-animation",behaviors:[Polymer.NeonAnimationBehavior],configure:function(config){var node=config.node;this._effect=new KeyframeEffect(node,[{opacity:"1"},{opacity:"0"}],this.timingFromConfig(config));return this._effect}});Polymer({is:"paper-tooltip",hostAttributes:{role:"tooltip",tabindex:-1},behaviors:[Polymer.NeonAnimationRunnerBehavior],properties:{for:{type:String,observer:"_findTarget"},manualMode:{type:Boolean,value:false,observer:"_manualModeChanged"},position:{type:String,value:"bottom"},fitToVisibleBounds:{type:Boolean,value:false},offset:{type:Number,value:14},marginTop:{type:Number,value:14},animationDelay:{type:Number,value:500},animationConfig:{type:Object,value:function(){return{entry:[{name:"fade-in-animation",node:this,timing:{delay:0}}],exit:[{name:"fade-out-animation",node:this}]}}},_showing:{type:Boolean,value:false}},listeners:{"neon-animation-finish":"_onAnimationFinish"},get target(){var parentNode=Polymer.dom(this).parentNode;var ownerRoot=Polymer.dom(this).getOwnerRoot();var target;if(this.for){target=Polymer.dom(ownerRoot).querySelector("#"+this.for)}else{target=parentNode.nodeType==Node.DOCUMENT_FRAGMENT_NODE?ownerRoot.host:parentNode}return target},attached:function(){this._findTarget()},detached:function(){if(!this.manualMode)this._removeListeners()},show:function(){if(this._showing)return;if(Polymer.dom(this).textContent.trim()===""){var allChildrenEmpty=true;var effectiveChildren=Polymer.dom(this).getEffectiveChildNodes();for(var i=0;i<effectiveChildren.length;i++){if(effectiveChildren[i].textContent.trim()!==""){allChildrenEmpty=false;break}}if(allChildrenEmpty){return}}this.cancelAnimation();this._showing=true;this.toggleClass("hidden",false,this.$.tooltip);this.updatePosition();this.animationConfig.entry[0].timing=this.animationConfig.entry[0].timing||{};this.animationConfig.entry[0].timing.delay=this.animationDelay;this._animationPlaying=true;this.playAnimation("entry")},hide:function(){if(!this._showing){return}if(this._animationPlaying){this.cancelAnimation();this._showing=false;this._onAnimationFinish();return}this._showing=false;this._animationPlaying=true;this.playAnimation("exit")},updatePosition:function(){if(!this._target||!this.offsetParent)return;var offset=this.offset;if(this.marginTop!=14&&this.offset==14)offset=this.marginTop;var parentRect=this.offsetParent.getBoundingClientRect();var targetRect=this._target.getBoundingClientRect();var thisRect=this.getBoundingClientRect();var horizontalCenterOffset=(targetRect.width-thisRect.width)/2;var verticalCenterOffset=(targetRect.height-thisRect.height)/2;var targetLeft=targetRect.left-parentRect.left;var targetTop=targetRect.top-parentRect.top;var tooltipLeft,tooltipTop;switch(this.position){case"top":tooltipLeft=targetLeft+horizontalCenterOffset;tooltipTop=targetTop-thisRect.height-offset;break;case"bottom":tooltipLeft=targetLeft+horizontalCenterOffset;tooltipTop=targetTop+targetRect.height+offset;break;case"left":tooltipLeft=targetLeft-thisRect.width-offset;tooltipTop=targetTop+verticalCenterOffset;break;case"right":tooltipLeft=targetLeft+targetRect.width+offset;tooltipTop=targetTop+verticalCenterOffset;break}if(this.fitToVisibleBounds){if(parentRect.left+tooltipLeft+thisRect.width>window.innerWidth){this.style.right="0px";this.style.left="auto"}else{this.style.left=Math.max(0,tooltipLeft)+"px";this.style.right="auto"}if(parentRect.top+tooltipTop+thisRect.height>window.innerHeight){this.style.bottom=parentRect.height+"px";this.style.top="auto"}else{this.style.top=Math.max(-parentRect.top,tooltipTop)+"px";this.style.bottom="auto"}}else{this.style.left=tooltipLeft+"px";this.style.top=tooltipTop+"px"}},_addListeners:function(){if(this._target){this.listen(this._target,"mouseenter","show");this.listen(this._target,"focus","show");this.listen(this._target,"mouseleave","hide");this.listen(this._target,"blur","hide");this.listen(this._target,"tap","hide")}this.listen(this,"mouseenter","hide")},_findTarget:function(){if(!this.manualMode)this._removeListeners();this._target=this.target;if(!this.manualMode)this._addListeners()},_manualModeChanged:function(){if(this.manualMode)this._removeListeners();else this._addListeners()},_onAnimationFinish:function(){this._animationPlaying=false;if(!this._showing){this.toggleClass("hidden",true,this.$.tooltip)}},_removeListeners:function(){if(this._target){this.unlisten(this._target,"mouseenter","show");this.unlisten(this._target,"focus","show");this.unlisten(this._target,"mouseleave","hide");this.unlisten(this._target,"blur","hide");this.unlisten(this._target,"tap","hide")}this.unlisten(this,"mouseenter","hide")}});
// Copyright 2017 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
Polymer({is:"cr-tooltip-icon",properties:{iconAriaLabel:String,iconClass:String,tooltipText:String}});
// Copyright 2014 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
var ActionLink=document.registerElement("action-link",{prototype:{__proto__:HTMLAnchorElement.prototype,createdCallback:function(){this.tabIndex=this.disabled?-1:0;if(!this.hasAttribute("role"))this.setAttribute("role","link");this.addEventListener("keydown",function(e){if(!this.disabled&&e.key=="Enter"&&!this.href){window.setTimeout(this.click.bind(this),0)}});function preventDefault(e){e.preventDefault()}function removePreventDefault(){document.removeEventListener("selectstart",preventDefault);document.removeEventListener("mouseup",removePreventDefault)}this.addEventListener("mousedown",function(){document.addEventListener("selectstart",preventDefault);document.addEventListener("mouseup",removePreventDefault);if(document.activeElement!=this)this.classList.add("no-outline")});this.addEventListener("blur",function(){this.classList.remove("no-outline")})},set disabled(disabled){if(disabled)HTMLAnchorElement.prototype.setAttribute.call(this,"disabled","");else HTMLAnchorElement.prototype.removeAttribute.call(this,"disabled");this.tabIndex=disabled?-1:0},get disabled(){return this.hasAttribute("disabled")},setAttribute:function(attr,val){if(attr.toLowerCase()=="disabled")this.disabled=true;else HTMLAnchorElement.prototype.setAttribute.apply(this,arguments)},removeAttribute:function(attr){if(attr.toLowerCase()=="disabled")this.disabled=false;else HTMLAnchorElement.prototype.removeAttribute.apply(this,arguments)}},extends:"a"});
// Copyright (c) 2012 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
cr.define("cr.ui",function(){function decorate(source,constr){var elements;if(typeof source=="string")elements=cr.doc.querySelectorAll(source);else elements=[source];for(var i=0,el;el=elements[i];i++){if(!(el instanceof constr))constr.decorate(el)}}function createElementHelper(tagName,opt_bag){var doc;if(opt_bag&&opt_bag.ownerDocument)doc=opt_bag.ownerDocument;else doc=cr.doc;return doc.createElement(tagName)}function define(tagNameOrFunction){var createFunction,tagName;if(typeof tagNameOrFunction=="function"){createFunction=tagNameOrFunction;tagName=""}else{createFunction=createElementHelper;tagName=tagNameOrFunction}function f(opt_propertyBag){var el=createFunction(tagName,opt_propertyBag);f.decorate(el);for(var propertyName in opt_propertyBag){el[propertyName]=opt_propertyBag[propertyName]}return el}f.decorate=function(el){el.__proto__=f.prototype;el.decorate()};return f}function limitInputWidth(el,parentEl,min,opt_scale){el.style.width="10px";var doc=el.ownerDocument;var win=doc.defaultView;var computedStyle=win.getComputedStyle(el);var parentComputedStyle=win.getComputedStyle(parentEl);var rtl=computedStyle.direction=="rtl";var inputRect=el.getBoundingClientRect();var parentRect=parentEl.getBoundingClientRect();var startPos=rtl?parentRect.right-inputRect.right:inputRect.left-parentRect.left;var inner=parseInt(computedStyle.borderLeftWidth,10)+parseInt(computedStyle.paddingLeft,10)+parseInt(computedStyle.paddingRight,10)+parseInt(computedStyle.borderRightWidth,10);var parentPadding=rtl?parseInt(parentComputedStyle.paddingLeft,10):parseInt(parentComputedStyle.paddingRight,10);var max=parentEl.clientWidth-startPos-inner-parentPadding;if(opt_scale)max*=opt_scale;function limit(){if(el.scrollWidth>max){el.style.width=max+"px"}else{el.style.width=0;var sw=el.scrollWidth;if(sw<min){el.style.width=min+"px"}else{el.style.width=sw+"px"}}}el.addEventListener("input",limit);limit()}function toCssPx(pixels){if(!window.isFinite(pixels))console.error("Pixel value is not a number: "+pixels);return Math.round(pixels)+"px"}function swallowDoubleClick(e){var doc=e.target.ownerDocument;var counter=Math.min(1,e.detail);function swallow(e){e.stopPropagation();e.preventDefault()}function onclick(e){if(e.detail>counter){counter=e.detail;swallow(e)}else{doc.removeEventListener("dblclick",swallow,true);doc.removeEventListener("click",onclick,true)}}setTimeout(function(){doc.addEventListener("click",onclick,true);doc.addEventListener("dblclick",swallow,true)},0)}return{decorate:decorate,define:define,limitInputWidth:limitInputWidth,toCssPx:toCssPx,swallowDoubleClick:swallowDoubleClick}});
// Copyright 2017 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
cr.define("cr.ui",function(){if(cr.ui.focusWithoutInk)return;var hideInk=false;assert(!cr.isIOS,"pointerdown doesn't work on iOS");document.addEventListener("pointerdown",function(){hideInk=true},true);document.addEventListener("keydown",function(){hideInk=false},true);var focusWithoutInk=function(toFocus){var innerButton=null;if(toFocus.parentElement.tagName=="PAPER-ICON-BUTTON-LIGHT"){innerButton=toFocus;toFocus=toFocus.parentElement}if(!("noink"in toFocus)){toFocus.focus();return}assert(document==toFocus.ownerDocument);var origNoInk;if(hideInk){origNoInk=toFocus.noink;toFocus.noink=true}if(innerButton)innerButton.focus();else toFocus.focus();if(hideInk)toFocus.noink=origNoInk};return{focusWithoutInk:focusWithoutInk}});
// Copyright 2017 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
cr.define("extensions",function(){const ItemBehavior={appOrExtension:function(type,appLabel,extensionLabel){const ExtensionType=chrome.developerPrivate.ExtensionType;switch(type){case ExtensionType.HOSTED_APP:case ExtensionType.LEGACY_PACKAGED_APP:case ExtensionType.PLATFORM_APP:return appLabel;case ExtensionType.EXTENSION:case ExtensionType.SHARED_MODULE:return extensionLabel}assertNotReached("Item type is not App or Extension.")}};return{ItemBehavior:ItemBehavior}});
// Copyright (c) 2013 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
function assert(condition,opt_message){if(!condition){var message="Assertion failed";if(opt_message)message=message+": "+opt_message;var error=new Error(message);var global=function(){return this}();if(global.traceAssertionsForTesting)console.warn(error.stack);throw error}return condition}function assertNotReached(opt_message){assert(false,opt_message||"Unreachable code hit")}function assertInstanceof(value,type,opt_message){if(!(value instanceof type)){assertNotReached(opt_message||"Value "+value+" is not a[n] "+(type.name||typeof type))}return value}
// Copyright (c) 2012 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
var parseHtmlSubset=function(){"use strict";var allowedAttributes={href:function(node,value){return node.tagName=="A"&&(value.startsWith("chrome://")||value.startsWith("https://"))},target:function(node,value){return node.tagName=="A"&&value=="_blank"}};var allowedTags=["A","B","SPAN","STRONG"];function merge(var_args){var clone={};for(var i=0;i<arguments.length;++i){if(typeof arguments[i]=="object"){for(var key in arguments[i]){if(arguments[i].hasOwnProperty(key))clone[key]=arguments[i][key]}}}return clone}function walk(n,f){f(n);for(var i=0;i<n.childNodes.length;i++){walk(n.childNodes[i],f)}}function assertElement(tags,node){if(tags.indexOf(node.tagName)==-1)throw Error(node.tagName+" is not supported")}function assertAttribute(attrs,attrNode,node){var n=attrNode.nodeName;var v=attrNode.nodeValue;if(!attrs.hasOwnProperty(n)||!attrs[n](node,v))throw Error(node.tagName+"["+n+'="'+v+'"] is not supported')}return function(s,opt_extraTags,opt_extraAttrs){var extraTags=(opt_extraTags||[]).map(function(str){return str.toUpperCase()});var tags=allowedTags.concat(extraTags);var attrs=merge(allowedAttributes,opt_extraAttrs||{});var doc=document.implementation.createHTMLDocument("");var r=doc.createRange();r.selectNode(doc.body);var df=r.createContextualFragment(s);walk(df,function(node){switch(node.nodeType){case Node.ELEMENT_NODE:assertElement(tags,node);var nodeAttrs=node.attributes;for(var i=0;i<nodeAttrs.length;++i){assertAttribute(attrs,nodeAttrs[i],node)}break;case Node.COMMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:case Node.TEXT_NODE:break;default:throw Error("Node type "+node.nodeType+" is not supported")}});return df}}();
// Copyright 2017 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
const SourceType={WEBSTORE:"webstore",POLICY:"policy",SIDELOADED:"sideloaded",UNPACKED:"unpacked",UNKNOWN:"unknown"};cr.define("extensions",function(){function isEnabled(state){switch(state){case chrome.developerPrivate.ExtensionState.ENABLED:case chrome.developerPrivate.ExtensionState.TERMINATED:return true;case chrome.developerPrivate.ExtensionState.BLACKLISTED:case chrome.developerPrivate.ExtensionState.DISABLED:return false}assertNotReached()}function isControlled(extensionInfo){return!!extensionInfo.controlledInfo}function userCanChangeEnablement(item){if(!item.userMayModify)return false;if(item.disableReasons.corruptInstall||item.disableReasons.suspiciousInstall||item.disableReasons.updateRequired){return false}if(item.dependentExtensions.length>0)return false;if(item.state==chrome.developerPrivate.ExtensionState.BLACKLISTED)return false;return true}function getItemSource(item){if(item.controlledInfo&&item.controlledInfo.type==chrome.developerPrivate.ControllerType.POLICY){return SourceType.POLICY}switch(item.location){case chrome.developerPrivate.Location.THIRD_PARTY:return SourceType.SIDELOADED;case chrome.developerPrivate.Location.UNPACKED:return SourceType.UNPACKED;case chrome.developerPrivate.Location.UNKNOWN:return SourceType.UNKNOWN;case chrome.developerPrivate.Location.FROM_STORE:return SourceType.WEBSTORE}assertNotReached(item.location)}function getItemSourceString(source){switch(source){case SourceType.POLICY:return loadTimeData.getString("itemSourcePolicy");case SourceType.SIDELOADED:return loadTimeData.getString("itemSourceSideloaded");case SourceType.UNPACKED:return loadTimeData.getString("itemSourceUnpacked");case SourceType.WEBSTORE:return loadTimeData.getString("itemSourceWebstore");case SourceType.UNKNOWN:return""}assertNotReached()}function computeInspectableViewLabel(view){const url=new URL(view.url);let label=view.url;if(url.protocol=="chrome-extension:")label=url.pathname.substring(1);if(label=="_generated_background_page.html")label=loadTimeData.getString("viewBackgroundPage");if(view.incognito)label+=" "+loadTimeData.getString("viewIncognito");if(view.renderProcessId==-1)label+=" "+loadTimeData.getString("viewInactive");if(view.isIframe)label+=" "+loadTimeData.getString("viewIframe");return label}return{isControlled:isControlled,isEnabled:isEnabled,userCanChangeEnablement:userCanChangeEnablement,getItemSource:getItemSource,getItemSourceString:getItemSourceString,computeInspectableViewLabel:computeInspectableViewLabel}});
// Copyright 2017 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
cr.exportPath("extensions");const Page={LIST:"items-list",DETAILS:"details-view",SHORTCUTS:"keyboard-shortcuts",ERRORS:"error-page"};const Dialog={OPTIONS:"options"};let PageState;cr.define("extensions",function(){"use strict";function isPageStateEqual(a,b){return a.page==b.page&&a.subpage==b.subpage&&a.extensionId==b.extensionId}const CANONICAL_PATH_REGEX=/(^\/)([\/-\w]+)(\/$)/;class NavigationHelper{constructor(){this.processRoute_();this.nextListenerId_=1;this.listeners_=new Map;this.previousPage_;window.addEventListener("popstate",()=>{this.notifyRouteChanged_(this.getCurrentPage())})}get currentPath_(){return location.pathname.replace(CANONICAL_PATH_REGEX,"$1$2")}processRoute_(){if(this.currentPath_=="/configureCommands"||this.currentPath_=="/shortcuts"){window.history.replaceState(undefined,"","/shortcuts")}else if(this.currentPath_!=="/"){window.history.replaceState(undefined,"","/")}}getCurrentPage(){const search=new URLSearchParams(location.search);let id=search.get("id");if(id)return{page:Page.DETAILS,extensionId:id};id=search.get("options");if(id)return{page:Page.DETAILS,extensionId:id,subpage:Dialog.OPTIONS};id=search.get("errors");if(id)return{page:Page.ERRORS,extensionId:id};if(this.currentPath_=="/shortcuts")return{page:Page.SHORTCUTS};return{page:Page.LIST}}addListener(listener){const nextListenerId=this.nextListenerId_++;this.listeners_.set(nextListenerId,listener);return nextListenerId}removeListener(id){return this.listeners_.delete(id)}notifyRouteChanged_(newPage){this.listeners_.forEach((listener,id)=>{listener(newPage)})}navigateTo(newPage){let currentPage=this.getCurrentPage();if(currentPage&&isPageStateEqual(currentPage,newPage)){return}this.updateHistory(newPage,false);this.notifyRouteChanged_(newPage)}replaceWith(newPage){this.updateHistory(newPage,true);if(this.previousPage_&&isPageStateEqual(this.previousPage_,newPage)){history.back();return}this.notifyRouteChanged_(newPage)}updateHistory(entry,replaceState){let path;switch(entry.page){case Page.LIST:path="/";break;case Page.DETAILS:if(entry.subpage){assert(entry.subpage==Dialog.OPTIONS);path="/?options="+entry.extensionId}else{path="/?id="+entry.extensionId}break;case Page.SHORTCUTS:path="/shortcuts";break;case Page.ERRORS:path="/?errors="+entry.extensionId;break}assert(path);const state={url:path};const currentPage=this.getCurrentPage();const isDialogNavigation=currentPage.page==entry.page&&currentPage.extensionId==entry.extensionId;if(replaceState||isDialogNavigation){history.replaceState(state,"",path)}else{this.previousPage_=currentPage;history.pushState(state,"",path)}}}const navigation=new NavigationHelper;return{NavigationHelper:NavigationHelper,navigation:navigation}});
// Copyright 2017 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
cr.define("extensions",function(){"use strict";const ExtensionsToggleRow=Polymer({is:"extensions-toggle-row",properties:{checked:Boolean},getLabel(){return this.$.label},onNativeClick_:function(e){e.stopPropagation()},onNativeChange_:function(e){e.stopPropagation();this.$.crToggle.checked=this.$.native.checked;this.checked=this.$.native.checked;this.fire("change",this.checked)},onCrToggleChange_:function(e){e.stopPropagation();this.$.native.checked=e.detail;this.fire("change",this.checked)}});return{ExtensionsToggleRow:ExtensionsToggleRow}});
// Copyright 2016 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
cr.define("extensions",function(){"use strict";const DetailView=Polymer({is:"extensions-detail-view",behaviors:[CrContainerShadowBehavior,extensions.ItemBehavior],properties:{data:Object,size_:String,delegate:Object,inDevMode:Boolean,incognitoAvailable:Boolean},observers:["onItemIdChanged_(data.id, delegate)"],listeners:{"view-enter-start":"onViewEnterStart_"},onViewEnterStart_:function(){Polymer.RenderStatus.afterNextRender(this,()=>cr.ui.focusWithoutInk(this.$.closeButton))},onItemIdChanged_:function(){this.size_="";this.delegate.getExtensionSize(this.data.id).then(size=>{this.size_=size})},getDescription_:function(description,fallback){return description||fallback},onCloseButtonTap_:function(){extensions.navigation.navigateTo({page:Page.LIST})},isControlled_:function(){return extensions.isControlled(this.data)},isEnabled_:function(){return extensions.isEnabled(this.data.state)},isEnableToggleEnabled_:function(){return extensions.userCanChangeEnablement(this.data)},hasDependentExtensions_:function(){return this.data.dependentExtensions.length>0},hasWarnings_:function(){return this.data.disableReasons.corruptInstall||this.data.disableReasons.suspiciousInstall||this.data.disableReasons.updateRequired||!!this.data.blacklistText||this.data.runtimeWarnings.length>0},computeEnabledStyle_:function(){return this.isEnabled_()?"enabled-text":""},computeEnabledText_:function(state,onText,offText){return extensions.isEnabled(state)?onText:offText},computeInspectLabel_:function(view){return extensions.computeInspectableViewLabel(view)},shouldShowOptionsLink_:function(){return!!this.data.optionsPage},shouldShowOptionsSection_:function(){return this.data.incognitoAccess.isEnabled||this.data.fileAccess.isEnabled||this.data.runOnAllUrls.isEnabled||this.data.errorCollection.isEnabled},shouldShowIncognitoOption_:function(){return this.data.incognitoAccess.isEnabled&&this.incognitoAvailable},onEnableChange_:function(){this.delegate.setItemEnabled(this.data.id,this.$["enable-toggle"].checked)},onInspectTap_:function(e){this.delegate.inspectItemView(this.data.id,e.model.item)},onExtensionOptionsTap_:function(){this.delegate.showItemOptionsPage(this.data)},onReloadTap_:function(){this.delegate.reloadItem(this.data.id).catch(loadError=>{this.fire("load-error",loadError)})},onRemoveTap_:function(){this.delegate.deleteItem(this.data.id)},onRepairTap_:function(){this.delegate.repairItem(this.data.id)},onLoadPathTap_:function(){this.delegate.showInFolder(this.data.id)},onAllowIncognitoChange_:function(){this.delegate.setItemAllowedIncognito(this.data.id,this.$$("#allow-incognito").checked)},onAllowOnFileUrlsChange_:function(){this.delegate.setItemAllowedOnFileUrls(this.data.id,this.$$("#allow-on-file-urls").checked)},onAllowOnAllSitesChange_:function(){this.delegate.setItemAllowedOnAllSites(this.data.id,this.$$("#allow-on-all-sites").checked)},onCollectErrorsChange_:function(){this.delegate.setItemCollectsErrors(this.data.id,this.$$("#collect-errors").checked)},onExtensionWebSiteTap_:function(){this.delegate.openUrl(this.data.manifestHomePageUrl)},onViewInStoreTap_:function(){this.delegate.openUrl(this.data.webStoreUrl)},computeDependentEntry_:function(item){return loadTimeData.getStringF("itemDependentEntry",item.name,item.id)},computeSourceString_:function(){return this.data.locationText||extensions.getItemSourceString(extensions.getItemSource(this.data))},getIndicatorIcon_:function(type){switch(type){case"POLICY":return"cr20:domain";case"CHILD_CUSTODIAN":return"cr:account-child-invert";case"SUPERVISED_USER_CUSTODIAN":return"cr:supervisor-account";default:return""}}});return{DetailView:DetailView}});
// Copyright (c) 2011 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
cr.define("cr.ui",function(){var DragWrapperDelegate=function(){};DragWrapperDelegate.prototype={shouldAcceptDrag:assertNotReached,doDragEnter:assertNotReached,doDragLeave:assertNotReached,doDragOver:assertNotReached,doDrop:assertNotReached};function DragWrapper(target,delegate){this.initialize(target,delegate)}DragWrapper.prototype={initialize:function(target,delegate){target.addEventListener("dragenter",this.onDragEnter_.bind(this));target.addEventListener("dragover",this.onDragOver_.bind(this));target.addEventListener("drop",this.onDrop_.bind(this));target.addEventListener("dragleave",this.onDragLeave_.bind(this));this.target_=target;this.delegate_=delegate},dragEnters_:0,get isCurrentDragTarget(){return this.target_.classList.contains("drag-target")},onDragEnter_:function(e){if(++this.dragEnters_==1){if(this.delegate_.shouldAcceptDrag(e)){this.target_.classList.add("drag-target");this.delegate_.doDragEnter(e)}}else{this.onDragOver_(e)}},onDragOver_:function(e){if(!this.target_.classList.contains("drag-target"))return;this.delegate_.doDragOver(e)},onDrop_:function(e){this.dragEnters_=0;if(!this.target_.classList.contains("drag-target"))return;this.target_.classList.remove("drag-target");this.delegate_.doDrop(e)},onDragLeave_:function(e){if(--this.dragEnters_>0)return;this.target_.classList.remove("drag-target");this.delegate_.doDragLeave(e)}};return{DragWrapper:DragWrapper,DragWrapperDelegate:DragWrapperDelegate}});
// Copyright 2016 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
cr.define("extensions",function(){"use strict";function DragAndDropHandler(dragEnabled,target){this.dragEnabled=dragEnabled;this.eventTarget_=target}DragAndDropHandler.prototype={shouldAcceptDrag:function(e){if(!this.dragEnabled)return false;return!!e.dataTransfer.types&&e.dataTransfer.types.indexOf("Files")>-1},doDragEnter:function(){chrome.developerPrivate.notifyDragInstallInProgress();this.eventTarget_.dispatchEvent(new CustomEvent("extension-drag-started"))},doDragLeave:function(){this.fireDragEnded_()},doDragOver:function(e){e.preventDefault()},doDrop:function(e){this.fireDragEnded_();if(e.dataTransfer.files.length!=1)return;let handled=false;let item=e.dataTransfer.items[0];if(item.kind==="file"&&item.webkitGetAsEntry().isDirectory){handled=true;this.handleDirectoryDrop_()}else if(/\.(crx|user\.js|zip)$/i.test(e.dataTransfer.files[0].name)){handled=true;this.handleFileDrop_()}if(handled)e.preventDefault()},handleFileDrop_:function(){chrome.developerPrivate.installDroppedFile()},handleDirectoryDrop_:function(){chrome.developerPrivate.loadUnpacked({failQuietly:true,populateError:true,useDraggedPath:true},loadError=>{if(loadError){this.eventTarget_.dispatchEvent(new CustomEvent("drag-and-drop-load-error",{detail:loadError}))}})},fireDragEnded_:function(){this.eventTarget_.dispatchEvent(new CustomEvent("extension-drag-ended"))}};return{DragAndDropHandler:DragAndDropHandler}});
// Copyright 2016 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
(function(){"use strict";Polymer({is:"extensions-drop-overlay",properties:{dragEnabled:{type:Boolean,observer:"dragEnabledChanged_"}},created:function(){this.hidden=true;const dragTarget=document.documentElement;this.dragWrapperHandler_=new extensions.DragAndDropHandler(true,dragTarget);dragTarget.addEventListener("extension-drag-started",()=>{this.hidden=false});dragTarget.addEventListener("extension-drag-ended",()=>{this.hidden=true});dragTarget.addEventListener("drag-and-drop-load-error",e=>{this.fire("load-error",e.detail)});this.dragWrapper_=new cr.ui.DragWrapper(dragTarget,this.dragWrapperHandler_)},dragEnabledChanged_:function(dragEnabled){this.dragWrapperHandler_.dragEnabled=dragEnabled}})})();
// Copyright (c) 2012 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
cr.define("cr.ui",function(){var CLASS_NAME="focus-outline-visible";function FocusOutlineManager(doc){this.classList_=doc.documentElement.classList;var onEvent=function(focusByKeyboard,e){if(this.focusByKeyboard_===focusByKeyboard)return;this.focusByKeyboard_=focusByKeyboard;this.updateVisibility()};doc.addEventListener("keydown",onEvent.bind(this,true),true);doc.addEventListener("mousedown",onEvent.bind(this,false),true);doc.addEventListener("focusout",function(event){window.setTimeout(function(){if(!doc.hasFocus()){this.focusByKeyboard_=true;this.updateVisibility()}}.bind(this),0)}.bind(this));this.updateVisibility()}FocusOutlineManager.prototype={focusByKeyboard_:true,updateVisibility:function(){this.visible=this.focusByKeyboard_},set visible(visible){this.classList_.toggle(CLASS_NAME,visible)},get visible(){return this.classList_.contains(CLASS_NAME)}};var docsToManager=new Map;FocusOutlineManager.forDocument=function(doc){var manager=docsToManager.get(doc);if(!manager){manager=new FocusOutlineManager(doc);docsToManager.set(doc,manager)}return manager};return{FocusOutlineManager:FocusOutlineManager}});Polymer.IronResizableBehavior={properties:{_parentResizable:{type:Object,observer:"_parentResizableChanged"},_notifyingDescendant:{type:Boolean,value:false}},listeners:{"iron-request-resize-notifications":"_onIronRequestResizeNotifications"},created:function(){this._interestedResizables=[];this._boundNotifyResize=this.notifyResize.bind(this)},attached:function(){this._requestResizeNotifications()},detached:function(){if(this._parentResizable){this._parentResizable.stopResizeNotificationsFor(this)}else{window.removeEventListener("resize",this._boundNotifyResize)}this._parentResizable=null},notifyResize:function(){if(!this.isAttached){return}this._interestedResizables.forEach(function(resizable){if(this.resizerShouldNotify(resizable)){this._notifyDescendant(resizable)}},this);this._fireResize()},assignParentResizable:function(parentResizable){this._parentResizable=parentResizable},stopResizeNotificationsFor:function(target){var index=this._interestedResizables.indexOf(target);if(index>-1){this._interestedResizables.splice(index,1);this.unlisten(target,"iron-resize","_onDescendantIronResize")}},resizerShouldNotify:function(element){return true},_onDescendantIronResize:function(event){if(this._notifyingDescendant){event.stopPropagation();return}if(!Polymer.Settings.useShadow){this._fireResize()}},_fireResize:function(){this.fire("iron-resize",null,{node:this,bubbles:false})},_onIronRequestResizeNotifications:function(event){var target=Polymer.dom(event).rootTarget;if(target===this){return}if(this._interestedResizables.indexOf(target)===-1){this._interestedResizables.push(target);this.listen(target,"iron-resize","_onDescendantIronResize")}target.assignParentResizable(this);this._notifyDescendant(target);event.stopPropagation()},_parentResizableChanged:function(parentResizable){if(parentResizable){window.removeEventListener("resize",this._boundNotifyResize)}},_notifyDescendant:function(descendant){if(!this.isAttached){return}this._notifyingDescendant=true;descendant.notifyResize();this._notifyingDescendant=false},_requestResizeNotifications:function(){if(!this.isAttached)return;if(document.readyState==="loading"){var _requestResizeNotifications=this._requestResizeNotifications.bind(this);document.addEventListener("readystatechange",function readystatechanged(){document.removeEventListener("readystatechange",readystatechanged);_requestResizeNotifications()})}else{this.fire("iron-request-resize-notifications",null,{node:this,bubbles:true,cancelable:true});if(!this._parentResizable){window.addEventListener("resize",this._boundNotifyResize);this.notifyResize()}}}};Polymer({is:"iron-collapse",behaviors:[Polymer.IronResizableBehavior],properties:{horizontal:{type:Boolean,value:false,observer:"_horizontalChanged"},opened:{type:Boolean,value:false,notify:true,observer:"_openedChanged"},transitioning:{type:Boolean,notify:true,readOnly:true},noAnimation:{type:Boolean},_desiredSize:{type:String,value:""}},get dimension(){return this.horizontal?"width":"height"},get _dimensionMax(){return this.horizontal?"maxWidth":"maxHeight"},get _dimensionMaxCss(){return this.horizontal?"max-width":"max-height"},hostAttributes:{role:"group","aria-hidden":"true"},listeners:{transitionend:"_onTransitionEnd"},toggle:function(){this.opened=!this.opened},show:function(){this.opened=true},hide:function(){this.opened=false},updateSize:function(size,animated){size=size==="auto"?"":size;var willAnimate=animated&&!this.noAnimation&&this.isAttached&&this._desiredSize!==size;this._desiredSize=size;this._updateTransition(false);if(willAnimate){var startSize=this._calcSize();if(size===""){this.style[this._dimensionMax]="";size=this._calcSize()}this.style[this._dimensionMax]=startSize;this.scrollTop=this.scrollTop;this._updateTransition(true);willAnimate=size!==startSize}this.style[this._dimensionMax]=size;if(!willAnimate){this._transitionEnd()}},enableTransition:function(enabled){Polymer.Base._warn("`enableTransition()` is deprecated, use `noAnimation` instead.");this.noAnimation=!enabled},_updateTransition:function(enabled){this.style.transitionDuration=enabled&&!this.noAnimation?"":"0s"},_horizontalChanged:function(){this.style.transitionProperty=this._dimensionMaxCss;var otherDimension=this._dimensionMax==="maxWidth"?"maxHeight":"maxWidth";this.style[otherDimension]="";this.updateSize(this.opened?"auto":"0px",false)},_openedChanged:function(){this.setAttribute("aria-hidden",!this.opened);this._setTransitioning(true);this.toggleClass("iron-collapse-closed",false);this.toggleClass("iron-collapse-opened",false);this.updateSize(this.opened?"auto":"0px",true);if(this.opened){this.focus()}},_transitionEnd:function(){this.style[this._dimensionMax]=this._desiredSize;this.toggleClass("iron-collapse-closed",!this.opened);this.toggleClass("iron-collapse-opened",this.opened);this._updateTransition(false);this.notifyResize();this._setTransitioning(false)},_onTransitionEnd:function(event){if(Polymer.dom(event).rootTarget===this){this._transitionEnd()}},_calcSize:function(){return this.getBoundingClientRect()[this.dimension]+"px"}});Polymer.PaperButtonBehaviorImpl={properties:{elevation:{type:Number,reflectToAttribute:true,readOnly:true}},observers:["_calculateElevation(focused, disabled, active, pressed, receivedFocusFromKeyboard)","_computeKeyboardClass(receivedFocusFromKeyboard)"],hostAttributes:{role:"button",tabindex:"0",animated:true},_calculateElevation:function(){var e=1;if(this.disabled){e=0}else if(this.active||this.pressed){e=4}else if(this.receivedFocusFromKeyboard){e=3}this._setElevation(e)},_computeKeyboardClass:function(receivedFocusFromKeyboard){this.toggleClass("keyboard-focus",receivedFocusFromKeyboard)},_spaceKeyDownHandler:function(event){Polymer.IronButtonStateImpl._spaceKeyDownHandler.call(this,event);if(this.hasRipple()&&this.getRipple().ripples.length<1){this._ripple.uiDownAction()}},_spaceKeyUpHandler:function(event){Polymer.IronButtonStateImpl._spaceKeyUpHandler.call(this,event);if(this.hasRipple()){this._ripple.uiUpAction()}}};Polymer.PaperButtonBehavior=[Polymer.IronButtonState,Polymer.IronControlState,Polymer.PaperRippleBehavior,Polymer.PaperButtonBehaviorImpl];Polymer({is:"paper-button",behaviors:[Polymer.PaperButtonBehavior],properties:{raised:{type:Boolean,reflectToAttribute:true,value:false,observer:"_calculateElevation"}},_calculateElevation:function(){if(!this.raised){this._setElevation(0)}else{Polymer.PaperButtonBehaviorImpl._calculateElevation.apply(this)}}});
// Copyright (c) 2012 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
var parseHtmlSubset=function(){"use strict";var allowedAttributes={href:function(node,value){return node.tagName=="A"&&(value.startsWith("chrome://")||value.startsWith("https://"))},target:function(node,value){return node.tagName=="A"&&value=="_blank"}};var allowedTags=["A","B","SPAN","STRONG"];function merge(var_args){var clone={};for(var i=0;i<arguments.length;++i){if(typeof arguments[i]=="object"){for(var key in arguments[i]){if(arguments[i].hasOwnProperty(key))clone[key]=arguments[i][key]}}}return clone}function walk(n,f){f(n);for(var i=0;i<n.childNodes.length;i++){walk(n.childNodes[i],f)}}function assertElement(tags,node){if(tags.indexOf(node.tagName)==-1)throw Error(node.tagName+" is not supported")}function assertAttribute(attrs,attrNode,node){var n=attrNode.nodeName;var v=attrNode.nodeValue;if(!attrs.hasOwnProperty(n)||!attrs[n](node,v))throw Error(node.tagName+"["+n+'="'+v+'"] is not supported')}return function(s,opt_extraTags,opt_extraAttrs){var extraTags=(opt_extraTags||[]).map(function(str){return str.toUpperCase()});var tags=allowedTags.concat(extraTags);var attrs=merge(allowedAttributes,opt_extraAttrs||{});var doc=document.implementation.createHTMLDocument("");var r=doc.createRange();r.selectNode(doc.body);var df=r.createContextualFragment(s);walk(df,function(node){switch(node.nodeType){case Node.ELEMENT_NODE:assertElement(tags,node);var nodeAttrs=node.attributes;for(var i=0;i<nodeAttrs.length;++i){assertAttribute(attrs,nodeAttrs[i],node)}break;case Node.COMMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:case Node.TEXT_NODE:break;default:throw Error("Node type "+node.nodeType+" is not supported")}});return df}}();
// Copyright 2015 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
var I18nBehavior={properties:{locale:{type:String,value:""}},i18nRaw_:function(id,var_args){return arguments.length==1?loadTimeData.getString(id):loadTimeData.getStringF.apply(loadTimeData,arguments)},i18n:function(id,var_args){var rawString=this.i18nRaw_.apply(this,arguments);return parseHtmlSubset("<b>"+rawString+"</b>").firstChild.textContent},i18nAdvanced:function(id,opts){opts=opts||{};var args=[id].concat(opts.substitutions||[]);var rawString=this.i18nRaw_.apply(this,args);return loadTimeData.sanitizeInnerHtml(rawString,opts)},i18nDynamic:function(locale,id,var_args){return this.i18n.apply(this,Array.prototype.slice.call(arguments,1))},i18nExists:function(id){return loadTimeData.valueExists(id)},i18nUpdateLocale:function(){this.locale=loadTimeData.getString("language")}};I18nBehavior.Proto;
// Copyright 2016 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
cr.define("extensions",function(){"use strict";function visibleLineCount(totalCount,oppositeCount){const MAX_VISIBLE_LINES=1e3;const max=Math.max(MAX_VISIBLE_LINES/2,MAX_VISIBLE_LINES-oppositeCount);return Math.min(max,totalCount)}const CodeSection=Polymer({is:"extensions-code-section",behaviors:[I18nBehavior],properties:{code:{type:Object,value:null},highlighted_:String,before_:String,after_:String,highlightDescription_:String,lineNumbers_:String,truncatedBefore_:Number,truncatedAfter_:Number,couldNotDisplayCode:String},observers:["onCodeChanged_(code.*)"],onCodeChanged_:function(){if(!this.code||!this.code.beforeHighlight&&!this.code.highlight&&!this.code.afterHighlight){this.highlighted_="";this.highlightDescription_="";this.before_="";this.after_="";this.lineNumbers_="";return}const before=this.code.beforeHighlight;const highlight=this.code.highlight;const after=this.code.afterHighlight;const linesBefore=before?before.split("\n"):[];const linesAfter=after?after.split("\n"):[];const visibleLineCountBefore=visibleLineCount(linesBefore.length,linesAfter.length);const visibleLineCountAfter=visibleLineCount(linesAfter.length,linesBefore.length);const visibleBefore=linesBefore.slice(linesBefore.length-visibleLineCountBefore).join("\n");let visibleAfter=linesAfter.slice(0,visibleLineCountAfter).join("\n");if(visibleAfter.charAt(visibleAfter.length-1)=="\n")visibleAfter+=" ";this.highlighted_=highlight;this.highlightDescription_=this.getAccessibilityHighlightDescription_(linesBefore.length,highlight.split("\n").length);this.before_=visibleBefore;this.after_=visibleAfter;this.truncatedBefore_=linesBefore.length-visibleLineCountBefore;this.truncatedAfter_=linesAfter.length-visibleLineCountAfter;let visibleCode=visibleBefore+highlight+visibleAfter;this.setLineNumbers_(this.truncatedBefore_+1,this.truncatedBefore_+visibleCode.split("\n").length);this.scrollToHighlight_(visibleLineCountBefore)},getLinesNotShownLabel_(lineCount,stringSingular,stringPluralTemplate){return lineCount==1?stringSingular:loadTimeData.substituteString(stringPluralTemplate,lineCount)},setLineNumbers_:function(start,end){let lineNumbers="";for(let i=start;i<=end;++i)lineNumbers+=i+"\n";this.lineNumbers_=lineNumbers},scrollToHighlight_:function(linesBeforeHighlight){const CSS_LINE_HEIGHT=20;const highlightTop=linesBeforeHighlight*CSS_LINE_HEIGHT;const targetTop=highlightTop-this.clientHeight*.5;this.$["scroll-container"].scrollTo({top:targetTop})},getAccessibilityHighlightDescription_:function(lineStart,numLines){if(numLines>1){return this.i18n("accessibilityErrorMultiLine",lineStart.toString(),(lineStart+numLines-1).toString())}else{return this.i18n("accessibilityErrorLine",lineStart.toString())}}});return{CodeSection:CodeSection}});
// Copyright 2016 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
let ManifestError;let RuntimeError;cr.define("extensions",function(){"use strict";class ErrorPageDelegate{deleteErrors(extensionId,errorIds,type){}requestFileSource(args){}}function getRelativeUrl(url,error){const fullUrl="chrome-extension://"+error.extensionId+"/";return url.startsWith(fullUrl)?url.substring(fullUrl.length):url}function getErrorSeverityText_(item,log,warn,error){if(item.type==chrome.developerPrivate.ErrorType.RUNTIME){switch(item.severity){case chrome.developerPrivate.ErrorLevel.LOG:return log;case chrome.developerPrivate.ErrorLevel.WARN:return warn;case chrome.developerPrivate.ErrorLevel.ERROR:return error}assertNotReached()}assert(item.type==chrome.developerPrivate.ErrorType.MANIFEST);return warn}const ErrorPage=Polymer({is:"extensions-error-page",behaviors:[CrContainerShadowBehavior],properties:{data:Object,delegate:Object,entries_:Array,code_:Object,selectedEntry_:{type:Number,observer:"onSelectedErrorChanged_"},selectedStackFrame_:{type:Object,value:function(){return null}}},observers:["observeDataChanges_(data.*)"],listeners:{"view-enter-start":"onViewEnterStart_"},ready:function(){cr.ui.FocusOutlineManager.forDocument(document)},getSelectedError:function(){return this.entries_[this.selectedEntry_]},onViewEnterStart_:function(){Polymer.RenderStatus.afterNextRender(this,()=>cr.ui.focusWithoutInk(this.$.closeButton))},getContextUrl_:function(error,unknown){return error.contextUrl?getRelativeUrl(error.contextUrl,error):unknown},observeDataChanges_:function(){const errors=this.data.manifestErrors.concat(this.data.runtimeErrors);this.entries_=errors;this.selectedEntry_=-1;if(this.entries_.length)this.selectedEntry_=0},onCloseButtonTap_:function(){extensions.navigation.navigateTo({page:Page.LIST})},onClearAllTap_:function(){const ids=this.entries_.map(entry=>entry.id);this.delegate.deleteErrors(this.data.id,ids)},computeErrorIcon_:function(error){return getErrorSeverityText_(error,"info","warning","error")},computeErrorTypeLabel_:function(error){return getErrorSeverityText_(error,loadTimeData.getString("logLevel"),loadTimeData.getString("warnLevel"),loadTimeData.getString("errorLevel"))},onDeleteErrorAction_:function(e){if(e.type=="keydown"&&!(e.code=="Space"||e.code=="Enter"))return;this.delegate.deleteErrors(this.data.id,[e.model.item.id]);e.stopPropagation()},onSelectedErrorChanged_:function(){this.code_=null;if(this.selectedEntry_<0)return;const error=this.getSelectedError();const args={extensionId:error.extensionId,message:error.message};switch(error.type){case chrome.developerPrivate.ErrorType.MANIFEST:args.pathSuffix=error.source;args.manifestKey=error.manifestKey;args.manifestSpecific=error.manifestSpecific;break;case chrome.developerPrivate.ErrorType.RUNTIME:args.pathSuffix=new URL(error.source).pathname.slice(1);args.lineNumber=error.stackTrace&&error.stackTrace[0]?error.stackTrace[0].lineNumber:0;this.selectedStackFrame_=error.stackTrace&&error.stackTrace[0]?error.stackTrace[0]:null;break}this.delegate.requestFileSource(args).then(code=>this.code_=code)},computeIsRuntimeError_:function(item){return item.type==chrome.developerPrivate.ErrorType.RUNTIME},getStackTraceLabel_:function(frame){let description=getRelativeUrl(frame.url,this.getSelectedError())+":"+frame.lineNumber;if(frame.functionName){const functionName=frame.functionName=="(anonymous function)"?loadTimeData.getString("anonymousFunction"):frame.functionName;description+=" ("+functionName+")"}return description},getStackFrameClass_:function(frame){return frame==this.selectedStackFrame_?"selected":""},getStackFrameTabIndex_:function(frame){return frame==this.selectedStackFrame_?0:-1},shouldDisplayFrame_:function(url){return!/^extensions::/.test(url)},updateSelected_:function(frame){this.selectedStackFrame_=assert(frame);const selectedError=this.getSelectedError();this.delegate.requestFileSource({extensionId:selectedError.extensionId,message:selectedError.message,pathSuffix:getRelativeUrl(frame.url,selectedError),lineNumber:frame.lineNumber}).then(code=>this.code_=code)},onStackFrameTap_:function(e){const frame=e.model.item;this.updateSelected_(frame)},onStackKeydown_:function(e){let direction=0;if(e.key=="ArrowDown")direction=1;else if(e.key=="ArrowUp")direction=-1;else return;e.preventDefault();let list=e.target.parentElement.querySelectorAll("li");for(let i=0;i<list.length;++i){if(list[i].classList.contains("selected")){let polymerEvent=e;let frame=polymerEvent.model.item.stackTrace[i+direction];if(frame){this.updateSelected_(frame);list[i+direction].focus()}return}}},computeErrorClass_:function(index){return index==this.selectedEntry_?"selected":""},iconName_:function(index){return index==this.selectedEntry_?"icon-expand-less":"icon-expand-more"},isOpened_:function(index){return index==this.selectedEntry_},isAriaExpanded_:function(index){return this.isOpened_(index).toString()},onErrorItemAction_:function(e){if(e.type=="keydown"&&!(e.code=="Space"||e.code=="Enter"))return;this.selectedEntry_=this.selectedEntry_==e.model.index?-1:e.model.index}});return{ErrorPage:ErrorPage,ErrorPageDelegate:ErrorPageDelegate}});
// Copyright 2016 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
Polymer({is:"cr-dialog",properties:{open:{type:Boolean,value:false,reflectToAttribute:true},closeText:String,ignorePopstate:{type:Boolean,value:false},ignoreEnterKey:{type:Boolean,value:false},noCancel:{type:Boolean,value:false},showCloseButton:{type:Boolean,value:false}},listeners:{pointerdown:"onPointerdown_"},intersectionObserver_:null,mutationObserver_:null,ready:function(){window.addEventListener("popstate",function(){if(!this.ignorePopstate&&this.$.dialog.open)this.cancel()}.bind(this));if(!this.ignoreEnterKey)this.addEventListener("keypress",this.onKeypress_.bind(this));if(this.noCancel)this.addEventListener("cancel",this.onCancel_.bind(this))},attached:function(){var mutationObserverCallback=function(){if(this.$.dialog.open)this.addIntersectionObserver_();else this.removeIntersectionObserver_()}.bind(this);this.mutationObserver_=new MutationObserver(mutationObserverCallback);this.mutationObserver_.observe(this.$.dialog,{attributes:true,attributeFilter:["open"]});mutationObserverCallback()},detached:function(){this.removeIntersectionObserver_();if(this.mutationObserver_){this.mutationObserver_.disconnect();this.mutationObserver_=null}},addIntersectionObserver_:function(){if(this.intersectionObserver_)return;var bodyContainer=this.$$(".body-container");var bottomMarker=this.$.bodyBottomMarker;var topMarker=this.$.bodyTopMarker;var callback=function(entries){for(var i=0;i<entries.length;i++){var target=entries[i].target;assert(target==bottomMarker||target==topMarker);var classToToggle=target==bottomMarker?"bottom-scrollable":"top-scrollable";bodyContainer.classList.toggle(classToToggle,entries[i].intersectionRatio==0)}};this.intersectionObserver_=new IntersectionObserver(callback,{root:bodyContainer,threshold:0});this.intersectionObserver_.observe(bottomMarker);this.intersectionObserver_.observe(topMarker)},removeIntersectionObserver_:function(){if(this.intersectionObserver_){this.intersectionObserver_.disconnect();this.intersectionObserver_=null}},showModal:function(){this.$.dialog.showModal();this.open=this.$.dialog.open},cancel:function(){this.fire("cancel");this.$.dialog.close();this.open=this.$.dialog.open},close:function(){this.$.dialog.close("success");this.open=this.$.dialog.open},onCloseKeypress_:function(e){e.stopPropagation()},getNative:function(){return this.$.dialog},getCloseButton:function(){return this.$.close},onKeypress_:function(e){if(e.key!="Enter")return;if(e.target!=this&&e.target.tagName!="PAPER-INPUT")return;var actionButton=this.querySelector(".action-button:not([disabled]):not([hidden])");if(actionButton){actionButton.click();e.preventDefault()}},onCancel_:function(e){if(this.noCancel)e.preventDefault()},onPointerdown_:function(e){if(e.button!=0||e.composedPath()[0].tagName!=="DIALOG")return;this.$.dialog.animate([{transform:"scale(1)",offset:0},{transform:"scale(1.02)",offset:.4},{transform:"scale(1.02)",offset:.6},{transform:"scale(1)",offset:1}],{duration:180,easing:"ease-in-out",iterations:1});e.preventDefault()}});
// Copyright 2017 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
cr.define("extensions",function(){"use strict";const InstallWarningsDialog=Polymer({is:"extensions-install-warnings-dialog",properties:{installWarnings:Array},attached:function(){this.$.dialog.showModal()},onOkTap_:function(){this.$.dialog.close()}});return{InstallWarningsDialog:InstallWarningsDialog}});(function(){"use strict";Polymer.IronA11yAnnouncer=Polymer({is:"iron-a11y-announcer",properties:{mode:{type:String,value:"polite"},_text:{type:String,value:""}},created:function(){if(!Polymer.IronA11yAnnouncer.instance){Polymer.IronA11yAnnouncer.instance=this}document.body.addEventListener("iron-announce",this._onIronAnnounce.bind(this))},announce:function(text){this._text="";this.async(function(){this._text=text},100)},_onIronAnnounce:function(event){if(event.detail&&event.detail.text){this.announce(event.detail.text)}}});Polymer.IronA11yAnnouncer.instance=null;Polymer.IronA11yAnnouncer.requestAvailability=function(){if(!Polymer.IronA11yAnnouncer.instance){Polymer.IronA11yAnnouncer.instance=document.createElement("iron-a11y-announcer")}document.body.appendChild(Polymer.IronA11yAnnouncer.instance)}})();
// Copyright 2015 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
cr.define("extensions",function(){class ItemDelegate{deleteItem(id){}setItemEnabled(id,isEnabled){}setItemAllowedIncognito(id,isAllowedIncognito){}setItemAllowedOnFileUrls(id,isAllowedOnFileUrls){}setItemAllowedOnAllSites(id,isAllowedOnAllSites){}setItemCollectsErrors(id,collectsErrors){}inspectItemView(id,view){}openUrl(url){}reloadItem(id){}repairItem(id){}showItemOptionsPage(extension){}showInFolder(id){}getExtensionSize(id){}}const Item=Polymer({is:"extensions-item",behaviors:[I18nBehavior,extensions.ItemBehavior],properties:{delegate:{type:Object},inDevMode:{type:Boolean,value:false},data:{type:Object},showingDetails_:{type:Boolean,value:false}},observers:["observeIdVisibility_(inDevMode, showingDetails_, data.id)"],a11yAssociation_:function(){return loadTimeData.getStringF("extensionA11yAssociation",this.data.name)},observeIdVisibility_:function(inDevMode,showingDetails,id){Polymer.dom.flush();const idElement=this.$$("#extension-id");if(idElement){assert(this.data);idElement.innerHTML=this.i18n("itemId",this.data.id)}},shouldShowErrorsButton_:function(){if(this.data.installWarnings&&this.data.installWarnings.length>0)return true;return this.data.manifestErrors.length>0||this.data.runtimeErrors.length>0},onRemoveTap_:function(){this.delegate.deleteItem(this.data.id)},onEnableChange_:function(){this.delegate.setItemEnabled(this.data.id,this.$["enable-toggle"].checked)},onErrorsTap_:function(){if(this.data.installWarnings&&this.data.installWarnings.length>0){this.fire("show-install-warnings",this.data.installWarnings);return}extensions.navigation.navigateTo({page:Page.ERRORS,extensionId:this.data.id})},onDetailsTap_:function(){extensions.navigation.navigateTo({page:Page.DETAILS,extensionId:this.data.id})},onInspectTap_:function(e){this.delegate.inspectItemView(this.data.id,this.data.views[0])},onExtraInspectTap_:function(){extensions.navigation.navigateTo({page:Page.DETAILS,extensionId:this.data.id})},onReloadTap_:function(){this.delegate.reloadItem(this.data.id).catch(loadError=>{this.fire("load-error",loadError)})},onRepairTap_:function(){this.delegate.repairItem(this.data.id)},isControlled_:function(){return extensions.isControlled(this.data)},isEnabled_:function(){return extensions.isEnabled(this.data.state)},isEnableToggleEnabled_:function(){return extensions.userCanChangeEnablement(this.data)},showEnableToggle_:function(){return!this.isTerminated_()&&!this.data.disableReasons.corruptInstall},isTerminated_:function(){return this.data.state==chrome.developerPrivate.ExtensionState.TERMINATED},computeClasses_:function(){let classes=this.isEnabled_()?"enabled":"disabled";if(this.inDevMode)classes+=" dev-mode";return classes},computeSourceIndicatorIcon_:function(){switch(extensions.getItemSource(this.data)){case SourceType.POLICY:return"communication:business";case SourceType.SIDELOADED:return"input";case SourceType.UNKNOWN:return"input";case SourceType.UNPACKED:return"extensions-icons:unpacked";case SourceType.WEBSTORE:return""}assertNotReached()},computeSourceIndicatorText_:function(){if(this.data.locationText)return this.data.locationText;const sourceType=extensions.getItemSource(this.data);return sourceType==SourceType.WEBSTORE?"":extensions.getItemSourceString(sourceType)},computeInspectViewsHidden_:function(){return!this.data.views||this.data.views.length==0},computeFirstInspectTitle_:function(){return this.data.views.length>0?extensions.computeInspectableViewLabel(this.data.views[0]):""},computeFirstInspectLabel_:function(){let label=this.computeFirstInspectTitle_();return label&&this.data.views.length>1?label+",":label},computeExtraViewsHidden_:function(){return this.data.views.length<=1},computeDevReloadButtonHidden_:function(){const showIcon=this.data.location==chrome.developerPrivate.Location.UNPACKED&&this.data.state==chrome.developerPrivate.ExtensionState.ENABLED;return!showIcon},computeExtraInspectLabel_:function(){return this.i18n("itemInspectViewsExtra",(this.data.views.length-1).toString())},hasWarnings_:function(){return this.data.disableReasons.corruptInstall||this.data.disableReasons.suspiciousInstall||this.data.runtimeWarnings.length>0||!!this.data.blacklistText},computeWarningsClasses_:function(){return this.data.blacklistText?"severe":"mild"}});return{Item:Item,ItemDelegate:ItemDelegate}});
// Copyright 2015 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
cr.define("extensions",function(){const ItemList=Polymer({is:"extensions-item-list",behaviors:[CrContainerShadowBehavior,I18nBehavior],properties:{apps:Array,extensions:Array,delegate:Object,inDevMode:{type:Boolean,value:false},filter:{type:String},computedFilter_:{type:String,computed:"computeFilter_(filter)",observer:"announceSearchResults_"},shownExtensionsCount_:{type:Number,value:0},shownAppsCount_:{type:Number,value:0}},getDetailsButton:function(id){return this.$$(`#${id} /deep/ #details-button`)},getErrorsButton:function(id){return this.$$(`#${id} /deep/ #errors-button`)},computeFilter_:function(){const formattedFilter=this.filter.trim().toLowerCase();return formattedFilter?i=>i.name.toLowerCase().includes(formattedFilter):null},shouldShowEmptyItemsMessage_:function(){return this.apps.length===0&&this.extensions.length===0},shouldShowEmptySearchMessage_:function(){return!this.shouldShowEmptyItemsMessage_()&&this.shownAppsCount_===0&&this.shownExtensionsCount_===0},onNoExtensionsTap_:function(e){if(e.target.tagName=="A")chrome.metricsPrivate.recordUserAction("Options_GetMoreExtensions")},announceSearchResults_:function(){if(this.computedFilter_){Polymer.IronA11yAnnouncer.requestAvailability();this.async(()=>{this.fire("iron-announce",{text:this.shouldShowEmptySearchMessage_()?this.i18n("noSearchResults"):this.i18n("searchResults",this.filter)})})}}});return{ItemList:ItemList}});Polymer.IronFormElementBehavior={properties:{name:{type:String},value:{notify:true,type:String},required:{type:Boolean,value:false},_parentForm:{type:Object}},attached(){if(!Polymer.Element){this.fire("iron-form-element-register")}},detached(){if(!Polymer.Element&&this._parentForm){this._parentForm.fire("iron-form-element-unregister",{target:this})}}};Polymer.IronValidatableBehaviorMeta=null;Polymer.IronValidatableBehavior={properties:{validator:{type:String},invalid:{notify:true,reflectToAttribute:true,type:Boolean,value:false,observer:"_invalidChanged"}},registered:function(){Polymer.IronValidatableBehaviorMeta=new Polymer.IronMeta({type:"validator"})},_invalidChanged:function(){if(this.invalid){this.setAttribute("aria-invalid","true")}else{this.removeAttribute("aria-invalid")}},get _validator(){return Polymer.IronValidatableBehaviorMeta&&Polymer.IronValidatableBehaviorMeta.byKey(this.validator)},hasValidator:function(){return this._validator!=null},validate:function(value){if(value===undefined&&this.value!==undefined)this.invalid=!this._getValidity(this.value);else this.invalid=!this._getValidity(value);return!this.invalid},_getValidity:function(value){if(this.hasValidator()){return this._validator.validate(value)}return true}};Polymer({is:"iron-input",behaviors:[Polymer.IronValidatableBehavior],properties:{bindValue:{type:String,value:""},value:{type:String,computed:"_computeValue(bindValue)"},allowedPattern:{type:String},autoValidate:{type:Boolean,value:false},_inputElement:Object},observers:["_bindValueChanged(bindValue, _inputElement)"],listeners:{input:"_onInput",keypress:"_onKeypress"},created:function(){Polymer.IronA11yAnnouncer.requestAvailability();this._previousValidInput="";this._patternAlreadyChecked=false},attached:function(){this._observer=Polymer.dom(this).observeNodes(function(info){this._initSlottedInput()}.bind(this))},detached:function(){if(this._observer){Polymer.dom(this).unobserveNodes(this._observer);this._observer=null}},get inputElement(){return this._inputElement},_initSlottedInput:function(){this._inputElement=this.getEffectiveChildren()[0];if(this.inputElement&&this.inputElement.value){this.bindValue=this.inputElement.value}this.fire("iron-input-ready")},get _patternRegExp(){var pattern;if(this.allowedPattern){pattern=new RegExp(this.allowedPattern)}else{switch(this.inputElement.type){case"number":pattern=/[0-9.,e-]/;break}}return pattern},_bindValueChanged:function(bindValue,inputElement){if(!inputElement){return}if(bindValue===undefined){inputElement.value=null}else if(bindValue!==inputElement.value){this.inputElement.value=bindValue}if(this.autoValidate){this.validate()}this.fire("bind-value-changed",{value:bindValue})},_onInput:function(){if(this.allowedPattern&&!this._patternAlreadyChecked){var valid=this._checkPatternValidity();if(!valid){this._announceInvalidCharacter("Invalid string of characters not entered.");this.inputElement.value=this._previousValidInput}}this.bindValue=this._previousValidInput=this.inputElement.value;this._patternAlreadyChecked=false},_isPrintable:function(event){var anyNonPrintable=event.keyCode==8||event.keyCode==9||event.keyCode==13||event.keyCode==27;var mozNonPrintable=event.keyCode==19||event.keyCode==20||event.keyCode==45||event.keyCode==46||event.keyCode==144||event.keyCode==145||event.keyCode>32&&event.keyCode<41||event.keyCode>111&&event.keyCode<124;return!anyNonPrintable&&!(event.charCode==0&&mozNonPrintable)},_onKeypress:function(event){if(!this.allowedPattern&&this.inputElement.type!=="number"){return}var regexp=this._patternRegExp;if(!regexp){return}if(event.metaKey||event.ctrlKey||event.altKey){return}this._patternAlreadyChecked=true;var thisChar=String.fromCharCode(event.charCode);if(this._isPrintable(event)&&!regexp.test(thisChar)){event.preventDefault();this._announceInvalidCharacter("Invalid character "+thisChar+" not entered.")}},_checkPatternValidity:function(){var regexp=this._patternRegExp;if(!regexp){return true}for(var i=0;i<this.inputElement.value.length;i++){if(!regexp.test(this.inputElement.value[i])){return false}}return true},validate:function(){if(!this.inputElement){this.invalid=false;return true}var valid=this.inputElement.checkValidity();if(valid){if(this.required&&this.bindValue===""){valid=false}else if(this.hasValidator()){valid=Polymer.IronValidatableBehavior.validate.call(this,this.bindValue)}}this.invalid=!valid;this.fire("iron-input-validate");return valid},_announceInvalidCharacter:function(message){this.fire("iron-announce",{text:message})},_computeValue:function(bindValue){return bindValue}});Polymer.PaperInputHelper={};Polymer.PaperInputHelper.NextLabelID=1;Polymer.PaperInputHelper.NextAddonID=1;Polymer.PaperInputHelper.NextInputID=1;Polymer.PaperInputBehaviorImpl={properties:{label:{type:String},value:{notify:true,type:String},disabled:{type:Boolean,value:false},invalid:{type:Boolean,value:false,notify:true},allowedPattern:{type:String},type:{type:String},list:{type:String},pattern:{type:String},required:{type:Boolean,value:false},errorMessage:{type:String},charCounter:{type:Boolean,value:false},noLabelFloat:{type:Boolean,value:false},alwaysFloatLabel:{type:Boolean,value:false},autoValidate:{type:Boolean,value:false},validator:{type:String},autocomplete:{type:String,value:"off"},autofocus:{type:Boolean,observer:"_autofocusChanged"},inputmode:{type:String},minlength:{type:Number},maxlength:{type:Number},min:{type:String},max:{type:String},step:{type:String},name:{type:String},placeholder:{type:String,value:""},readonly:{type:Boolean,value:false},size:{type:Number},autocapitalize:{type:String,value:"none"},autocorrect:{type:String,value:"off"},autosave:{type:String},results:{type:Number},accept:{type:String},multiple:{type:Boolean},_ariaDescribedBy:{type:String,value:""},_ariaLabelledBy:{type:String,value:""},_inputId:{type:String,value:""}},listeners:{"addon-attached":"_onAddonAttached"},keyBindings:{"shift+tab:keydown":"_onShiftTabDown"},hostAttributes:{tabindex:0},get inputElement(){if(!this.$){this.$={}}if(!this.$.input){this._generateInputId();this.$.input=this.$$("#"+this._inputId)}return this.$.input},get _focusableElement(){return this.inputElement},created:function(){this._typesThatHaveText=["date","datetime","datetime-local","month","time","week","file"]},attached:function(){this._updateAriaLabelledBy();if(!Polymer.Element&&this.inputElement&&this._typesThatHaveText.indexOf(this.inputElement.type)!==-1){this.alwaysFloatLabel=true}},_appendStringWithSpace:function(str,more){if(str){str=str+" "+more}else{str=more}return str},_onAddonAttached:function(event){var target=Polymer.dom(event).rootTarget;if(target.id){this._ariaDescribedBy=this._appendStringWithSpace(this._ariaDescribedBy,target.id)}else{var id="paper-input-add-on-"+Polymer.PaperInputHelper.NextAddonID++;target.id=id;this._ariaDescribedBy=this._appendStringWithSpace(this._ariaDescribedBy,id)}},validate:function(){return this.inputElement.validate()},_focusBlurHandler:function(event){Polymer.IronControlState._focusBlurHandler.call(this,event);if(this.focused&&!this._shiftTabPressed&&this._focusableElement){this._focusableElement.focus()}},_onShiftTabDown:function(event){var oldTabIndex=this.getAttribute("tabindex");this._shiftTabPressed=true;this.setAttribute("tabindex","-1");this.async(function(){this.setAttribute("tabindex",oldTabIndex);this._shiftTabPressed=false},1)},_handleAutoValidate:function(){if(this.autoValidate)this.validate()},updateValueAndPreserveCaret:function(newValue){try{var start=this.inputElement.selectionStart;this.value=newValue;this.inputElement.selectionStart=start;this.inputElement.selectionEnd=start}catch(e){this.value=newValue}},_computeAlwaysFloatLabel:function(alwaysFloatLabel,placeholder){return placeholder||alwaysFloatLabel},_updateAriaLabelledBy:function(){var label=Polymer.dom(this.root).querySelector("label");if(!label){this._ariaLabelledBy="";return}var labelledBy;if(label.id){labelledBy=label.id}else{labelledBy="paper-input-label-"+Polymer.PaperInputHelper.NextLabelID++;label.id=labelledBy}this._ariaLabelledBy=labelledBy},_generateInputId:function(){if(!this._inputId||this._inputId===""){this._inputId="input-"+Polymer.PaperInputHelper.NextInputID++}},_onChange:function(event){if(this.shadowRoot){this.fire(event.type,{sourceEvent:event},{node:this,bubbles:event.bubbles,cancelable:event.cancelable})}},_autofocusChanged:function(){if(this.autofocus&&this._focusableElement){var activeElement=document.activeElement;var isActiveElementValid=activeElement instanceof HTMLElement;var isSomeElementActive=isActiveElementValid&&activeElement!==document.body&&activeElement!==document.documentElement;if(!isSomeElementActive){this._focusableElement.focus()}}}};Polymer.PaperInputBehavior=[Polymer.IronControlState,Polymer.IronA11yKeysBehavior,Polymer.PaperInputBehaviorImpl];Polymer.PaperInputAddonBehavior={attached:function(){Polymer.dom.flush();this.fire("addon-attached")},update:function(state){}};Polymer({is:"paper-input-char-counter",behaviors:[Polymer.PaperInputAddonBehavior],properties:{_charCounterStr:{type:String,value:"0"}},update:function(state){if(!state.inputElement){return}state.value=state.value||"";var counter=state.value.toString().length.toString();if(state.inputElement.hasAttribute("maxlength")){counter+="/"+state.inputElement.getAttribute("maxlength")}this._charCounterStr=counter}});Polymer({is:"paper-input-container",properties:{noLabelFloat:{type:Boolean,value:false},alwaysFloatLabel:{type:Boolean,value:false},attrForValue:{type:String,value:"bind-value"},autoValidate:{type:Boolean,value:false},invalid:{observer:"_invalidChanged",type:Boolean,value:false},focused:{readOnly:true,type:Boolean,value:false,notify:true},_addons:{type:Array},_inputHasContent:{type:Boolean,value:false},_inputSelector:{type:String,value:"input,iron-input,textarea,.paper-input-input"},_boundOnFocus:{type:Function,value:function(){return this._onFocus.bind(this)}},_boundOnBlur:{type:Function,value:function(){return this._onBlur.bind(this)}},_boundOnInput:{type:Function,value:function(){return this._onInput.bind(this)}},_boundValueChanged:{type:Function,value:function(){return this._onValueChanged.bind(this)}}},listeners:{"addon-attached":"_onAddonAttached","iron-input-validate":"_onIronInputValidate"},get _valueChangedEvent(){return this.attrForValue+"-changed"},get _propertyForValue(){return Polymer.CaseMap.dashToCamelCase(this.attrForValue)},get _inputElement(){return Polymer.dom(this).querySelector(this._inputSelector)},get _inputElementValue(){return this._inputElement[this._propertyForValue]||this._inputElement.value},ready:function(){this.__isFirstValueUpdate=true;if(!this._addons){this._addons=[]}this.addEventListener("focus",this._boundOnFocus,true);this.addEventListener("blur",this._boundOnBlur,true)},attached:function(){if(this.attrForValue){this._inputElement.addEventListener(this._valueChangedEvent,this._boundValueChanged)}else{this.addEventListener("input",this._onInput)}if(this._inputElementValue&&this._inputElementValue!=""){this._handleValueAndAutoValidate(this._inputElement)}else{this._handleValue(this._inputElement)}},_onAddonAttached:function(event){if(!this._addons){this._addons=[]}var target=event.target;if(this._addons.indexOf(target)===-1){this._addons.push(target);if(this.isAttached){this._handleValue(this._inputElement)}}},_onFocus:function(){this._setFocused(true)},_onBlur:function(){this._setFocused(false);this._handleValueAndAutoValidate(this._inputElement)},_onInput:function(event){this._handleValueAndAutoValidate(event.target)},_onValueChanged:function(event){var input=event.target;if(this.__isFirstValueUpdate){this.__isFirstValueUpdate=false;if(input.value===undefined){return}}this._handleValueAndAutoValidate(event.target)},_handleValue:function(inputElement){var value=this._inputElementValue;if(value||value===0||inputElement.type==="number"&&!inputElement.checkValidity()){this._inputHasContent=true}else{this._inputHasContent=false}this.updateAddons({inputElement:inputElement,value:value,invalid:this.invalid})},_handleValueAndAutoValidate:function(inputElement){if(this.autoValidate&&inputElement){var valid;if(inputElement.validate){valid=inputElement.validate(this._inputElementValue)}else{valid=inputElement.checkValidity()}this.invalid=!valid}this._handleValue(inputElement)},_onIronInputValidate:function(event){this.invalid=this._inputElement.invalid},_invalidChanged:function(){if(this._addons){this.updateAddons({invalid:this.invalid})}},updateAddons:function(state){for(var addon,index=0;addon=this._addons[index];index++){addon.update(state)}},_computeInputContentClass:function(noLabelFloat,alwaysFloatLabel,focused,invalid,_inputHasContent){var cls="input-content";if(!noLabelFloat){var label=this.querySelector("label");if(alwaysFloatLabel||_inputHasContent){cls+=" label-is-floating";this.$.labelAndInputContainer.style.position="static";if(invalid){cls+=" is-invalid"}else if(focused){cls+=" label-is-highlighted"}}else{if(label){this.$.labelAndInputContainer.style.position="relative"}if(invalid){cls+=" is-invalid"}}}else{if(_inputHasContent){cls+=" label-is-hidden"}if(invalid){cls+=" is-invalid"}}if(focused){cls+=" focused"}return cls},_computeUnderlineClass:function(focused,invalid){var cls="underline";if(invalid){cls+=" is-invalid"}else if(focused){cls+=" is-highlighted"}return cls},_computeAddOnContentClass:function(focused,invalid){var cls="add-on-content";if(invalid){cls+=" is-invalid"}else if(focused){cls+=" is-highlighted"}return cls}});Polymer({is:"paper-input-error",behaviors:[Polymer.PaperInputAddonBehavior],properties:{invalid:{readOnly:true,reflectToAttribute:true,type:Boolean}},update:function(state){this._setInvalid(state.invalid)}});Polymer({is:"paper-input",behaviors:[Polymer.PaperInputBehavior,Polymer.IronFormElementBehavior],beforeRegister:function(){var version="v1";var template=Polymer.DomModule.import("paper-input","template");var inputTemplate=Polymer.DomModule.import("paper-input","template#"+version);var inputPlaceholder=template.content.querySelector("#template-placeholder");if(inputPlaceholder){inputPlaceholder.parentNode.replaceChild(inputTemplate.content,inputPlaceholder)}},get _focusableElement(){return this.inputElement._inputElement},listeners:{"iron-input-ready":"_onIronInputReady"},_onIronInputReady:function(){if(!this.$.nativeInput){this.$.nativeInput=this.$$("input")}if(this.inputElement&&this._typesThatHaveText.indexOf(this.$.nativeInput.type)!==-1){this.alwaysFloatLabel=true}if(!!this.inputElement.bindValue){this.$.container._handleValueAndAutoValidate(this.inputElement)}}});
// Copyright 2016 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
cr.define("extensions",function(){"use strict";const Key={Comma:188,Del:46,Down:40,End:35,Escape:27,Home:36,Ins:45,Left:37,MediaNextTrack:176,MediaPlayPause:179,MediaPrevTrack:177,MediaStop:178,PageDown:34,PageUp:33,Period:190,Right:39,Space:32,Tab:9,Up:38};const ModifierPolicy={NOT_ALLOWED:0,REQUIRED:1};function getModifierPolicy(keyCode){switch(keyCode){case Key.MediaNextTrack:case Key.MediaPlayPause:case Key.MediaPrevTrack:case Key.MediaStop:return ModifierPolicy.NOT_ALLOWED;default:return ModifierPolicy.REQUIRED}}function hasModifier(e,countShiftAsModifier){return e.ctrlKey||e.altKey||cr.isMac&&e.metaKey||cr.isChromeOS&&e.metaKey||countShiftAsModifier&&e.shiftKey}function isValidKeyCode(keyCode){if(keyCode==Key.Escape)return false;for(let k in Key){if(Key[k]==keyCode)return true}return keyCode>="A".charCodeAt(0)&&keyCode<="Z".charCodeAt(0)||keyCode>="0".charCodeAt(0)&&keyCode<="9".charCodeAt(0)}function keystrokeToString(e){let output=[];if(cr.isMac&&e.metaKey)output.push("Command");if(cr.isChromeOS&&e.metaKey)output.push("Search");if(e.ctrlKey)output.push("Ctrl");if(!e.ctrlKey&&e.altKey)output.push("Alt");if(e.shiftKey)output.push("Shift");let keyCode=e.keyCode;if(isValidKeyCode(keyCode)){if(keyCode>="A".charCodeAt(0)&&keyCode<="Z".charCodeAt(0)||keyCode>="0".charCodeAt(0)&&keyCode<="9".charCodeAt(0)){output.push(String.fromCharCode(keyCode))}else{switch(keyCode){case Key.Comma:output.push("Comma");break;case Key.Del:output.push("Delete");break;case Key.Down:output.push("Down");break;case Key.End:output.push("End");break;case Key.Home:output.push("Home");break;case Key.Ins:output.push("Insert");break;case Key.Left:output.push("Left");break;case Key.MediaNextTrack:output.push("MediaNextTrack");break;case Key.MediaPlayPause:output.push("MediaPlayPause");break;case Key.MediaPrevTrack:output.push("MediaPrevTrack");break;case Key.MediaStop:output.push("MediaStop");break;case Key.PageDown:output.push("PageDown");break;case Key.PageUp:output.push("PageUp");break;case Key.Period:output.push("Period");break;case Key.Right:output.push("Right");break;case Key.Space:output.push("Space");break;case Key.Tab:output.push("Tab");break;case Key.Up:output.push("Up");break}}}return output.join("+")}function hasValidModifiers(e){switch(getModifierPolicy(e.keyCode)){case ModifierPolicy.REQUIRED:return hasModifier(e,false);case ModifierPolicy.NOT_ALLOWED:return!hasModifier(e,true)}assertNotReached()}return{isValidKeyCode:isValidKeyCode,keystrokeToString:keystrokeToString,hasValidModifiers:hasValidModifiers,Key:Key}});
// Copyright 2016 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
const ShortcutError={NO_ERROR:0,INCLUDE_START_MODIFIER:1,TOO_MANY_MODIFIERS:2,NEED_CHARACTER:3};cr.define("extensions",function(){"use strict";const ShortcutInput=Polymer({is:"extensions-shortcut-input",properties:{delegate:Object,item:{type:String,value:""},commandName:{type:String,value:""},shortcut:{type:String,value:""},capturing_:{type:Boolean,value:false},error_:{type:Number,value:0},pendingShortcut_:{type:String,value:""}},ready:function(){const node=this.$["input"];node.addEventListener("mouseup",this.startCapture_.bind(this));node.addEventListener("blur",this.endCapture_.bind(this));node.addEventListener("focus",this.startCapture_.bind(this));node.addEventListener("keydown",this.onKeyDown_.bind(this));node.addEventListener("keyup",this.onKeyUp_.bind(this))},startCapture_:function(){if(this.capturing_)return;this.capturing_=true;this.delegate.setShortcutHandlingSuspended(true)},endCapture_:function(){if(!this.capturing_)return;this.pendingShortcut_="";this.capturing_=false;const input=this.$.input;input.blur();input.invalid=false;this.delegate.setShortcutHandlingSuspended(false)},onKeyDown_:function(e){if(e.keyCode==extensions.Key.Escape){if(!this.capturing_){return}this.endCapture_();e.preventDefault();e.stopPropagation();return}if(e.keyCode==extensions.Key.Tab){return}if(!this.capturing_)this.startCapture_();this.handleKey_(e)},onKeyUp_:function(e){if(e.keyCode==extensions.Key.Escape||e.keyCode==extensions.Key.Tab)return;this.handleKey_(e)},getErrorString_:function(error,includeStartModifier,tooManyModifiers,needCharacter){if(error==ShortcutError.TOO_MANY_MODIFIERS)return tooManyModifiers;if(error==ShortcutError.NEED_CHARACTER)return needCharacter;return includeStartModifier},handleKey_:function(e){e.preventDefault();e.stopPropagation();if(e.ctrlKey&&e.altKey){this.error_=ShortcutError.TOO_MANY_MODIFIERS;this.$.input.invalid=true;return}if(!extensions.hasValidModifiers(e)){this.pendingShortcut_="";this.error_=ShortcutError.INCLUDE_START_MODIFIER;this.$.input.invalid=true;return}this.pendingShortcut_=extensions.keystrokeToString(e);if(!extensions.isValidKeyCode(e.keyCode)){this.error_=ShortcutError.NEED_CHARACTER;this.$.input.invalid=true;return}this.$.input.invalid=false;this.commitPending_();this.endCapture_()},commitPending_:function(){this.shortcut=this.pendingShortcut_;this.delegate.updateExtensionCommandKeybinding(this.item,this.commandName,this.shortcut)},computeText_:function(){let shortcutString=this.capturing_?this.pendingShortcut_:this.shortcut;return shortcutString.split("+").join(" + ")},computeClearHidden_:function(){return this.capturing_||!this.shortcut},onClearTap_:function(){if(this.shortcut){this.pendingShortcut_="";this.commitPending_()}}});return{ShortcutInput:ShortcutInput}});
// Copyright 2016 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
cr.define("extensions",function(){"use strict";class KeyboardShortcutDelegate{setShortcutHandlingSuspended(isCapturing){}updateExtensionCommandKeybinding(extensionId,commandName,keybinding){}updateExtensionCommandScope(extensionId,commandName,scope){}}const KeyboardShortcuts=Polymer({is:"extensions-keyboard-shortcuts",behaviors:[CrContainerShadowBehavior,extensions.ItemBehavior],properties:{delegate:Object,items:Array,CommandScope_:{type:Object,value:chrome.developerPrivate.CommandScope}},listeners:{"view-enter-start":"onViewEnter_"},onViewEnter_:function(){chrome.metricsPrivate.recordUserAction("Options_ExtensionCommands")},calculateShownItems_:function(){return this.items.filter(function(item){return item.commands.length>0})},hasKeybinding_:function(keybinding){return!!keybinding},computeScopeDisabled_:function(command){return command.isExtensionAction||!command.isActive},triggerScopeChange_:function(scope){return scope},onCloseButtonClick_:function(){this.fire("close")},onScopeChanged_:function(event){this.delegate.updateExtensionCommandScope(event.model.get("item.id"),event.model.get("command.name"),event.target.value)}});return{KeyboardShortcutDelegate:KeyboardShortcutDelegate,KeyboardShortcuts:KeyboardShortcuts}});
// Copyright 2017 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
cr.define("extensions",function(){"use strict";class LoadErrorDelegate{retryLoadUnpacked(retryId){}}const LoadError=Polymer({is:"extensions-load-error",properties:{delegate:Object,loadError:Object,retrying_:Boolean},observers:["observeLoadErrorChanges_(loadError)"],show:function(){this.$.dialog.showModal()},close:function(){this.$.dialog.close()},onRetryTap_:function(){this.retrying_=true;this.delegate.retryLoadUnpacked(this.loadError.retryGuid).then(()=>{this.close()},loadError=>{this.loadError=loadError;this.retrying_=false})},observeLoadErrorChanges_:function(){assert(this.loadError);const source=this.loadError.source;const codeSectionProperties={beforeHighlight:source?source.beforeHighlight:"",highlight:source?source.highlight:"",afterHighlight:source?source.afterHighlight:"",title:"",message:this.loadError.error};this.$.code.code=codeSectionProperties}});return{LoadError:LoadError,LoadErrorDelegate:LoadErrorDelegate}});
// Copyright 2016 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
cr.define("extensions",function(){"use strict";function whenDocumentReady(){if(document.readyState=="complete")return Promise.resolve();return new Promise(function(resolve){document.addEventListener("readystatechange",function f(){if(document.readyState=="complete"){document.removeEventListener("readystatechange",f);resolve()}})})}const MIN_WIDTH=400;const MAX_HEIGHT=640;const OptionsDialog=Polymer({is:"extensions-options-dialog",behaviors:[extensions.ItemBehavior],properties:{extensionOptions_:Object,data_:Object},boundResizeListener_:null,get open(){return this.$.dialog.open},updateDialogSize_:function(width,height){const HEADER_HEIGHT=64;const maxHeight=Math.min(.9*window.innerHeight,MAX_HEIGHT);const effectiveHeight=Math.min(maxHeight,HEADER_HEIGHT+height);const effectiveWidth=Math.max(MIN_WIDTH,width);const nativeDialog=this.$.dialog.getNative();nativeDialog.style.height=`${effectiveHeight}px`;nativeDialog.style.width=`${effectiveWidth}px`},show:function(data){this.data_=data;whenDocumentReady().then(()=>{if(!this.extensionOptions_)this.extensionOptions_=document.createElement("ExtensionOptions");this.extensionOptions_.extension=this.data_.id;this.extensionOptions_.onclose=this.close.bind(this);let preferredSize=null;this.extensionOptions_.onpreferredsizechanged=(e=>{preferredSize=e;this.updateDialogSize_(preferredSize.width,preferredSize.height);if(!this.$.dialog.open)this.$.dialog.showModal()});this.boundResizeListener_=(()=>{this.updateDialogSize_(preferredSize.width,preferredSize.height)});window.addEventListener("resize",this.boundResizeListener_);this.$.body.appendChild(this.extensionOptions_)})},close:function(){this.$.dialog.close()},onClose_:function(){this.extensionOptions_.onpreferredsizechanged=null;if(this.boundResizeListener_){window.removeEventListener("resize",this.boundResizeListener_);this.boundResizeListener_=null}const currentPage=extensions.navigation.getCurrentPage();if(currentPage&&currentPage.page==Page.DETAILS){extensions.navigation.navigateTo({page:Page.DETAILS,extensionId:currentPage.extensionId})}}});return{OptionsDialog:OptionsDialog,OptionsDialogMinWidth:MIN_WIDTH,OptionsDialogMaxHeight:MAX_HEIGHT}});
// Copyright (c) 2012 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
function $(id){var el=document.getElementById(id);return el?assertInstanceof(el,HTMLElement):null}function getSVGElement(id){var el=document.getElementById(id);return el?assertInstanceof(el,Element):null}function announceAccessibleMessage(msg){var element=document.createElement("div");element.setAttribute("aria-live","polite");element.style.position="fixed";element.style.left="-9999px";element.style.height="0px";element.innerText=msg;document.body.appendChild(element);window.setTimeout(function(){document.body.removeChild(element)},0)}function getUrlForCss(s){var s2=s.replace(/(\(|\)|\,|\s|\'|\"|\\)/g,"\\$1");if(/\\\\$/.test(s2)){s2+=" "}return'url("'+s2+'")'}function parseQueryParams(location){var params={};var query=unescape(location.search.substring(1));var vars=query.split("&");for(var i=0;i<vars.length;i++){var pair=vars[i].split("=");params[pair[0]]=pair[1]}return params}function setQueryParam(location,key,value){var query=parseQueryParams(location);query[encodeURIComponent(key)]=encodeURIComponent(value);var newQuery="";for(var q in query){newQuery+=(newQuery?"&":"?")+q+"="+query[q]}return location.origin+location.pathname+newQuery+location.hash}function findAncestorByClass(el,className){return findAncestor(el,function(el){return el.classList&&el.classList.contains(className)})}function findAncestor(node,predicate){var last=false;while(node!=null&&!(last=predicate(node))){node=node.parentNode}return last?node:null}function swapDomNodes(a,b){var afterA=a.nextSibling;if(afterA==b){swapDomNodes(b,a);return}var aParent=a.parentNode;b.parentNode.replaceChild(a,b);aParent.insertBefore(b,afterA)}function disableTextSelectAndDrag(opt_allowSelectStart,opt_allowDragStart){document.onselectstart=function(e){if(!(opt_allowSelectStart&&opt_allowSelectStart.call(this,e)))e.preventDefault()};document.ondragstart=function(e){if(!(opt_allowDragStart&&opt_allowDragStart.call(this,e)))e.preventDefault()}}function isRTL(){return document.documentElement.dir=="rtl"}function getRequiredElement(id){return assertInstanceof($(id),HTMLElement,"Missing required element: "+id)}function queryRequiredElement(selectors,opt_context){var element=(opt_context||document).querySelector(selectors);return assertInstanceof(element,HTMLElement,"Missing required element: "+selectors)}["click","auxclick"].forEach(function(eventName){document.addEventListener(eventName,function(e){if(e.button>1)return;if(e.defaultPrevented)return;var eventPath=e.path;var anchor=null;if(eventPath){for(var i=0;i<eventPath.length;i++){var element=eventPath[i];if(element.tagName==="A"&&element.href){anchor=element;break}}}var el=e.target;if(!anchor&&el.nodeType==Node.ELEMENT_NODE&&el.webkitMatchesSelector("A, A *")){while(el.tagName!="A"){el=el.parentElement}anchor=el}if(!anchor)return;anchor=anchor;if((anchor.protocol=="file:"||anchor.protocol=="about:")&&(e.button==0||e.button==1)){chrome.send("navigateToUrl",[anchor.href,anchor.target,e.button,e.altKey,e.ctrlKey,e.metaKey,e.shiftKey]);e.preventDefault()}})});function appendParam(url,key,value){var param=encodeURIComponent(key)+"="+encodeURIComponent(value);if(url.indexOf("?")==-1)return url+"?"+param;return url+"&"+param}function createElementWithClassName(type,className){var elm=document.createElement(type);elm.className=className;return elm}function ensureTransitionEndEvent(el,opt_timeOut){if(opt_timeOut===undefined){var style=getComputedStyle(el);opt_timeOut=parseFloat(style.transitionDuration)*1e3;opt_timeOut+=50}var fired=false;el.addEventListener("transitionend",function f(e){el.removeEventListener("transitionend",f);fired=true});window.setTimeout(function(){if(!fired)cr.dispatchSimpleEvent(el,"transitionend",true)},opt_timeOut)}function scrollTopForDocument(doc){return doc.documentElement.scrollTop||doc.body.scrollTop}function setScrollTopForDocument(doc,value){doc.documentElement.scrollTop=doc.body.scrollTop=value}function scrollLeftForDocument(doc){return doc.documentElement.scrollLeft||doc.body.scrollLeft}function setScrollLeftForDocument(doc,value){doc.documentElement.scrollLeft=doc.body.scrollLeft=value}function HTMLEscape(original){return original.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function elide(original,maxLength){if(original.length<=maxLength)return original;return original.substring(0,maxLength-1)+"…"}function quoteString(str){return str.replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1")}function listenOnce(target,eventNames,callback){if(!Array.isArray(eventNames))eventNames=eventNames.split(/ +/);var removeAllAndCallCallback=function(event){eventNames.forEach(function(eventName){target.removeEventListener(eventName,removeAllAndCallCallback,false)});return callback(event)};eventNames.forEach(function(eventName){target.addEventListener(eventName,removeAllAndCallCallback,false)})}
// <if expr="is_ios">
if(!("key"in KeyboardEvent.prototype)){Object.defineProperty(KeyboardEvent.prototype,"key",{get:function(){if(this.keyCode>=48&&this.keyCode<=57)return String.fromCharCode(this.keyCode);if(this.keyCode>=65&&this.keyCode<=90){var result=String.fromCharCode(this.keyCode).toLowerCase();if(this.shiftKey)result=result.toUpperCase();return result}switch(this.keyCode){case 8:return"Backspace";case 9:return"Tab";case 13:return"Enter";case 16:return"Shift";case 17:return"Control";case 18:return"Alt";case 27:return"Escape";case 32:return" ";case 33:return"PageUp";case 34:return"PageDown";case 35:return"End";case 36:return"Home";case 37:return"ArrowLeft";case 38:return"ArrowUp";case 39:return"ArrowRight";case 40:return"ArrowDown";case 45:return"Insert";case 46:return"Delete";case 91:return"Meta";case 112:return"F1";case 113:return"F2";case 114:return"F3";case 115:return"F4";case 116:return"F5";case 117:return"F6";case 118:return"F7";case 119:return"F8";case 120:return"F9";case 121:return"F10";case 122:return"F11";case 123:return"F12";case 187:return"=";case 189:return"-";case 219:return"[";case 221:return"]"}return"Unidentified"}})}else{window.console.log("KeyboardEvent.Key polyfill not required")}
// </if>  /* is_ios */
function hasKeyModifiers(e){return!!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)}
// Copyright 2017 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
cr.define("extensions",function(){"use strict";const PackDialogAlert=Polymer({is:"extensions-pack-dialog-alert",properties:{model:Object,title_:String,message_:String,cancelLabel_:String,confirmLabel_:{type:String,value:""}},get returnValue(){return this.$.dialog.getNative().returnValue},ready:function(){this.cancelLabel_=null;this.confirmLabel_=null;switch(this.model.status){case chrome.developerPrivate.PackStatus.WARNING:this.title_=loadTimeData.getString("packDialogWarningTitle");this.cancelLabel_=loadTimeData.getString("cancel");this.confirmLabel_=loadTimeData.getString("packDialogProceedAnyway");break;case chrome.developerPrivate.PackStatus.ERROR:this.title_=loadTimeData.getString("packDialogErrorTitle");this.cancelLabel_=loadTimeData.getString("ok");break;case chrome.developerPrivate.PackStatus.SUCCESS:this.title_=loadTimeData.getString("packDialogTitle");this.cancelLabel_=loadTimeData.getString("ok");break;default:assertNotReached();return}},attached:function(){this.$.dialog.showModal()},getCancelButtonClass_:function(){return this.confirmLabel_?"cancel-button":"action-button"},onCancelTap_:function(){this.$.dialog.cancel()},onConfirmTap_:function(){assert(this.model.status===chrome.developerPrivate.PackStatus.WARNING);this.$.dialog.close()}});return{PackDialogAlert:PackDialogAlert}});
// Copyright 2016 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
cr.define("extensions",function(){"use strict";class PackDialogDelegate{choosePackRootDirectory(){}choosePrivateKeyPath(){}packExtension(rootPath,keyPath,flag,callback){}}const PackDialog=Polymer({is:"extensions-pack-dialog",properties:{delegate:Object,packDirectory_:{type:String,value:""},keyFile_:String,lastResponse_:Object},show:function(){this.$.dialog.showModal()},onRootBrowse_:function(){this.delegate.choosePackRootDirectory().then(path=>{if(path)this.set("packDirectory_",path)})},onKeyBrowse_:function(){this.delegate.choosePrivateKeyPath().then(path=>{if(path)this.set("keyFile_",path)})},onCancelTap_:function(){this.$.dialog.cancel()},onConfirmTap_:function(){this.delegate.packExtension(this.packDirectory_,this.keyFile_,0,this.onPackResponse_.bind(this))},onPackResponse_:function(response){this.lastResponse_=response},onAlertClose_:function(e){e.stopPropagation();if(this.lastResponse_.status==chrome.developerPrivate.PackStatus.SUCCESS){this.$.dialog.close();return}if(this.$$("extensions-pack-dialog-alert").returnValue=="success"){this.delegate.packExtension(this.lastResponse_.item_path,this.lastResponse_.pem_path,this.lastResponse_.override_flags,this.onPackResponse_.bind(this))}this.lastResponse_=null}});return{PackDialog:PackDialog,PackDialogDelegate:PackDialogDelegate}});
// Copyright 2015 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
cr.define("extensions",function(){"use strict";class Service{constructor(){this.isDeleting_=false;this.eventsToIgnoreOnce_=new Set}getProfileConfiguration(){return new Promise(function(resolve,reject){chrome.developerPrivate.getProfileConfiguration(resolve)})}getItemStateChangedTarget(){return chrome.developerPrivate.onItemStateChanged}shouldIgnoreUpdate(extensionId,eventType){return this.eventsToIgnoreOnce_.delete(`${extensionId}_${eventType}`)}ignoreNextEvent(extensionId,eventType){this.eventsToIgnoreOnce_.add(`${extensionId}_${eventType}`)}getProfileStateChangedTarget(){return chrome.developerPrivate.onProfileStateChanged}getExtensionsInfo(){return new Promise(function(resolve,reject){chrome.developerPrivate.getExtensionsInfo({includeDisabled:true,includeTerminated:true},resolve)})}getExtensionSize(id){return new Promise(function(resolve,reject){chrome.developerPrivate.getExtensionSize(id,resolve)})}chooseFilePath_(selectType,fileType){return new Promise(function(resolve,reject){chrome.developerPrivate.choosePath(selectType,fileType,function(path){if(chrome.runtime.lastError&&chrome.runtime.lastError!="File selection was canceled."){reject(chrome.runtime.lastError)}else{resolve(path||"")}})})}updateExtensionCommandKeybinding(extensionId,commandName,keybinding){chrome.developerPrivate.updateExtensionCommand({extensionId:extensionId,commandName:commandName,keybinding:keybinding})}updateExtensionCommandScope(extensionId,commandName,scope){this.ignoreNextEvent(extensionId,chrome.developerPrivate.EventType.COMMAND_REMOVED);chrome.developerPrivate.updateExtensionCommand({extensionId:extensionId,commandName:commandName,scope:scope})}setShortcutHandlingSuspended(isCapturing){chrome.developerPrivate.setShortcutHandlingSuspended(isCapturing)}loadUnpackedHelper_(opt_retryGuid){return new Promise(function(resolve,reject){chrome.developerPrivate.loadUnpacked({failQuietly:true,populateError:true,retryGuid:opt_retryGuid},loadError=>{if(chrome.runtime.lastError&&chrome.runtime.lastError.message!="File selection was canceled."){throw new Error(chrome.runtime.lastError.message)}if(loadError)return reject(loadError);resolve()})})}deleteItem(id){if(this.isDeleting_)return;this.isDeleting_=true;chrome.management.uninstall(id,{showConfirmDialog:true},()=>{chrome.runtime.lastError;this.isDeleting_=false})}setItemEnabled(id,isEnabled){chrome.management.setEnabled(id,isEnabled)}setItemAllowedIncognito(id,isAllowedIncognito){chrome.developerPrivate.updateExtensionConfiguration({extensionId:id,incognitoAccess:isAllowedIncognito})}setItemAllowedOnFileUrls(id,isAllowedOnFileUrls){chrome.developerPrivate.updateExtensionConfiguration({extensionId:id,fileAccess:isAllowedOnFileUrls})}setItemAllowedOnAllSites(id,isAllowedOnAllSites){chrome.developerPrivate.updateExtensionConfiguration({extensionId:id,runOnAllUrls:isAllowedOnAllSites})}setItemCollectsErrors(id,collectsErrors){chrome.developerPrivate.updateExtensionConfiguration({extensionId:id,errorCollection:collectsErrors})}inspectItemView(id,view){chrome.developerPrivate.openDevTools({extensionId:id,renderProcessId:view.renderProcessId,renderViewId:view.renderViewId,incognito:view.incognito})}openUrl(url){window.open(url)}reloadItem(id){return new Promise(function(resolve,reject){chrome.developerPrivate.reload(id,{failQuietly:true,populateErrorForUnpacked:true},loadError=>{if(loadError){reject(loadError);return}resolve()})})}repairItem(id){chrome.developerPrivate.repairExtension(id)}showItemOptionsPage(extension){assert(extension&&extension.optionsPage);if(extension.optionsPage.openInTab){chrome.developerPrivate.showOptions(extension.id)}else{extensions.navigation.navigateTo({page:Page.DETAILS,subpage:Dialog.OPTIONS,extensionId:extension.id})}}setProfileInDevMode(inDevMode){chrome.developerPrivate.updateProfileConfiguration({inDeveloperMode:inDevMode})}loadUnpacked(){return this.loadUnpackedHelper_()}retryLoadUnpacked(retryGuid){return this.loadUnpackedHelper_(retryGuid)}choosePackRootDirectory(){return this.chooseFilePath_(chrome.developerPrivate.SelectType.FOLDER,chrome.developerPrivate.FileType.LOAD)}choosePrivateKeyPath(){return this.chooseFilePath_(chrome.developerPrivate.SelectType.FILE,chrome.developerPrivate.FileType.PEM)}packExtension(rootPath,keyPath,flag,callback){chrome.developerPrivate.packDirectory(rootPath,keyPath,flag,callback)}updateAllExtensions(){return new Promise(resolve=>{chrome.developerPrivate.autoUpdate(resolve);chrome.metricsPrivate.recordUserAction("Options_UpdateExtensions")})}deleteErrors(extensionId,errorIds,type){chrome.developerPrivate.deleteExtensionErrors({extensionId:extensionId,errorIds:errorIds,type:type})}requestFileSource(args){return new Promise(function(resolve,reject){chrome.developerPrivate.requestFileSource(args,function(code){resolve(code)})})}showInFolder(id){chrome.developerPrivate.showPath(id)}}cr.addSingletonGetter(Service);return{Service:Service}});Polymer.IronSelection=function(selectCallback){this.selection=[];this.selectCallback=selectCallback};Polymer.IronSelection.prototype={get:function(){return this.multi?this.selection.slice():this.selection[0]},clear:function(excludes){this.selection.slice().forEach(function(item){if(!excludes||excludes.indexOf(item)<0){this.setItemSelected(item,false)}},this)},isSelected:function(item){return this.selection.indexOf(item)>=0},setItemSelected:function(item,isSelected){if(item!=null){if(isSelected!==this.isSelected(item)){if(isSelected){this.selection.push(item)}else{var i=this.selection.indexOf(item);if(i>=0){this.selection.splice(i,1)}}if(this.selectCallback){this.selectCallback(item,isSelected)}}}},select:function(item){if(this.multi){this.toggle(item)}else if(this.get()!==item){this.setItemSelected(this.get(),false);this.setItemSelected(item,true)}},toggle:function(item){this.setItemSelected(item,!this.isSelected(item))}};Polymer.IronSelectableBehavior={properties:{attrForSelected:{type:String,value:null},selected:{type:String,notify:true},selectedItem:{type:Object,readOnly:true,notify:true},activateEvent:{type:String,value:"tap",observer:"_activateEventChanged"},selectable:String,selectedClass:{type:String,value:"iron-selected"},selectedAttribute:{type:String,value:null},fallbackSelection:{type:String,value:null},items:{type:Array,readOnly:true,notify:true,value:function(){return[]}},_excludedLocalNames:{type:Object,value:function(){return{template:1,"dom-bind":1,"dom-if":1,"dom-repeat":1}}}},observers:["_updateAttrForSelected(attrForSelected)","_updateSelected(selected)","_checkFallback(fallbackSelection)"],created:function(){this._bindFilterItem=this._filterItem.bind(this);this._selection=new Polymer.IronSelection(this._applySelection.bind(this))},attached:function(){this._observer=this._observeItems(this);this._addListener(this.activateEvent)},detached:function(){if(this._observer){Polymer.dom(this).unobserveNodes(this._observer)}this._removeListener(this.activateEvent)},indexOf:function(item){return this.items?this.items.indexOf(item):-1},select:function(value){this.selected=value},selectPrevious:function(){var length=this.items.length;var index=(Number(this._valueToIndex(this.selected))-1+length)%length;this.selected=this._indexToValue(index)},selectNext:function(){var index=(Number(this._valueToIndex(this.selected))+1)%this.items.length;this.selected=this._indexToValue(index)},selectIndex:function(index){this.select(this._indexToValue(index))},forceSynchronousItemUpdate:function(){if(this._observer&&typeof this._observer.flush==="function"){this._observer.flush()}else{this._updateItems()}},get _shouldUpdateSelection(){return this.selected!=null},_checkFallback:function(){this._updateSelected()},_addListener:function(eventName){this.listen(this,eventName,"_activateHandler")},_removeListener:function(eventName){this.unlisten(this,eventName,"_activateHandler")},_activateEventChanged:function(eventName,old){this._removeListener(old);this._addListener(eventName)},_updateItems:function(){var nodes=Polymer.dom(this).queryDistributedElements(this.selectable||"*");nodes=Array.prototype.filter.call(nodes,this._bindFilterItem);this._setItems(nodes)},_updateAttrForSelected:function(){if(this.selectedItem){this.selected=this._valueForItem(this.selectedItem)}},_updateSelected:function(){this._selectSelected(this.selected)},_selectSelected:function(selected){if(!this.items){return}var item=this._valueToItem(this.selected);if(item){this._selection.select(item)}else{this._selection.clear()}if(this.fallbackSelection&&this.items.length&&this._selection.get()===undefined){this.selected=this.fallbackSelection}},_filterItem:function(node){return!this._excludedLocalNames[node.localName]},_valueToItem:function(value){return value==null?null:this.items[this._valueToIndex(value)]},_valueToIndex:function(value){if(this.attrForSelected){for(var i=0,item;item=this.items[i];i++){if(this._valueForItem(item)==value){return i}}}else{return Number(value)}},_indexToValue:function(index){if(this.attrForSelected){var item=this.items[index];if(item){return this._valueForItem(item)}}else{return index}},_valueForItem:function(item){if(!item){return null}if(!this.attrForSelected){var i=this.indexOf(item);return i===-1?null:i}var propValue=item[Polymer.CaseMap.dashToCamelCase(this.attrForSelected)];return propValue!=undefined?propValue:item.getAttribute(this.attrForSelected)},_applySelection:function(item,isSelected){if(this.selectedClass){this.toggleClass(this.selectedClass,isSelected,item)}if(this.selectedAttribute){this.toggleAttribute(this.selectedAttribute,isSelected,item)}this._selectionChange();this.fire("iron-"+(isSelected?"select":"deselect"),{item:item})},_selectionChange:function(){this._setSelectedItem(this._selection.get())},_observeItems:function(node){return Polymer.dom(node).observeNodes(function(mutation){this._updateItems();this._updateSelected();this.fire("iron-items-changed",mutation,{bubbles:false,cancelable:false})})},_activateHandler:function(e){var t=e.target;var items=this.items;while(t&&t!=this){var i=items.indexOf(t);if(i>=0){var value=this._indexToValue(i);this._itemActivate(value,t);return}t=t.parentNode}},_itemActivate:function(value,item){if(!this.fire("iron-activate",{selected:value,item:item},{cancelable:true}).defaultPrevented){this.select(value)}}};Polymer.IronMultiSelectableBehaviorImpl={properties:{multi:{type:Boolean,value:false,observer:"multiChanged"},selectedValues:{type:Array,notify:true,value:function(){return[]}},selectedItems:{type:Array,readOnly:true,notify:true,value:function(){return[]}}},observers:["_updateSelected(selectedValues.splices)"],select:function(value){if(this.multi){this._toggleSelected(value)}else{this.selected=value}},multiChanged:function(multi){this._selection.multi=multi;this._updateSelected()},get _shouldUpdateSelection(){return this.selected!=null||this.selectedValues!=null&&this.selectedValues.length},_updateAttrForSelected:function(){if(!this.multi){Polymer.IronSelectableBehavior._updateAttrForSelected.apply(this)}else if(this.selectedItems&&this.selectedItems.length>0){this.selectedValues=this.selectedItems.map(function(selectedItem){return this._indexToValue(this.indexOf(selectedItem))},this).filter(function(unfilteredValue){return unfilteredValue!=null},this)}},_updateSelected:function(){if(this.multi){this._selectMulti(this.selectedValues)}else{this._selectSelected(this.selected)}},_selectMulti:function(values){values=values||[];var selectedItems=(this._valuesToItems(values)||[]).filter(function(item){return item!==null&&item!==undefined});this._selection.clear(selectedItems);for(var i=0;i<selectedItems.length;i++){this._selection.setItemSelected(selectedItems[i],true)}if(this.fallbackSelection&&!this._selection.get().length){var fallback=this._valueToItem(this.fallbackSelection);if(fallback){this.select(this.fallbackSelection)}}},_selectionChange:function(){var s=this._selection.get();if(this.multi){this._setSelectedItems(s);this._setSelectedItem(s.length?s[0]:null)}else{if(s!==null&&s!==undefined){this._setSelectedItems([s]);this._setSelectedItem(s)}else{this._setSelectedItems([]);this._setSelectedItem(null)}}},_toggleSelected:function(value){var i=this.selectedValues.indexOf(value);var unselected=i<0;if(unselected){this.push("selectedValues",value)}else{this.splice("selectedValues",i,1)}},_valuesToItems:function(values){return values==null?null:values.map(function(value){return this._valueToItem(value)},this)}};Polymer.IronMultiSelectableBehavior=[Polymer.IronSelectableBehavior,Polymer.IronMultiSelectableBehaviorImpl];Polymer({is:"iron-selector",behaviors:[Polymer.IronMultiSelectableBehavior]});
// Copyright 2015 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
cr.define("extensions",function(){const Sidebar=Polymer({is:"extensions-sidebar",properties:{isSupervised:Boolean},hostAttributes:{role:"navigation"},attached:function(){this.$.sectionMenu.select(extensions.navigation.getCurrentPage().page==Page.SHORTCUTS?1:0)},onLinkTap_:function(e){e.preventDefault();extensions.navigation.navigateTo({page:e.target.dataset.path});this.fire("close-drawer")},onMoreExtensionsTap_:function(){assert(!this.isSupervised);chrome.metricsPrivate.recordUserAction("Options_GetMoreExtensions")}});return{Sidebar:Sidebar}});
// Copyright 2017 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
Polymer({is:"cr-toast",properties:{duration:{type:Number,value:0},open:{type:Boolean,value:false,reflectToAttribute:true}},observers:["resetAutoHide_(duration, open)"],hideTimeoutId_:null,resetAutoHide_:function(){if(this.hideTimeoutId_!=null){window.clearTimeout(this.hideTimeoutId_);this.hideTimeoutId_=null}if(this.open&&this.duration!=0){this.hideTimeoutId_=window.setTimeout(()=>{this.open=false},this.duration)}},show:function(duration){let shouldResetAutoHide=true;if(typeof duration!="undefined"&&duration>=0&&this.duration!=duration){this.duration=duration;shouldResetAutoHide=false}if(!this.open){this.open=true;shouldResetAutoHide=false}if(shouldResetAutoHide)this.resetAutoHide_()},hide:function(){this.open=false}});
// Copyright 2017 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
cr.exportPath("extensions");cr.define("extensions",function(){class ToolbarDelegate{setProfileInDevMode(inDevMode){}loadUnpacked(){}updateAllExtensions(){}}const Toolbar=Polymer({is:"extensions-toolbar",properties:{delegate:Object,inDevMode:{type:Boolean,value:false,observer:"onInDevModeChanged_"},devModeControlledByPolicy:Boolean,isSupervised:Boolean,canLoadUnpacked:Boolean,expanded_:Boolean,toastLabel_:String,isUpdating_:{type:Boolean,value:false}},behaviors:[I18nBehavior],hostAttributes:{role:"banner"},detached:function(){const openToastElement=this.$$("cr-toast[open]");if(openToastElement)openToastElement.hide()},shouldDisableDevMode_:function(){return this.devModeControlledByPolicy||this.isSupervised},onDevModeToggleChange_:function(e){this.delegate.setProfileInDevMode(e.detail);chrome.metricsPrivate.recordUserAction("Options_ToggleDeveloperMode_"+(e.detail?"Enabled":"Disabled"))},onInDevModeChanged_:function(current,previous){const drawer=this.$.devDrawer;if(this.inDevMode){if(drawer.hidden){drawer.hidden=false;drawer.offsetTop}}else{if(previous==undefined){drawer.hidden=true;return}listenOnce(drawer,"transitionend",e=>{if(!this.inDevMode)drawer.hidden=true})}this.expanded_=!this.expanded_},onLoadUnpackedTap_:function(){this.delegate.loadUnpacked().catch(loadError=>{this.fire("load-error",loadError)});chrome.metricsPrivate.recordUserAction("Options_LoadUnpackedExtension")},onPackTap_:function(){this.fire("pack-tap");chrome.metricsPrivate.recordUserAction("Options_PackExtension")},onUpdateNowTap_:function(){if(this.isUpdating_)return;this.isUpdating_=true;const toastElement=this.$$("cr-toast");this.toastLabel_=this.i18n("toolbarUpdatingToast");toastElement.duration=0;toastElement.show();this.delegate.updateAllExtensions().then(()=>{Polymer.IronA11yAnnouncer.requestAvailability();const doneText=this.i18n("toolbarUpdateDone");this.fire("iron-announce",{text:doneText});this.toastLabel_=doneText;toastElement.show(3e3);this.isUpdating_=false}).catch(function(){toastElement.hide();this.isUpdating_=false})}});return{Toolbar:Toolbar,ToolbarDelegate:ToolbarDelegate}});
// Copyright 2017 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
cr.define("extensions",function(){"use strict";function whenFinished(animation){return new Promise(function(resolve,reject){animation.addEventListener("finish",resolve)})}const viewAnimations=new Map;viewAnimations.set("no-animation",()=>Promise.resolve());viewAnimations.set("fade-in",element=>{const animation=element.animate({opacity:[0,1]},{duration:180,easing:"ease-in-out",iterations:1});return whenFinished(animation)});viewAnimations.set("fade-out",element=>{const animation=element.animate({opacity:[1,0]},{duration:180,easing:"ease-in-out",iterations:1});return whenFinished(animation)});const ViewManager=Polymer({is:"extensions-view-manager",exit_:function(element,animation){const animationFunction=extensions.viewAnimations.get(animation);assert(animationFunction);element.classList.remove("active");element.classList.add("closing");element.dispatchEvent(new CustomEvent("view-exit-start"));return animationFunction(element).then(function(){element.classList.remove("closing");element.dispatchEvent(new CustomEvent("view-exit-finish"))})},enter_:function(view,animation){const animationFunction=extensions.viewAnimations.get(animation);assert(animationFunction);let effectiveView=view.matches("cr-lazy-render")?view.get():view;effectiveView.classList.add("active");effectiveView.dispatchEvent(new CustomEvent("view-enter-start"));return animationFunction(effectiveView).then(()=>{effectiveView.dispatchEvent(new CustomEvent("view-enter-finish"))})},switchView:function(newViewId,enterAnimation,exitAnimation){const previousView=this.querySelector(".active");const newView=assert(this.querySelector("#"+newViewId));const promises=[];if(previousView){promises.push(this.exit_(previousView,exitAnimation||"fade-out"));promises.push(this.enter_(newView,enterAnimation||"fade-in"))}else{promises.push(this.enter_(newView,"no-animation"))}return Promise.all(promises)}});return{viewAnimations:viewAnimations,ViewManager:ViewManager}});
// Copyright 2015 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.
cr.define("extensions",function(){"use strict";const compareExtensions=function(a,b){function compare(x,y){return x<y?-1:x>y?1:0}function compareLocation(x,y){if(x.location==y.location)return 0;if(x.location==chrome.developerPrivate.Location.UNPACKED)return-1;if(y.location==chrome.developerPrivate.Location.UNPACKED)return 1;return 0}return compareLocation(a,b)||compare(a.name.toLowerCase(),b.name.toLowerCase())||compare(a.id,b.id)};const Manager=Polymer({is:"extensions-manager",properties:{canLoadUnpacked:{type:Boolean,value:false},delegate:{type:Object,value:function(){return extensions.Service.getInstance()}},inDevMode:{type:Boolean,value:()=>loadTimeData.getBoolean("inDevMode")},devModeControlledByPolicy:{type:Boolean,value:false},isSupervised_:{type:Boolean,value:false},incognitoAvailable_:{type:Boolean,value:false},filter:{type:String,value:""},errorPageItem_:Object,detailViewItem_:Object,extensions_:Array,apps_:Array,didInitPage_:{type:Boolean,value:false},showDrawer_:Boolean,showLoadErrorDialog_:Boolean,showInstallWarningsDialog_:Boolean,installWarnings_:Array,showOptionsDialog_:Boolean,showPackDialog_:Boolean},listeners:{"load-error":"onLoadError_","view-exit-finish":"onViewExitFinish_"},currentPage_:null,navigationListener_:null,ready:function(){let service=extensions.Service.getInstance();let onProfileStateChanged=profileInfo=>{this.isSupervised_=profileInfo.isSupervised;this.incognitoAvailable_=profileInfo.isIncognitoAvailable;this.devModeControlledByPolicy=profileInfo.isDeveloperModeControlledByPolicy;this.inDevMode=profileInfo.inDeveloperMode;this.canLoadUnpacked=profileInfo.canLoadUnpacked};service.getProfileStateChangedTarget().addListener(onProfileStateChanged);service.getProfileConfiguration().then(onProfileStateChanged);service.getExtensionsInfo().then(extensionsAndApps=>{this.initExtensionsAndApps_(extensionsAndApps);this.initPage_();service.getItemStateChangedTarget().addListener(this.onItemStateChanged_.bind(this))})},attached:function(){document.documentElement.classList.remove("loading");document.fonts.load("bold 12px Roboto");this.navigationListener_=extensions.navigation.addListener(newPage=>{this.changePage_(newPage)})},detached:function(){assert(extensions.navigation.removeListener(this.navigationListener_));this.navigationListener_=null},initPage_:function(){this.didInitPage_=true;this.changePage_(extensions.navigation.getCurrentPage())},onItemStateChanged_:function(eventData){const EventType=chrome.developerPrivate.EventType;switch(eventData.event_type){case EventType.VIEW_REGISTERED:case EventType.VIEW_UNREGISTERED:case EventType.INSTALLED:case EventType.LOADED:case EventType.UNLOADED:case EventType.ERROR_ADDED:case EventType.ERRORS_REMOVED:case EventType.PREFS_CHANGED:case EventType.WARNINGS_CHANGED:case EventType.COMMAND_ADDED:case EventType.COMMAND_REMOVED:if(!eventData.extensionInfo)break;if(this.delegate.shouldIgnoreUpdate(eventData.extensionInfo.id,eventData.event_type)){break}const listId=this.getListId_(eventData.extensionInfo);const currentIndex=this[listId].findIndex(item=>item.id==eventData.extensionInfo.id);if(currentIndex>=0){this.updateItem_(listId,currentIndex,eventData.extensionInfo)}else{this.addItem_(listId,eventData.extensionInfo)}break;case EventType.UNINSTALLED:this.removeItem_(eventData.item_id);break;default:assertNotReached()}},onFilterChanged_:function(event){if(this.currentPage_.page!==Page.LIST)extensions.navigation.navigateTo({page:Page.LIST});this.filter=event.detail},onMenuButtonTap_:function(){this.showDrawer_=true;this.async(()=>{this.$$("#drawer").openDrawer()})},getListId_:function(item){const ExtensionType=chrome.developerPrivate.ExtensionType;switch(item.type){case ExtensionType.HOSTED_APP:case ExtensionType.LEGACY_PACKAGED_APP:case ExtensionType.PLATFORM_APP:return"apps_";case ExtensionType.EXTENSION:case ExtensionType.SHARED_MODULE:return"extensions_";case ExtensionType.THEME:assertNotReached("Don't send themes to the chrome://extensions page");break}assertNotReached()},getIndexInList_:function(listId,itemId){return this[listId].findIndex(function(item){return item.id==itemId})},getData_:function(id){return this.extensions_[this.getIndexInList_("extensions_",id)]||this.apps_[this.getIndexInList_("apps_",id)]},initExtensionsAndApps_:function(extensionsAndApps){extensionsAndApps.sort(compareExtensions);let apps=[];let extensions=[];for(let i of extensionsAndApps){let list=this.getListId_(i)==="apps_"?apps:extensions;list.push(i)}this.apps_=apps;this.extensions_=extensions},addItem_:function(listId,item){assert(this.getIndexInList_(listId,item.id)==-1);let insertBeforeChild=this[listId].findIndex(function(listEl){return compareExtensions(listEl,item)>0});if(insertBeforeChild==-1)insertBeforeChild=this[listId].length;this.splice(listId,insertBeforeChild,0,item)},updateItem_:function(listId,index,item){assert(index>=0);this.set([listId,index],item);if(this.detailViewItem_&&this.detailViewItem_.id==item.id&&this.currentPage_.page==Page.DETAILS){this.detailViewItem_=item}else if(this.errorPageItem_&&this.errorPageItem_.id==item.id&&this.currentPage_.page==Page.ERRORS){this.errorPageItem_=item}},removeItem_:function(itemId){let listId="extensions_";let index=this.getIndexInList_(listId,itemId);if(index==-1){listId="apps_";index=this.getIndexInList_(listId,itemId)}assert(index>=0);this.splice(listId,index,1);if((this.currentPage_.page==Page.DETAILS||this.currentPage_.page==Page.ERRORS)&&this.currentPage_.extensionId==itemId){extensions.navigation.replaceWith({page:Page.LIST})}},onLoadError_:function(e){const loadError=e.detail;this.showLoadErrorDialog_=true;this.async(()=>{const dialog=this.$$("#load-error");dialog.loadError=loadError;dialog.show()})},changePage_:function(newPage){this.onCloseDrawer_();const optionsDialog=this.$$("#options-dialog");if(optionsDialog&&optionsDialog.open){optionsDialog.close();this.showOptionsDialog_=false}const fromPage=this.currentPage_?this.currentPage_.page:null;const toPage=newPage.page;let data;if(newPage.extensionId){data=this.getData_(newPage.extensionId);if(!data){extensions.navigation.replaceWith({page:Page.LIST});return}}if(toPage==Page.DETAILS)this.detailViewItem_=assert(data);else if(toPage==Page.ERRORS)this.errorPageItem_=assert(data);if(fromPage!=toPage){this.$.viewManager.switchView(toPage)}if(newPage.subpage){assert(newPage.subpage==Dialog.OPTIONS);assert(newPage.extensionId);this.showOptionsDialog_=true;this.async(()=>{this.$$("#options-dialog").show(data)})}this.currentPage_=newPage},onDrawerClose_:function(){this.showDrawer_=false},onCloseDrawer_:function(){const drawer=this.$$("#drawer");if(drawer&&drawer.open){drawer.closeDrawer()}},onLoadErrorDialogClose_:function(){this.showLoadErrorDialog_=false},onOptionsDialogClose_:function(){this.showOptionsDialog_=false},onPackTap_:function(){this.showPackDialog_=true;this.async(()=>{this.$$("#pack-dialog").show()})},onPackDialogClose_:function(){this.showPackDialog_=false},onViewExitFinish_:function(e){const viewType=e.path[0].tagName;if(viewType=="EXTENSIONS-ITEM-LIST"||viewType=="EXTENSIONS-KEYBOARD-SHORTCUTS"){return}const extensionId=e.path[0].data.id;const list=this.$$("extensions-item-list");const button=viewType=="EXTENSIONS-DETAIL-VIEW"?list.getDetailsButton(extensionId):list.getErrorsButton(extensionId);if(button)button.focus()},onShowInstallWarnings_:function(e){this.installWarnings_=e.detail;this.showInstallWarningsDialog_=true},onInstallWarningsDialogClose_:function(){this.installWarnings_=null;this.showInstallWarningsDialog_=false}});return{Manager:Manager}});